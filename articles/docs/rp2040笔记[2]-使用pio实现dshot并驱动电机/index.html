<!doctype html><html lang=zh-CN><head><title>rp2040ç¬”è®°[2]-ä½¿ç”¨pioå®ç°dshotå¹¶é©±åŠ¨ç”µæœº | ByeIOÂ·å¼€å‘è€…åšå®¢</title><meta content=ByeIOÂ·å¼€å‘è€…åšå®¢ property=og:site_name><meta content=article property=og:type><meta content=rp2040ç¬”è®°[2]-ä½¿ç”¨pioå®ç°dshotå¹¶é©±åŠ¨ç”µæœº property=og:title><meta content=//articles/docs/rp2040ç¬”è®°[2]-ä½¿ç”¨pioå®ç°dshotå¹¶é©±åŠ¨ç”µæœº/ property=og:url><meta content=åŸºäºrustå’Œembassyæ¡†æ¶ä½¿ç”¨pioå®ç°dshotå¹¶é©±åŠ¨ç”µæœº;ä½¿ç”¨å…¨å±€ä¼ªé™æ€å˜é‡è®°å½•ç”µæœºé€Ÿåº¦å¹¶å¼‚æ­¥æ›´æ–°å€¼. property=og:description><meta content=/processed_images/img00006.3250c5dc35a28271.webp property=og:image><meta content=summary_large_image name=twitter:card><meta content=rp2040ç¬”è®°[2]-ä½¿ç”¨pioå®ç°dshotå¹¶é©±åŠ¨ç”µæœº name=twitter:title><meta content=//articles/docs/rp2040ç¬”è®°[2]-ä½¿ç”¨pioå®ç°dshotå¹¶é©±åŠ¨ç”µæœº/ name=twitter:url><meta content=åŸºäºrustå’Œembassyæ¡†æ¶ä½¿ç”¨pioå®ç°dshotå¹¶é©±åŠ¨ç”µæœº;ä½¿ç”¨å…¨å±€ä¼ªé™æ€å˜é‡è®°å½•ç”µæœºé€Ÿåº¦å¹¶å¼‚æ­¥æ›´æ–°å€¼. name=twitter:description><meta content=/processed_images/img00006.3250c5dc35a28271.webp name=twitter:image><meta content=åŸºäºrustå’Œembassyæ¡†æ¶ä½¿ç”¨pioå®ç°dshotå¹¶é©±åŠ¨ç”µæœº;ä½¿ç”¨å…¨å±€ä¼ªé™æ€å˜é‡è®°å½•ç”µæœºé€Ÿåº¦å¹¶å¼‚æ­¥æ›´æ–°å€¼. name=description><script id=ld-json type=application/ld+json>
        {
          "@context": "https://schema.org/",
          "@type": "Article",
          "headline": "rp2040ç¬”è®°[2]-ä½¿ç”¨pioå®ç°dshotå¹¶é©±åŠ¨ç”µæœº",
          "author": {
            "@type": "Person",
            "name": "qsbye",
            "url": "/about"
          },
          "image": "/processed_images/img00006.c4abedc898f992a6.webp",
          "datePublished": "2025-01-01T00:00:00+00:00",
          
          "description": "åŸºäºrustå’Œembassyæ¡†æ¶ä½¿ç”¨pioå®ç°dshotå¹¶é©±åŠ¨ç”µæœº;ä½¿ç”¨å…¨å±€ä¼ªé™æ€å˜é‡è®°å½•ç”µæœºé€Ÿåº¦å¹¶å¼‚æ­¥æ›´æ–°å€¼."
        }
    </script><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content="telephone=no" name=format-detection><meta content=var(--wjx-card-bg) name=theme-color><link href=/manifest.json rel=manifest><link href=/img/avatar.png rel=icon type=image/x-icon><link href=/img/avatar.png rel=apple-touch-icon><link href=/img/avatar.png rel=bookmark><link href=/img/avatar.png rel=apple-touch-icon-precomposed sizes=180x180><script src=/libs/jquery/jquery-3.7.1.min.js></script><script src=/libs/pjax/pjax.min.js></script><script src=/production/js/utils.js></script><link href=/production/css/blog.css rel=stylesheet><link href=/css/custom.css rel=stylesheet><link onload="this.onload=null;this.rel='stylesheet'" as=style href=/libs/snackbar/snackbar.min.css rel=preload><noscript><link href=/libs/snackbar/snackbar.min.css rel=stylesheet></noscript><script>// Added non-passive event listener
  !function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){var e,t=["scroll","wheel","touchstart","touchmove","touchenter","touchend","touchleave","mouseout","mouseleave","mouseup","mousedown","mousemove","mouseenter","mousewheel","mouseover"];if(function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}()){var n=EventTarget.prototype.addEventListener;e=n,EventTarget.prototype.addEventListener=function(n,o,r){var i,s="object"==typeof r&&null!==r,u=s?r.capture:r;(r=s?function(e){var t=Object.getOwnPropertyDescriptor(e,"passive");return t&&!0!==t.writable&&void 0===t.set?Object.assign({},e):e}(r):{}).passive=void 0!==(i=r.passive)?i:-1!==t.indexOf(n)&&!0,r.capture=void 0!==u&&u,e.call(this,n,o,r)},EventTarget.prototype.addEventListener._original=e}});</script><script>((win) => {
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return;
        const now = new Date();
        const expiryDay = ttl * 86400000;
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        };
        localStorage.setItem(key, JSON.stringify(item));
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key);

        if (!itemStr) {
          return undefined;
        }
        const item = JSON.parse(itemStr);
        const now = new Date();

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key);
          return undefined;
        }
        return item.value;
      },
    };

    win.getScript = (url) =>
      new Promise((resolve, reject) => {
        const script = document.createElement("script");
        script.src = url;
        script.async = true;
        script.onerror = reject;
        script.onload = script.onreadystatechange = function () {
          const loadState = this.readyState;
          if (loadState && loadState !== "loaded" && loadState !== "complete")
            return;
          script.onload = script.onreadystatechange = null;
          resolve();
        };
        document.head.appendChild(script);
      });

    win.getCSS = (url, id = false) =>
      new Promise((resolve, reject) => {
        const link = document.createElement("link");
        link.rel = "stylesheet";
        link.href = url;
        if (id) link.id = id;
        link.onerror = reject;
        link.onload = link.onreadystatechange = function () {
          const loadState = this.readyState;
          if (loadState && loadState !== "loaded" && loadState !== "complete")
            return;
          link.onload = link.onreadystatechange = null;
          resolve();
        };
        document.head.appendChild(link);
      });

    win.activateDarkMode = function () {
      document.documentElement.setAttribute("data-theme", "dark");
      document.documentElement.classList.add("color-scheme-dark");
      wjx.initThemeColor();
    };
    win.activateLightMode = function () {
      document.documentElement.setAttribute("data-theme", "light");
      document.documentElement.classList.remove("color-scheme-dark");
      wjx.initThemeColor();
    };
    const t = saveToLocal.get("theme");

    const isDarkMode = window.matchMedia(
      "(prefers-color-scheme: dark)"
    ).matches;
    const isLightMode = window.matchMedia(
      "(prefers-color-scheme: light)"
    ).matches;
    const isNotSpecified = window.matchMedia(
      "(prefers-color-scheme: no-preference)"
    ).matches;
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified;

    if (t === undefined) {
      if (isLightMode) activateLightMode();
      else if (isDarkMode) activateDarkMode();
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date();
        const hour = now.getHours();
        const isNight = hour <= 6 || hour >= 18;
        isNight ? activateDarkMode() : activateLightMode();
      }
      window
        .matchMedia("(prefers-color-scheme: dark)")
        .addListener(function (e) {
          if (saveToLocal.get("theme") === undefined) {
            e.matches ? activateDarkMode() : activateLightMode();
          }
        });
    } else if (t === "light") activateLightMode();
    else activateDarkMode();

    if ("system" === "dark")
      activateDarkMode();
    else activateLightMode();

    const asideStatus = saveToLocal.get("aside-status");
    if (asideStatus !== undefined) {
      if (asideStatus === "hide") {
        document.documentElement.classList.add("hide-aside");
      } else {
        document.documentElement.classList.remove("hide-aside");
      }
    }
  })(window);</script><script data-pace-options='{ "restartOnRequestAfter":false,"eventLag":false}' src=/libs/pace/pace.min.js></script><script defer src=/libs/clipboard/clipboard.min.js></script><script src=/libs/countup/countup.js></script><link href=/icon/font.css rel=stylesheet><style>[data-theme=light]{--wjx-theme:#425aef!important;--wjx-theme-op:#425aef23!important;--wjx-theme-op-deep:#425aefdd!important;--wjx-theme-none:#425aef00!important}[data-theme=dark]{--wjx-theme:#f2b94b!important;--wjx-theme-op:#f2b94b23!important;--wjx-theme-op-deep:#f2b94bdd!important;--wjx-theme-none:#f2b94b00!important}:root{--halo-comment-widget-component-card-bg:var(--wjx-card-bg);--halo-comment-widget-component-theme-op:var(--wjx-theme-op);--halo-comment-widget-component-card-border:var(--wjx-card-border);--halo-comment-widget-component-shadow-border:var(--wjx-shadow-border);--halo-comment-widget-component-secondtext:var(--wjx-secondtext);--halo-comment-widget-component-lighttext:var(--wjx-lighttext);--halo-comment-widget-component-secondbg:var(--wjx-secondbg);--halo-comment-widget-component-fontcolor:var(--wjx-fontcolor);--halo-comment-widget-component-main:var(--wjx-main);--halo-comment-widget-component-background:var(--wjx-background);--halo-comment-widget-component-white:var(--wjx-white);--halo-comment-widget-component-shadow-black:var(--wjx-shadow-black)}#page{--halo-comment-widget-component-padding:1rem}.color-scheme-dark,.dark,[data-color-scheme=dark]{--halo-search-widget-color-modal-layer:var(--wjx-maskbgdeep);--halo-search-widget-color-modal-content-bg:var(--wjx-card-bg);--halo-search-widget-color-form-input:#fffc;--halo-search-widget-color-form-input-placeholder:#6b7280d9;--halo-search-widget-color-form-input-bg:var(--wjx-card-bg);--halo-search-widget-color-form-divider:#bbbbbb0f;--halo-search-widget-color-result-item-bg:var(--wjx-card-bg);--halo-search-widget-color-result-item-hover-bg:#90939914;--halo-search-widget-color-result-item-title:#fffc;--halo-search-widget-color-result-item-content:#ffffff82;--halo-search-widget-color-command-kbd-item:#c0c4ccb3;--halo-search-widget-color-command-kbd-border:#bbbbbb0f;--halo-search-widget-color-result-empty:#6b7280d9}[data-theme=light]{--halo-search-widget-color-result-item-title:#4b5563}</style><script id=site-config>var GLOBAL_CONFIG = {
        
                
        
        
        
        
        htmlType: "post",
        postTitle: "rp2040ç¬”è®°[2]-ä½¿ç”¨pioå®ç°dshotå¹¶é©±åŠ¨ç”µæœº",
        isPost: true,
        isHome: false,
        passageTip: {
            enable: true,
            day: 60,
        },
        copyright: {
            enable: false,
            limitCount: 10,
            languages: {
                author: " ä½œè€…ï¼šqsbye",
                link: " é“¾æ¥ï¼š",
                source: " æ¥æºï¼šByeIOÂ·å¼€å‘è€…åšå®¢",
                info: " æç¤ºï¼šè‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„å¹¶ä¿ç•™åŸæ–‡é“¾æ¥ã€‚"
            }
        },
        lightbox: 'fancybox',
        rightMenuEnable: true,
        lazyload: {
            enable: true,
            error: "/img/404.svg"
        },
        isFriendLinksInFooter: true,
        loadingBox: true,
        progress_bar: true,
        navMusicEnable: false,
        isMusic: false,
        helloText: ["ğŸ¤–ï¸ æ•°ç ç§‘æŠ€çˆ±å¥½è€…","ğŸ”¯ å…¨æ ˆæ¶æ„éƒ½åœ¨è¡Œ","ğŸ  æ™ºèƒ½å®¶å±…å°èƒ½æ‰‹","ğŸ¤ ç§‘ç ”ç§‘æ™®ä¸¤ä¸è¯¯","ğŸµ ä¸šä½™åŸåˆ›éŸ³ä¹äºº","ğŸƒ æ–‡è‰ºé’å¹´ç»†èŠ‚æ§","ğŸ” æ¢ç´¢ä¸–ç•Œæ¶‰çŒå¹¿","ğŸ¤› çƒ­çˆ±åˆ†äº«äº¤æœ‹å‹"],
        profileStyle: "one",
        enable: true,
        keyboard: true,
        date_suffix: {
            just: 'åˆšåˆš',
            min: 'åˆ†é’Ÿå‰',
            hour: 'å°æ—¶å‰',
            day: 'å¤©å‰',
            month: 'ä¸ªæœˆå‰'
        },
        Snackbar: {
            chs_to_cht: "ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“",
            cht_to_chs: "ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“",
            day_to_night: "ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼",
            night_to_day: "ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼",
            bgLight: "#425AEF",
            bgDark: "#f2b94b",
            position: "top-center"
        },
        translate: {
            defaultEncoding: "2",
            translateDelay: 0,
            msgToTraditionalChinese: "ç¹",
            msgToSimplifiedChinese: "ç®€",
            rightMenuMsgToTraditionalChinese: "è½‰ç‚ºç¹é«”",
            rightMenuMsgToSimplifiedChinese: "è½¬ä¸ºç®€ä½“"
        },
        prism: {
            enable: true,
            enable_title: true,
            enable_hr: true,
            enable_line: true,
            enable_copy: true,
            enable_expander: true,
            prism_limit: 330,
            enable_height_limit: false
        },
        
        source: {
            power: {
                powerLink: "/",
                showNum: 3
            },
            links: {
                linksUrl: "/friends",
                linksNum: 3
            },
            jQuery: '/libs/jquery/jquery.min.js',
            justifiedGallery: {
                js: '/libs/justified-gallery/fjGallery.min.js',
                css: '/libs/justified-gallery/fjGallery.css'
            },
            fancybox: {
                js: '/libs/fancybox/jquery.fancybox.min.js',
                css: '/null'
            },
            comments: {
                use: "twikoo",
                maxBarrage: 1,
                barrageTime: 4000,
                mailMd5: "",
                lazyload: false,
                textarea: "el-textarea__inner"
            },
            post: {
                dynamicBackground: true
            },
            tool: {
                switch: false
            },
            postAi: {
                
                gptName: "æœ¬åœ°",
                modeName: "local"
            },twikoo: {
                js: "/libs/twikoo/twikoo.all.min.js",
                twikooUrl: "https://your-api-url",
            },
            footer: {
                default_enable: true
            },
            about: {
                
                rewardList: [],
                rewardAmount: 10
            }
        }
    };</script><style id=wjx-theme-styles>:root{--wjx-main:var(--wjx-theme)!important;--wjx-main-op:var(--wjx-theme-op)!important;--wjx-main-op-deep:var(--wjx-theme-op-deep)!important;--wjx-main-op-light:var(--wjx-theme-op-light)!important;--wjx-main-none:var(--wjx-theme-none)!important}</style><script>document.addEventListener('pjax:send', function () {
      // removeEventListener toc scroll
      window.removeEventListener('scroll', window.tocScrollFn);
      typeof preloader === 'object' && preloader.initLoading();
      
      if (window.aplayers) {
          for (let i = 0; i < window.aplayers.length; i++) {
              if (!window.aplayers[i].options.fixed) {
                  window.aplayers[i].destroy()
              }
          }
      }
      
      typeof typed === 'object' && typed.destroy();
      typeof window.initializationRegistry === 'object' && window.initializationRegistry.clear();
      
      //reset readmode
      const $bodyClassList = document.body.classList
      $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
  })
  document.addEventListener('pjax:complete', function () {
      window.refreshFn();
      
      document.querySelectorAll('script[data-pjax]').forEach(item => {
                  const newScript = document.createElement('script')
                  const content = item.text || item.textContent || item.innerHTML || ""
                  Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
                  newScript.appendChild(document.createTextNode(content))
                  item.parentNode.replaceChild(newScript, item)
              }
      );

      typeof chatBtnFn === 'function' && chatBtnFn();
      typeof panguInit === 'function' && panguInit();
      
      // google analytics
      typeof gtag === 'function' && gtag('config', '', {
          'page_path': window.location.pathname
      });
      
      // baidu analytics
      typeof _hmt === 'object' && _hmt.push(['_trackPageview', window.location.pathname]);
      
      typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting();
      
      // Analytics
      if (false) {
          MtaH5.pgv()
      }
      
      // prismjs
      typeof Prism === 'object' && Prism.highlightAll();
      
      typeof preloader === 'object' && preloader.endLoading();
  })
  document.addEventListener('pjax:error', (e) => {
      if (e.request.status === 404 || e.request.status === 500) {
          window.location.href = e.request.responseURL;
      }
  })</script><script data-pjax src=/production/js/main.js></script><script>let initTop = 0
  let isChatShow = true
  const innerHeight = window.innerHeight + 0
  window.addEventListener('scroll', btf.throttle(function (e) {
    const $rightside = document.getElementById('rightside')

    const $header = document.getElementById('page-header')
    const $cookies_window = document.getElementById('cookies-window')
    const isChatBtnHide = typeof chatBtnHide === 'function'
    const isChatBtnShow = typeof chatBtnShow === 'function'
  
    const currentTop = window.scrollY || document.documentElement.scrollTop
    // æ‰¾åˆ°æ»šåŠ¨æ–¹å‘ true is down & false is up
    const isDown = currentTop > initTop
    initTop = currentTop
    if (currentTop > 0) {
        if (isDown) {
            if ($header.classList.contains('nav-visible')) $header.classList.remove('nav-visible')
            if (isChatBtnShow && isChatShow === true) {
                chatBtnHide()
                isChatShow = false
            }
        } else {
            if (!$header.classList.contains('nav-visible')) $header.classList.add('nav-visible')
            if (isChatBtnHide && isChatShow === false) {
                chatBtnShow()
                isChatShow = true
            }
        }
        $header.classList.add('nav-fixed')
        if($cookies_window!=null && $cookies_window!=''){
            $cookies_window.classList.add('cw-hide')
        }
        if ($rightside && window.getComputedStyle($rightside).getPropertyValue('opacity') === '0') {
            $rightside.style.cssText = 'opacity: 0.8; transform: translateX(-58px)'
        }
    } else {
        if (currentTop === 0) {
            $header.classList.remove('nav-fixed', 'nav-visible')
        }
        $rightside.style.cssText = "opacity: ''; transform: ''"
    }
    if (document.body.scrollHeight <= innerHeight) {
        $rightside.style.cssText = 'opacity: 0.8; transform: translateX(-58px)'
    }
  }, 200))</script><script defer src=/libs/katex/katex.min.js></script><body><style>#loading-box{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#loading-box .loading-bg{background:var(--wjx-card-bg);z-index:1999;opacity:1;pointer-events:all;width:100%;height:100%;transition:all .2s;animation:.3s backwards showLoading;display:flex;position:fixed}#loading-box.loaded .loading-bg{pointer-events:none;transition:all .2s;animation:.3s forwards hideLoading}#loading-box .loading-img{width:100px;height:100px;margin:auto;animation-name:loadingAction;animation-duration:.2s;animation-iteration-count:infinite;animation-direction:alternate;overflow:hidden}#loading-box .loading-image-dot{background:#6bdf8f;border:6px solid #fff;border-radius:50%;width:30px;height:30px;position:absolute;top:50%;left:50%;-webkit-transform:translate(18px,24px);-moz-transform:translate(18px,24px);-ms-transform:translate(18px,24px);-o-transform:translate(18px,24px);transform:translate(18px,24px)}@keyframes loadingAction{0%{opacity:1}to{opacity:.6}}@keyframes hideLoading{0%{opacity:1}to{opacity:0}}@keyframes showLoading{0%{opacity:0}to{opacity:1}}</style><div id=loading-box onclick=wjx.hideLoading()><div class=loading-bg><picture class=loading-img style=border-radius:50%;width:100px;height:100px><source media="(min-width: 1em)" srcset=/processed_images/logo.21eeb8b123e2a315.avif><img alt=Loading decoding=async loading=lazy src=/processed_images/logo.caf14bfbf942dbfc.webp><noscript><img decoding=async loading=lazy src=/processed_images/logo.caf14bfbf942dbfc.webp></noscript></picture><div class=loading-image-dot></div></div></div><script>var preloader = {
            endLoading: () => {
                //- document.body.style.overflow = 'auto';
                document.getElementById('loading-box').classList.add("loaded")
            },
            initLoading: () => {
                //- document.body.style.overflow = '';
                document.getElementById('loading-box').classList.remove("loaded")
            }
        }
        window.addEventListener('load', preloader.endLoading())
        setTimeout(function () {
            preloader.endLoading();
        }, 3000)</script><div id=an_music_bg></div><div class=post data-type=post id=body-wrap><header class=post-bg id=page-header><nav class=show id=nav><div id=nav-group><div id=blog_name><div class=back-home-button tabindex=-1><i class="nav-icon back-home-button-icon icon-apps-fill" style=font-size:1rem></i><div class=back-menu-list-groups><div class=back-menu-list-group><div class=back-menu-list-title>ä½œå“</div><div class=back-menu-list><a class="back-menu-item nav-item" href=/articles/misc/lorem-ipsum>  <i class=icon-music style=font-size:.9em></i> <span class=back-menu-item-text>Lorem Ipsum</span> </a><a class="back-menu-item nav-item" href=/articles/misc/lorem-ipsum>  <i class=icon-music style=font-size:.9em></i> <span class=back-menu-item-text>Lorem Ipsum</span> </a></div></div></div></div><a class="nav-item icon-home" data-pjax href=/ id=site-name title=è¿”å›åšå®¢ä¸»é¡µ> <span>ByeIOÂ·å¼€å‘è€…åšå®¢</span> </a></div><div id=page-name-mask><div id=page-name><a clase=nav-item id=page-name-text onclick=btf.scrollToDest(0,500)> rp2040ç¬”è®°[2]-ä½¿ç”¨pioå®ç°dshotå¹¶é©±åŠ¨ç”µæœº </a></div></div><div id=menus><div class=menus_items><div class=menus_item><button class="site-page nav-item"><span>æ–‡åº“</span></button><div class=menus_item_child><div class=recursion_menus_item><a class="site-page child nav-item" href=/archives> <i class=icon-book-open style=font-size:.9em></i> <span>å…¨éƒ¨æ–‡ç« </span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=/categories> <i class=icon-folder-open style=font-size:.9em></i> <span>åˆ†ç±»åˆ—è¡¨</span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=/tags> <i class=icon-tags style=font-size:.9em></i> <span>æ ‡ç­¾åˆ—è¡¨</span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=javascript:toRandomPost()> <i class=icon-artstation style=font-size:.9em></i> <span>éšæœºæ–‡ç« </span> </a></div></div></div><div class=menus_item><a class="site-page nav-item" href=/tags/work> <span>æ¨è</span> </a><div class="menus_item_child vertical_nav"><div class=recursion_menus_item><a class="site-page child nav-item" href=/articles/docs/readme> <i class=icon-music style=font-size:.9em></i> <span>åšå®¢ä¸»é¢˜ä»‹ç»</span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=/articles/misc/lorem-ipsum> <i class=icon-music style=font-size:.9em></i> <span>Lorem Ipsum</span> </a></div></div></div><div class=menus_item><button class="site-page nav-item"><span>å‹é“¾</span></button><div class=menus_item_child><div class=recursion_menus_item><a class="site-page child nav-item" href=/friends> <i class=icon-link style=font-size:.9em></i> <span>å‹é“¾åˆ—è¡¨</span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=javascript:travelling()> <i class=icon-paper-plane style=font-size:.9em></i> <span>éšæœºå‘ç°</span> </a></div></div></div><div class=menus_item><button class="site-page nav-item"><span>æˆ‘çš„</span></button><div class=menus_item_child><div class=recursion_menus_item><a class="site-page child nav-item" href=/about> <i class=icon-rocket style=font-size:.9em></i> <span>å…³äºæœ¬äºº</span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=/equipment> <i class=icon-artstation style=font-size:.9em></i> <span>æˆ‘çš„è£…å¤‡</span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=/tags/project> <i class=icon-lightbulb style=font-size:.9em></i> <span>æˆ‘çš„é¡¹ç›®</span> </a></div></div></div></div></div><div id=nav-right><div class=nav-button id=randomPost_button><button class="site-page nav-item" href=javascript:void(0); onclick=toRandomPost() title=éšæœºæ–‡ç« ><i class="nav-icon icon-dice"></i></button></div><div class=nav-button id=darkmode_button><button class="site-page console_switchbutton nav-item" title="åˆ‡æ¢æ¨¡å¼ - æ—¥å¤œäº¤æ›¿ï¼Œé»‘ç™½äº’æ¢ã€‚" href=javascript:void(0); onclick=navFn.switchDarkMode();><i class="nav-icon icon-moon-clear-fill" style=font-size:1rem></i></button></div><div class=nav-button id=nav-console><button class="site-page console_switchbutton nav-item" href=javascript:void(0); onclick=wjx.showConsole() title=æ˜¾ç¤ºä¸­æ§å°><i class="nav-icon icon-dashboard"></i></button></div><div class=nav-button id=nav-totop onclick=btf.scrollToDest(0,500)><button class="totopbtn nav-item"><i class="nav-icon icon-arrow-up" style=font-size:1rem></i><span id=percent>0</span></button></div><div id=toggle-menu><button class="site-page nav-item"><i class="nav-icon icon-bars"></i></button></div></div></div></nav><div class="coverdiv loaded" id=coverdiv><img alt=cover class=nolazyload decoding=async id=post-cover loading=lazy src=/processed_images/img00006.c4abedc898f992a6.webp></div><div id=post-info><div id=post-firstinfo><div class=meta-firstline><a class=post-meta-original href=/copyright title=è¯¥æ–‡ç« ä¸ºåŸåˆ›æ–‡ç« ï¼Œæ³¨æ„ç‰ˆæƒåè®®>åŸåˆ›</a><span class=post-meta-categories> <a href=/categories/theme/ title=ä¸»é¢˜> ä¸»é¢˜ </a> </span><div class=tag_share><div class=post-meta__tag-list><a class=post-meta__tags href=/tags/blog/ title=åšå®¢> <span class="tags-name tags-punctuation">åšå®¢</span> </a><a class=post-meta__tags href=/tags/docs/ title=æ–‡æ¡£> <span class="tags-name tags-punctuation">æ–‡æ¡£</span> </a><a class=post-meta__tags href=/tags/featured/ title=å¿…çœ‹> <span class="tags-name tags-punctuation">å¿…çœ‹</span> </a><a class=post-meta__tags href=/tags/hot/ title=çƒ­é—¨> <span class="tags-name tags-punctuation">çƒ­é—¨</span> </a></div></div></div></div><h1 class=post-title>rp2040ç¬”è®°[2]-ä½¿ç”¨pioå®ç°dshotå¹¶é©±åŠ¨ç”µæœº</h1><div id=post-meta><div class=meta-secondline><span class=post-meta-author data-flag-title=æ–‡ç« ä½œè€… title=æ–‡ç« ä½œè€…> <i class="icon-zuozhe post-meta-icon"></i>qsbye </span><span class=post-meta-wordcount> <i class="icon-file-word post-meta-icon" title=å­—æ•°></i> <span class=post-meta-label>å­—æ•°:</span> <span class=word-count>1083</span> <span class=post-meta-separator></span> <i class="icon-clock post-meta-icon" title=é˜…è¯»è€—æ—¶></i> <span class=post-meta-label>é˜…è¯»è€—æ—¶:</span> <span> 6 åˆ†é’Ÿ</span> </span><span class=post-meta-date> <i class="icon-calendar-days post-meta-icon"></i> <time title="2025-01-01 00:00:00" datetime=2025-01-01> 2025/01/01 </time> </span><span class=post-meta-wechat title=è¯¥æ–‡ç« åœ¨åšå®¢é¦–å‘> <i class="icon-rss post-meta-icon"></i>åšå®¢ç‹¬äº« </span><a class=post-meta-pv data-flag-title=çƒ­åº¦ title=çƒ­åº¦> <i class="icon-fire post-meta-icon"></i> <span class=post-meta-label>çƒ­åº¦:</span> <span id=twikoo_visitors> <i class="icon-spinner fa-spin"></i> </span> </a><a class=post-meta-commentcount data-flag-title=è¯„è®ºæ•° href=#post-comment title=è¯„è®ºæ•°> <i class="icon-chat--fill post-meta-icon" style=font-size:17px></i> <span class=post-meta-label>è¯„è®º:</span> <span id=twikoo-count> <i class="icon-spinner fa-spin"></i> </span> </a></div></div></div><section class="main-hero-waves-area waves-area"><svg viewbox="0 24 150 28" class=waves-svg preserveaspectratio=none shape-rendering=auto xlink=http://www.w3.org/1999/xlink xmlns=http://www.w3.org/2000/svg><defs><path d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z" id=gentle-wave></path></defs><g class=parallax><use href=#gentle-wave x=48 y=0></use><use href=#gentle-wave x=48 y=3></use><use href=#gentle-wave x=48 y=5></use><use href=#gentle-wave x=48 y=7></use></g></svg></section></header><main class="layout right-aside" id=content-inner><div id=post><div id=abstract-container><div class=abstract-title><i class=icon-bilibili></i><div class=abstract-title-text>æ–‡ç« æ‘˜è¦</div><div id=abstract-tag>æœ¬åœ°</div></div><div id=abstract-content style=display:block>åŸºäºrustå’Œembassyæ¡†æ¶ä½¿ç”¨pioå®ç°dshotå¹¶é©±åŠ¨ç”µæœº;ä½¿ç”¨å…¨å±€ä¼ªé™æ€å˜é‡è®°å½•ç”µæœºé€Ÿåº¦å¹¶å¼‚æ­¥æ›´æ–°å€¼.</div><div class=abstract-btn-box><div class=abstract-btn-item id=abstract-intro>ä»‹ç»è‡ªå·±</div><div class=abstract-btn-item id=abstract-generate>ç”Ÿæˆæœ¬æ–‡ç®€ä»‹</div><div class=abstract-btn-item id=abstract-recommend>æ¨èç›¸å…³æ–‡ç« </div><div class=abstract-btn-item id=abstract-home>å‰å¾€ä¸»é¡µ</div><div class=abstract-btn-item id=abstract-hide style=margin-left:auto>éšè—æœ¬æ‘˜è¦</div></div></div><div class="note simple warning" data-tip-enable=true data-update-date=2025-01-01 id=passage-tip></div><article class="post-content line-numbers" id=article-container><h2 id=zhai-yao>æ‘˜è¦</h2><p>åŸºäºrustå’Œembassyæ¡†æ¶ä½¿ç”¨pioå®ç°dshotå¹¶é©±åŠ¨ç”µæœº;ä½¿ç”¨å…¨å±€ä¼ªé™æ€å˜é‡è®°å½•ç”µæœºé€Ÿåº¦å¹¶å¼‚æ­¥æ›´æ–°å€¼. Implementing DShot and driving the motor using PIO based on Rust and embassy frameworks; Use global pseudo static variables to record motor speed and asynchronously update values.<h2 id=guan-jian-ci>å…³é”®è¯</h2><p>rust;embassy;pio;dshot;mutex;<h2 id=guan-jian-xin-xi>å…³é”®ä¿¡æ¯</h2><ul><li>é¡¹ç›®åœ°å€:[https://github.com/ByeIO/byeefree.rp2040_quad.embassy]</ul><pre class=language-toml data-lang=toml><code class=language-toml data-lang=toml>[package]
edition = "2021"
name = "byeefree_rp2040_quad_embassy"
version = "0.1.0"
license = "MIT OR Apache-2.0"
resolver = "2"

[dependencies]
# arm cortex-mç›¸å…³
cortex-m = { version = "0.7", features = ["inline-asm"] }
cortex-m-rt = "0.7"

# rp-picoæŠ½è±¡å±‚ç›¸å…³
# rp-pico = "0.9.0"

# è°ƒè¯•ä¿¡æ¯ç›¸å…³
defmt = "0.3"
defmt-rtt = "0.4"
panic-probe = { version = "0.3", features = ["print-defmt"] }

# embassyåµŒå…¥å¼å¼‚æ­¥æ¡†æ¶ç›¸å…³
embassy-embedded-hal = { version = "0.3", features = ["defmt"] }

embassy-executor = { version = "0.7", features = ["arch-cortex-m", "executor-thread", "executor-interrupt", "defmt", "task-arena-size-32768"] }
embassy-futures = { version = "0.1" }
embassy-sync = { version = "0.6", features = ["defmt"] }
embassy-time = { version = "0.4", features = ["defmt", "defmt-timestamp-uptime"] }

embassy-rp = { version = "0.3", features = ["defmt", "unstable-pac", "time-driver", "critical-section-impl", "rp2040"] }

# pioç›¸å…³, æš‚æ—¶ä½¿ç”¨0.2ç‰ˆæœ¬
pio-proc = "0.2"
pio = "0.2"

## é€šè¿‡usbè·å–æ—¥å¿—ä¿¡æ¯ (æ³¨æ„: embassy-usb-logger éœ€è¦ portable-atomic å¼€å¯ critical-sectionç‰¹æ€§)
embassy-usb-driver = { version = "0.1", features = ["defmt"] }
embassy-usb-logger = { version = "0.4" }
portable-atomic = { version = "1.10", features = ["critical-section"] }
log = "0.4"
embassy-usb = { version = "0.4.0", features = ["defmt"] }

## ç½‘ç»œæ”¯æŒ
embassy-net = { version = "0.6", features = ["defmt", "tcp", "udp", "dhcpv4", "medium-ethernet", "dns", "proto-ipv4", "proto-ipv6", "multicast"] }
# wiznet ethernet driver support
embassy-net-wiznet = { version = "0.2", features = ["defmt"] }
## pico-w æ”¯æŒ
cyw43 = { version = "0.3", features = ["defmt", "firmware-logs"] }
cyw43-pio = { version = "0.3", features = ["defmt"] }

# ç”Ÿå‘½å‘¨æœŸ
static_cell = "2.1.0"

# Dshotåè®®
dshot-pio = { path = "./static/dshot-pio", features = ["embassy-rp"] }

# çº¿æ€§ä»£æ•°
nalgebra = { version = "0.33.2", default-features = false, features = ["libm"] }

# æµ®ç‚¹æ•°è®¡ç®—æ”¯æŒ
libm = "0.2.11"
num-traits = { version = "0.2", default-features = false, features = ["libm"] }

# å‘½ä»¤è¡Œè§£æ
embedded-cli = "0.2.1"
embedded-io = "0.6.1"
embedded-io-async = "0.6.1"
ufmt = "0.2.0"

# å†…å­˜åˆ†é…
embedded-alloc = { version = "0.6.0", features = ["llff"] }
heapless = { version = "0.8.0", features = ["portable-atomic"] }

# ä¸´ç•ŒåŒºè®¿é—®
critical-section = { version = "1.2.0", features = [] }

# cargo build/run
[profile.dev]
codegen-units = 1
debug = 2
debug-assertions = true
incremental = false
opt-level = 1
overflow-checks = true
lto = "off"

# cargo build/run --release
[profile.release]
codegen-units = 1
debug = 2
debug-assertions = false
incremental = false
lto = 'fat'
opt-level = 's'
overflow-checks = false

# do not optimize proc-macro crates = faster builds from scratch
[profile.dev.build-override]
codegen-units = 8
debug = false
debug-assertions = false
opt-level = 0
overflow-checks = false

[profile.release.build-override]
codegen-units = 8
debug = false
debug-assertions = false
opt-level = 0
overflow-checks = false

# cargo test
[profile.test]
codegen-units = 1
debug = 2
debug-assertions = true
incremental = false
opt-level = 's'
overflow-checks = true

# cargo test --release
[profile.bench]
codegen-units = 1
debug = 2
debug-assertions = false
incremental = false
lto = 'fat'
opt-level = 's'
</code></pre><h2 id=yuan-li-jian-jie>åŸç†ç®€ä»‹</h2><h3 id=dshot-oneshot-multishotxie-yi-jian-jie>dshot/oneshot/multishotåè®®ç®€ä»‹</h3><p>[https://github.com/betaflight/betaflight/wiki/Dshot] [https://www.bilibili.com/video/BV1jK411p7Yr/] [https://team-blacksheep.freshdesk.com/support/solutions/articles/4000100133-what-are-oneshoot-multishot-and-dshot-] [https://www.mathaelectronics.com/what-are-oneshot-and-multishot-in-esc-oneshot-vs-multishot-esc-esc-calibration-protocol%EF%BF%BC/] <strong>ESCæ ¡å‡†åè®®ï¼šOneshotä¸Multishotçš„æ ¸å¿ƒè§£æ</strong><ol><li><p><strong>ESCçš„å®šä¹‰ä¸ä½œç”¨</strong><br> ç”µå­è°ƒé€Ÿå™¨ï¼ˆESCï¼‰æ˜¯æ§åˆ¶æ— åˆ·ç›´æµç”µæœºï¼ˆBLDCï¼‰è½¬é€Ÿã€æ–¹å‘åŠåˆ¶åŠ¨çš„æ ¸å¿ƒç”µè·¯ï¼Œå…¶æ€§èƒ½ä¾èµ–äºå›ºä»¶æ”¯æŒçš„é€šä¿¡åè®®ã€‚</p><li><p><strong>ESCå›ºä»¶ç±»å‹</strong></p> <ul><li>å¸¸è§å›ºä»¶åŒ…æ‹¬ï¼šBLHeliã€BLHeli_Sã€SimonKã€Kissã€BLHeli_32ç­‰ã€‚<li>ä¸åŒç¡¬ä»¶æ”¯æŒçš„å›ºä»¶æœ‰é™ï¼Œä¾‹å¦‚BLHeli_Sä»…é€‚ç”¨äºç‰¹å®šESCèŠ¯ç‰‡ã€‚</ul><li><p><strong>åè®®åˆ†ç±»ä¸ç‰¹æ€§</strong></p> <ul><li><strong>æ¨¡æ‹ŸPWM</strong>ï¼šé€šè¿‡å ç©ºæ¯”æ§åˆ¶ç”µæœºï¼ˆ0%ä¸ºåœæ­¢ï¼Œ100%ä¸ºå…¨é€Ÿï¼‰ï¼Œä½†å»¶è¿Ÿè¾ƒé«˜ã€‚<li><strong>æ ‡å‡†PWM</strong>ï¼šä»¥è„‰å†²å®½åº¦ï¼ˆ1msä¸ºåœæ­¢ï¼Œ2msä¸ºå…¨é€Ÿï¼‰ä¼ è¾“æŒ‡ä»¤ï¼Œæœ€å¤§é¢‘ç‡500Hzï¼Œå»¶è¿Ÿçº¦2msã€‚<li><strong>Oneshot125</strong>ï¼š <ul><li>è„‰å†²èŒƒå›´ç¼©çŸ­ä¸º125Î¼s-250Î¼sï¼Œé¢‘ç‡æå‡è‡³4000Hzï¼Œå»¶è¿Ÿé™ä½è‡³çº¦250Î¼sã€‚<li>å…¼å®¹æ€§å¹¿ï¼Œé€‚ç”¨äºå¤šæ•°æ”¯æŒBLHeliå›ºä»¶çš„ESCã€‚</ul><li><strong>Oneshot42</strong>ï¼š <ul><li>è„‰å†²èŒƒå›´è¿›ä¸€æ­¥å‹ç¼©è‡³42Î¼s-84Î¼sï¼Œé¢‘ç‡æ›´é«˜ï¼Œå»¶è¿Ÿæ›´ä½ï¼Œä½†å¯¹ç¡¬ä»¶è¦æ±‚æ›´è‹›åˆ»ã€‚</ul><li><strong>Multishot</strong>ï¼š <ul><li>ç›®å‰æœ€å¿«çš„æ¨¡æ‹Ÿåè®®ï¼Œè„‰å†²èŒƒå›´5Î¼s-25Î¼sï¼Œé¢‘ç‡è¾¾32kHzï¼Œå»¶è¿Ÿä»…çº¦25Î¼sï¼Œé€‚ç”¨äºé«˜æ€§èƒ½ç«é€Ÿæ— äººæœºã€‚</ul><li><strong>Dshotï¼ˆæ•°å­—åè®®ï¼‰</strong>ï¼š <ul><li>é€šè¿‡æ•°å­—ä¿¡å·ä¼ è¾“ï¼ˆå¦‚Dshot150/300/600/1200ï¼‰ï¼ŒæŠ—å¹²æ‰°èƒ½åŠ›å¼ºï¼Œæ— éœ€æ ¡å‡†ï¼Œæ”¯æŒé”™è¯¯æ ¡éªŒã€‚</ul></ul><li><p><strong>Oneshotä¸Multishotçš„å¯¹æ¯”</strong></p> <table><thead><tr><th>å‚æ•°<th>Oneshot125<th>Multishot<tbody><tr><td>è„‰å†²èŒƒå›´<td>125-250Î¼s<td>5-25Î¼s<tr><td>å»¶è¿Ÿ<td>~250Î¼s<td>~25Î¼s<tr><td>é€‚ç”¨åœºæ™¯<td>é€šç”¨é£è¡Œ<td>é«˜å“åº”ç«é€Ÿ<tr><td>å…¼å®¹æ€§<td>å¹¿æ³›<td>éœ€æ–°ç¡¬ä»¶æ”¯æŒ</table><li><p><strong>åè®®é€‰æ‹©å»ºè®®</strong></p> <ul><li><strong>ä¼˜å…ˆæ•°å­—åè®®</strong>ï¼šDshotå› å…¶æŠ—å™ªæ€§å’Œç¨³å®šæ€§é€æ¸æˆä¸ºä¸»æµã€‚<li><strong>æ¨¡æ‹Ÿåè®®åœºæ™¯</strong>ï¼šè‹¥éœ€æè‡´ä½å»¶è¿Ÿï¼ˆå¦‚ç«é€Ÿæ— äººæœºï¼‰ï¼ŒMultishotä¼˜äºOneshotï¼›æ™®é€šåœºæ™¯å¯é€‰Oneshot125ä»¥å…¼å®¹æ—§ç¡¬ä»¶ã€‚</ul></ol><h3 id=dshot-pioku-jian-jie>dshot-pioåº“ç®€ä»‹</h3><p>[https://github.com/peterkrull/dshot-pio] DShot implementation for RP2040 using PIO This crate utilizes a single PIO block of the RP2040, enable it to send up to four DShot ESC commands (per PIO block, there are 2 of them) simultaneously, making it a great fit for quad-copters. The crate supports both the embassy-rp and rp2040-hal hardware abstraction layers (HAL).<h3 id=rust-no-stdhuan-jing-xia-quan-ju-bian-liang-xiao-ji-qiao>rust no_stdç¯å¢ƒä¸‹å…¨å±€å˜é‡å°æŠ€å·§</h3><p>[https://blog.csdn.net/jxandrew/article/details/139348634] [https://techie-s.work/posts/2023/01/embassy-an-easy-to-use-async-framework-for-embedded-rust/] [https://blog.theembeddedrustacean.com/sharing-data-among-tasks-in-rust-embassy-synchronization-primitives#heading-the-async-mutex-type]<ul><li>ç”¨é™æ€å˜é‡äº’æ–¥è®¿é—®/å†™å…¥æ¥å¯¹å†²rustçš„ç”Ÿå‘½å‘¨æœŸã€å€Ÿç”¨éš¾</ul><ol><li>é˜»å¡å‹ åœ¨å®ä¾‹åŒ–å…±äº«å…¨å±€å˜é‡æ—¶ï¼Œéœ€è¦å®šä¹‰RawMutexç±»å‹ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘é€‰æ‹©äº†ThreadModeMutexã€‚é€‰æ‹©ä»€ä¹ˆå–å†³äºæ‚¨ä½¿ç”¨äº’æ–¥ä½“çš„ä¸Šä¸‹æ–‡ã€‚åœ¨æˆ‘ä»¬çš„èƒŒæ™¯ä¸‹ï¼Œæˆ‘ä»¬é€‰æ‹©ä»€ä¹ˆå¹¶ä¸é‡è¦ã€‚æ›´å¤šç»†èŠ‚å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ã€‚ åœ¨å…¨å±€å˜é‡å®‰è£…ä¸­ï¼ŒMutexå†…çš„u32ç±»å‹è¢«RefCellå°è£…ã€‚è¿™æ˜¯ä¸ºäº†å…è®¸äº’æ–¥ä½“ä¸­åŒ…è£¹çš„å€¼çš„å†…éƒ¨å¯å˜æ€§ã€‚ è¦è®¿é—®SHAREDï¼Œä½¿ç”¨lockæ–¹æ³•è·å–å…¨å±€å…±äº«å€¼çš„é”ã€‚lockæä¾›å¯¹å€¼å‘ç”Ÿçªå˜çš„é—­åŒ…ä¸­é”å®šå˜é‡çš„è®¿é—®ã€‚</ol><pre class=language-rs data-lang=rs><code class=language-rs data-lang=rs>use core::cell::RefCell;
use embassy_sync::blocking_mutex::Mutex;

static SHARED: Mutex&LTThreadModeRawMutex, RefCell&LTu32>> = Mutex::new(RefCell::new(0));

#[embassy_executor::task]
async fn async_task() {
    loop {
        // Load value from global context, modify and store
        SHARED.lock(|f| {
            let val = f.borrow_mut().wrapping_add(1);
            f.replace(val);
        });
        Timer::after(Duration::from_millis(1000)).await;
    }
}

#[embassy_executor::main]
async fn main(spawner: Spawner) {
    // Initialize and create handle for device peripherals
    let p = embassy_stm32::init(Default::default());
    //Configure UART
    let mut usart = UartTx::new(p.USART2, p.PA2, NoDma, Config::default());
    // Create empty String for message
    let mut msg: String&LT8> = String::new();
    // Spawn async blinking task
    spawner.spawn(async_task()).unwrap();

    loop {
        // Wait 1 second
        Timer::after(Duration::from_millis(1000)).await;
        // Obtain updated value from global context
        let shared = SHARED.lock(|f| f.clone().into_inner());
        core::writeln!(&mut msg, "{:02}", shared).unwrap();
        // Transmit Message
        usart.blocking_write(msg.as_bytes()).unwrap();
        msg.clear();
    }
}
</code></pre><ol start=2><li>å¼‚æ­¥å‹ é‚£ä¹ˆï¼Œé˜»å¡äº’æ–¥ä½“ä¸å¼‚æ­¥äº’æ–¥ä½“æœ‰ä½•ä¸åŒï¼Ÿé˜»å¡äº’æ–¥é”ä¸ä¼šåœ¨ç­‰å¾…ç‚¹/å¼‚æ­¥ä»»åŠ¡ä¹‹é—´ä¿æŒã€‚æˆ–è€…ï¼Œä½¿ç”¨å¼‚æ­¥äº’æ–¥ä½“ï¼Œå¯ä»¥åœ¨æŒ‰ä½é”çš„åŒæ—¶ç­‰å¾…ï¼Œå…¶ä»–ä»»åŠ¡ä¹Ÿä¼šç›¸åº”åœ°ç­‰å¾…ã€‚ ä¸‹é¢çš„ä»£ç åœ¨ç¨ä½œä¿®æ”¹åå®ç°äº†ä¸æ—©æœŸä»£ç ç›¸åŒçš„åŠŸèƒ½ã€‚é¦–å…ˆï¼Œè¯·æ³¨æ„ä¸å†éœ€è¦RefCellï¼Œå¹¶ä¸”å…±äº«å˜é‡ä¸èƒ½é€šè¿‡é—­åŒ…è®¿é—®ã€‚ç›¸åï¼Œé”æ–¹æ³•ä¼šç­‰å¾…é”è¢«è·å–ï¼Œå¹¶ä¸”åœ¨ä½œç”¨åŸŸç»“æŸä¹‹å‰ä¸ä¼šé‡Šæ”¾å®ƒã€‚å¦‚æœä½ æ³¨æ„åˆ°async_taskä¸­é”çš„ä½œç”¨åŸŸï¼Œåˆ™æœ‰ä¸€ä¸ª<code>Timer::after(Duration::from_millis(1000)).await;</code>æ’å…¥çš„è¡Œã€‚å°è¯•ä¸€ä¸‹æ­¤è¡Œä¸­çš„å»¶è¿Ÿå€¼ï¼Œçœ‹çœ‹ä»£ç çš„è¡Œä¸ºä¼šå¾ˆæœ‰è¶£ã€‚å…³é”®æ˜¯è¦è¯æ˜ï¼Œå½“ä½ å¢åŠ å€¼æ—¶ï¼Œé”å°†ç”±async_taskä¿æŒï¼Œé˜²æ­¢ä¸»ä»»åŠ¡ä¸­çš„SHAREDè¢«è®¿é—®ã€‚</ol><pre class=language-rs data-lang=rs><code class=language-rs data-lang=rs>use embassy_sync::blocking_mutex::raw::ThreadModeRawMutex;
use embassy_sync::mutex::Mutex;

static SHARED: Mutex&LTThreadModeRawMutex, u32> = Mutex::new(0);

#[embassy_executor::task]
async fn async_task() {
    loop {
        {
            let mut shared = SHARED.lock().await;
            *shared = shared.wrapping_add(1);
            Timer::after(Duration::from_millis(1000)).await;
        }
        Timer::after(Duration::from_millis(1000)).await;
    }
}

#[embassy_executor::main]
async fn main(spawner: Spawner) {
    // Initialize and create handle for device peripherals
    let p = embassy_stm32::init(Default::default());
    //Configure UART
    let mut usart = UartTx::new(p.USART2, p.PA2, NoDma, Config::default());
    // Create empty String for message
    let mut msg: String&LT8> = String::new();
    // Spawn async blinking task
    spawner.spawn(async_task()).unwrap();

    loop {
        // Wait 1 second
        Timer::after(Duration::from_millis(1000)).await;
        // Obtain updated value from global context
        let shared = SHARED.lock().await;
        core::writeln!(&mut msg, "{:02}", *shared).unwrap();
        // Transmit Message
        usart.blocking_write(msg.as_bytes()).unwrap();
        msg.clear();
    }
}
</code></pre><h2 id=guan-jian-dai-ma>å…³é”®ä»£ç </h2><p><strong>dshot_embassy_rp.rs</strong><pre class=language-rs data-lang=rs><code class=language-rs data-lang=rs>#![no_std]

#[cfg(feature = "embassy-rp")]
pub mod dshot_embassy_rp;

#[cfg(feature = "rp2040-hal")]
pub mod dshot_rp2040_hal;

pub trait DshotPioTrait&LTconst N: usize> {
    fn command(&mut self, command: [u16;N]);
    fn reverse(&mut self, reverse: [bool;N]);
    fn throttle_clamp(&mut self, throttle: [u16;N]);
    fn throttle_minimum(&mut self);
}

// å„ç§Shotç±»å‹
pub enum ShotType{
    DSHOT150, 
    DSHOT300,
    DSHOT600,
    DSHOT1200,
    OneSHOT42,
    OneShot125,
    MultiShot
}

// è®¡ç®—åˆ†é¢‘æ•°
pub fn cal_clock_div(sys_clk_hz: u32, shot_type: ShotType) -> (u16, u8) {
    let bit_rate = match shot_type {
        ShotType::DSHOT150 => 150_000,
        ShotType::DSHOT300 => 300_000,
        ShotType::DSHOT600 => 600_000,
        ShotType::DSHOT1200 => 1_200_000,
        // é»˜è®¤DShot600ï¼Œæˆ–æ ¹æ®éœ€è¦panic
        _ => 600_000, 
    };

    let denominator = 8u64 * bit_rate as u64;
    let sys_clk = sys_clk_hz as u64;
    
    let divider = (sys_clk / denominator) as u16;
    let remainder = sys_clk % denominator;
    // (remainder * 256)/denominator
    let fraction = ((remainder << 8) / denominator) as u8; 

    (divider, fraction)
}
use dshot_encoder as dshot;
pub use super::DshotPioTrait;

pub use embassy_rp::{
    pio::{ Instance, Pio, Config, PioPin, ShiftConfig, ShiftDirection::Left, InterruptHandler},
    Peripheral, interrupt::typelevel::Binding
};
#[allow(dead_code)]
pub struct DshotPio<'a, const N : usize, PIO : Instance> {
    pio_instance: Pio<'a,PIO>,
}


fn configure_pio_instance<'a,PIO: Instance>  (
    pio: impl Peripheral&LTP = PIO> + 'a,
    irq: impl Binding&LTPIO::Interrupt, InterruptHandler&LTPIO>>,
    clk_div: (u16, u8),
) -> (Config<'a, PIO>, Pio<'a, PIO>) {
    
    // Define program
    let dshot_pio_program = pio_proc::pio_asm!(
        "set pindirs, 1",
        "entry:"
        "   pull"
        "   out null 16"
        "   set x 15"
        "loop:"
        "   set pins 1"
        "   out y 1"
        "   jmp !y zero"
        "   nop [2]"
        "one:" // 6 and 2
        "   set pins 0"
        "   jmp x-- loop"
        "   jmp reset"
        "zero:" // 3 and 5
        "   set pins 0 [3]"
        "   jmp x-- loop"
        "   jmp reset"
        "reset:" // Blank frame
        "   nop [31]"
        "   nop [31]"
        "   nop [31]"
        "   jmp entry [31]"
    );

    // Configure program
    let mut cfg = Config::default();
    let mut pio = Pio::new(pio,irq);
    cfg.use_program(&pio.common.load_program(&dshot_pio_program.program), &[]);
    cfg.clock_divider = clk_div.0.into();

    cfg.shift_in = ShiftConfig {
        auto_fill: true,
        direction: Default::default(),
        threshold: 32,
    };

    cfg.shift_out = ShiftConfig {
        auto_fill: Default::default(),
        direction: Left,
        threshold: Default::default(),
    };

    (cfg,pio)

}

///
/// Defining constructor functions
/// 

impl <'a,PIO: Instance> DshotPio<'a,1,PIO> {
    pub fn new(
        pio: impl Peripheral&LTP = PIO> + 'a,
        irq: impl Binding&LTPIO::Interrupt, InterruptHandler&LTPIO>>,
        pin0: impl PioPin,
        clk_div: (u16, u8),
    ) -> DshotPio<'a,1,PIO> {

        let (mut cfg, mut pio) = configure_pio_instance(pio, irq, clk_div);

        // Set pins and enable all state machines
        let pin0 = pio.common.make_pio_pin(pin0);
        cfg.set_set_pins(&[&pin0]);
        pio.sm0.set_config(&cfg);
        pio.sm0.set_enable(true);

        // Return struct of 1 configured DShot state machine
        DshotPio { pio_instance : pio }
    }
}

impl <'a,PIO: Instance> DshotPio<'a,2,PIO> {
    pub fn new(
        pio: impl Peripheral&LTP = PIO> + 'a,
        irq: impl Binding&LTPIO::Interrupt, InterruptHandler&LTPIO>>,
        pin0: impl PioPin,
        pin1: impl PioPin,
        clk_div: (u16, u8),
    ) -> DshotPio<'a,2,PIO> {

        let (mut cfg, mut pio) = configure_pio_instance(pio, irq, clk_div);

        // Set pins and enable all state machines
        let pin0 = pio.common.make_pio_pin(pin0);
        cfg.set_set_pins(&[&pin0]);
        pio.sm0.set_config(&cfg);
        pio.sm0.set_enable(true);

        let pin1 = pio.common.make_pio_pin(pin1);
        cfg.set_set_pins(&[&pin1]);
        pio.sm1.set_config(&cfg);
        pio.sm1.set_enable(true);

        // Return struct of 2 configured DShot state machines
        DshotPio { pio_instance : pio }
    }
}

impl <'a,PIO: Instance> DshotPio<'a,3,PIO> {
    pub fn new(
        pio: impl Peripheral&LTP = PIO> + 'a,
        irq: impl Binding&LTPIO::Interrupt, InterruptHandler&LTPIO>>,
        pin0: impl PioPin,
        pin1: impl PioPin,
        pin2: impl PioPin,
        clk_div: (u16, u8),
    ) -> DshotPio<'a,3,PIO> {

        let (mut cfg, mut pio) = configure_pio_instance(pio, irq, clk_div);

        // Set pins and enable all state machines
        let pin0 = pio.common.make_pio_pin(pin0);
        cfg.set_set_pins(&[&pin0]);
        pio.sm0.set_config(&cfg);
        pio.sm0.set_enable(true);

        let pin1 = pio.common.make_pio_pin(pin1);
        cfg.set_set_pins(&[&pin1]);
        pio.sm1.set_config(&cfg);
        pio.sm1.set_enable(true);

        let pin2 = pio.common.make_pio_pin(pin2);
        cfg.set_set_pins(&[&pin2]);
        pio.sm2.set_config(&cfg);
        pio.sm2.set_enable(true);
        
        // Return struct of 3 configured DShot state machines
        DshotPio { pio_instance : pio }
    }
}

impl <'a,PIO: Instance> DshotPio<'a,4,PIO> {
    pub fn new(
        pio: impl Peripheral&LTP = PIO> + 'a,
        irq: impl Binding&LTPIO::Interrupt, InterruptHandler&LTPIO>>,
        pin0: impl PioPin,
        pin1: impl PioPin,
        pin2: impl PioPin,
        pin3: impl PioPin,
        clk_div: (u16, u8),
    ) -> DshotPio<'a,4,PIO> {

        let (mut cfg, mut pio) = configure_pio_instance(pio, irq, clk_div);

        // Set pins and enable all state machines
        let pin0 = pio.common.make_pio_pin(pin0);
        cfg.set_set_pins(&[&pin0]);
        pio.sm0.set_config(&cfg);
        pio.sm0.set_enable(true);

        let pin1 = pio.common.make_pio_pin(pin1);
        cfg.set_set_pins(&[&pin1]);
        pio.sm1.set_config(&cfg);
        pio.sm1.set_enable(true);

        let pin2 = pio.common.make_pio_pin(pin2);
        cfg.set_set_pins(&[&pin2]);
        pio.sm2.set_config(&cfg);
        pio.sm2.set_enable(true);

        let pin3 = pio.common.make_pio_pin(pin3);
        cfg.set_set_pins(&[&pin3]);
        pio.sm3.set_config(&cfg);
        pio.sm3.set_enable(true);

        // Return struct of 4 configured DShot state machines
        DshotPio { pio_instance : pio }
    }
}

///
/// Implementing DshotPioTrait
/// 

impl <'d,PIO : Instance> super::DshotPioTrait&LT1> for DshotPio<'d,1,PIO> {
    
    /// Send any valid DShot value to the ESC.
    fn command(&mut self, command: [u16; 1]) {
        self.pio_instance.sm0.tx().push(command[0].min(dshot::THROTTLE_MAX) as u32);
    }
    
    /// Set the direction of rotation for each motor
    fn reverse(&mut self, reverse: [bool;1]) {
        self.pio_instance.sm0.tx().push(dshot::reverse(reverse[0]) as u32);
    }

    /// Set the throttle for each motor. All values are clamped between 48 and 2047
    fn throttle_clamp(&mut self, throttle: [u16;1]) {
        self.pio_instance.sm0.tx().push(dshot::throttle_clamp(throttle[0], false) as u32);
    }

    /// Set the throttle for each motor to zero (DShot command 48)
    fn throttle_minimum(&mut self) {
        self.pio_instance.sm0.tx().push(dshot::throttle_minimum(false) as u32);
    }
}

impl <'d,PIO : Instance> super::DshotPioTrait&LT2> for DshotPio<'d,2,PIO> {
    
    /// Send any valid DShot value to the ESC.
    fn command(&mut self, command: [u16; 2]) {
        self.pio_instance.sm0.tx().push(command[0].min(dshot::THROTTLE_MAX) as u32);
        self.pio_instance.sm0.tx().push(command[1].min(dshot::THROTTLE_MAX) as u32);
    }
    
    /// Set the direction of rotation for each motor
    fn reverse(&mut self, reverse: [bool;2]) {
        self.pio_instance.sm0.tx().push(dshot::reverse(reverse[0]) as u32);
        self.pio_instance.sm1.tx().push(dshot::reverse(reverse[1]) as u32);
    }

    /// Set the throttle for each motor. All values are clamped between 48 and 2047
    fn throttle_clamp(&mut self, throttle: [u16;2]) {
        self.pio_instance.sm0.tx().push(dshot::throttle_clamp(throttle[0], false) as u32);
        self.pio_instance.sm1.tx().push(dshot::throttle_clamp(throttle[1], false) as u32);
    }

    /// Set the throttle for each motor to zero (DShot command 48)
    fn throttle_minimum(&mut self) {
        self.pio_instance.sm0.tx().push(dshot::throttle_minimum(false) as u32);
        self.pio_instance.sm1.tx().push(dshot::throttle_minimum(false) as u32);
    }
}

impl <'d,PIO : Instance> super::DshotPioTrait&LT3> for DshotPio<'d,3,PIO> {
    
    /// Send any valid DShot value to the ESC.
    fn command(&mut self, command: [u16; 3]) {
        self.pio_instance.sm0.tx().push(command[0].min(dshot::THROTTLE_MAX) as u32);
        self.pio_instance.sm0.tx().push(command[1].min(dshot::THROTTLE_MAX) as u32);
        self.pio_instance.sm0.tx().push(command[2].min(dshot::THROTTLE_MAX) as u32);
    }
    
    /// Set the direction of rotation for each motor
    fn reverse(&mut self, reverse: [bool;3]) {
        self.pio_instance.sm0.tx().push(dshot::reverse(reverse[0]) as u32);
        self.pio_instance.sm1.tx().push(dshot::reverse(reverse[1]) as u32);
        self.pio_instance.sm2.tx().push(dshot::reverse(reverse[2]) as u32);
    }

    /// Set the throttle for each motor. All values are clamped between 48 and 2047
    fn throttle_clamp(&mut self, throttle: [u16;3]) {
        self.pio_instance.sm0.tx().push(dshot::throttle_clamp(throttle[0], false) as u32);
        self.pio_instance.sm1.tx().push(dshot::throttle_clamp(throttle[1], false) as u32);
        self.pio_instance.sm2.tx().push(dshot::throttle_clamp(throttle[2], false) as u32);
    }

    /// Set the throttle for each motor to zero (DShot command 48)
    fn throttle_minimum(&mut self) {
        self.pio_instance.sm0.tx().push(dshot::throttle_minimum(false) as u32);
        self.pio_instance.sm1.tx().push(dshot::throttle_minimum(false) as u32);
        self.pio_instance.sm2.tx().push(dshot::throttle_minimum(false) as u32);
    }
}

impl <'d,PIO : Instance> super::DshotPioTrait&LT4 > for DshotPio<'d,4,PIO> {
    
    /// Send any valid DShot value to the ESC.
    fn command(&mut self, command: [u16; 4]) {
        self.pio_instance.sm0.tx().push(command[0].min(dshot::THROTTLE_MAX) as u32);
        self.pio_instance.sm0.tx().push(command[1].min(dshot::THROTTLE_MAX) as u32);
        self.pio_instance.sm0.tx().push(command[2].min(dshot::THROTTLE_MAX) as u32);
        self.pio_instance.sm0.tx().push(command[3].min(dshot::THROTTLE_MAX) as u32);
    }
    
    /// Set the direction of rotation for each motor
    fn reverse(&mut self, reverse: [bool;4]) {
        self.pio_instance.sm0.tx().push(dshot::reverse(reverse[0]) as u32);
        self.pio_instance.sm1.tx().push(dshot::reverse(reverse[1]) as u32);
        self.pio_instance.sm2.tx().push(dshot::reverse(reverse[2]) as u32);
        self.pio_instance.sm3.tx().push(dshot::reverse(reverse[3]) as u32);
    }

    /// Set the throttle for each motor. All values are clamped between 48 and 2047
    fn throttle_clamp(&mut self, throttle: [u16;4]) {
        self.pio_instance.sm0.tx().push(dshot::throttle_clamp(throttle[0], false) as u32);
        self.pio_instance.sm1.tx().push(dshot::throttle_clamp(throttle[1], false) as u32);
        self.pio_instance.sm2.tx().push(dshot::throttle_clamp(throttle[2], false) as u32);
        self.pio_instance.sm3.tx().push(dshot::throttle_clamp(throttle[3], false) as u32);
    }

    /// Set the throttle for each motor to zero (DShot command 48)
    fn throttle_minimum(&mut self) {
        self.pio_instance.sm0.tx().push(dshot::throttle_minimum(false) as u32);
        self.pio_instance.sm1.tx().push(dshot::throttle_minimum(false) as u32);
        self.pio_instance.sm2.tx().push(dshot::throttle_minimum(false) as u32);
        self.pio_instance.sm3.tx().push(dshot::throttle_minimum(false) as u32);
    }
}
</code></pre><p><strong>motors.rs</strong><pre class=language-rs data-lang=rs><code class=language-rs data-lang=rs>#![allow(unused)]

//! ç”µæœºæ§åˆ¶ä»»åŠ¡
// rp2040-picoé»˜è®¤æ—¶é’Ÿé¢‘ç‡: 120MHz
// å°èœœèœ‚ç”µè°ƒ,BLHeli-Så›ºä»¶, DShot600æ§åˆ¶

// å¤šä»»åŠ¡ç›¸å…³
use embassy_time::{Duration, Timer};
use embassy_executor::Spawner;
use embassy_futures::join::join;
use embassy_rp::bind_interrupts;

// ç”µè°ƒé©±åŠ¨
use crate::{drivers::esc::little_bee, utils::signals::MOTOR_STATE};

// dshotç›¸å…³
use dshot_pio::{ cal_clock_div, dshot_embassy_rp::DshotPio, ShotType, DshotPioTrait };

// é™æ€å˜é‡äº’æ–¥è®¿é—®ç›¸å…³
use embassy_sync::blocking_mutex::{Mutex, CriticalSectionMutex, raw::CriticalSectionRawMutex};
// use core::sync::atomic::{AtomicU16, Ordering};
use static_cell::StaticCell;
use core::{
    //å†…éƒ¨å¯å˜æ€§ç±»å‹RefCell
    cell::RefCell, 
    fmt::Write, 
    //å¼•ç”¨å€Ÿç”¨
    borrow::BorrowMut,
    borrow::Borrow,
};

// å†…éƒ¨åº“
/// ä¿¡å·
use crate::utils::signals;
/// å…¨å±€å˜é‡
use crate::utils::variables;

// ç”µæœºåºå·
#[derive(Clone,Copy,PartialEq)]
pub enum Motors {
    One,
    Two,
    Three,
    Four
}

// ç”µæœºçŠ¶æ€
#[derive(Clone,Copy,PartialEq)]
pub enum MotorState {
    READY,
    DISARMED,
    KEEP,
    RUNNING,
    MANUAL,
}

// 1. è§£é”ç”µè°ƒå·¥å…·å‡½æ•°
pub async fn arming_esc(
    motor: Motors, 
    out_pio_motors : &mut DshotPio<'static, 4, embassy_rp::peripherals::PIO0>
    ){
    defmt::println!("hello from arming_esc");
    for _i in 0..50 {
        out_pio_motors.throttle_minimum();
        Timer::after(Duration::from_millis(50)).await;
    }
}

// 2. ç”µæœºè½¬é€Ÿæ§åˆ¶ä»»åŠ¡(async)
// motoråºå·(e.g. Motors::One), 0~100è½¬é€Ÿ(u16)
#[embassy_executor::task]
pub async fn motor_task(
    mut in_motor_speed : signals::MotorSpeedSub,
    mut in_motor_direction : signals::MotorDirSub,
    mut out_pio_motors : DshotPio<'static, 4, embassy_rp::peripherals::PIO0>,
    out_motor_state : signals::MotorStatePub,
){
    defmt::println!("hello from motor_task");
    
    // åˆå§‹åŒ–ç”µæœº
    init_motors(&mut out_pio_motors).await;
    out_motor_state.publish_immediate(MotorState::READY);
    
    defmt::println!("done: motor init");
    
    loop{
        // 1. æ ¹æ®è½¬é€Ÿä¿¡å·è°ƒæ•´ç”µæœº
        /// è·å–ç”µæœºè½¬é€Ÿ
        if let Some(motor_speed) = in_motor_speed.try_next_message_pure(){
            let (m1, m2, m3, m4) = motor_speed;
            
            /// æ›´æ–°å…¨å±€å˜é‡
            crate::utils::variables::MotorSpeedEditor::write_speeds(
                [m1.unwrap_or(0),m2.unwrap_or(0),m3.unwrap_or(0),m4.unwrap_or(0)]
            ).await;
            
            /// å‘é€åˆ°ç”µè°ƒ
            out_pio_motors.throttle_clamp([
                m1.unwrap_or(0),
                m2.unwrap_or(0),
                m3.unwrap_or(0),
                m4.unwrap_or(0)
            ]);
        }
        
        // 2. æ ¹æ®æ–¹å‘ç»™ç”µæœºæ¢å‘
        /// è·å–ç”µæœºæ—‹è½¬æ–¹å‘è®¾ç½®
        // let mut motor_dir = in_motor_direction.next_message_pure().await;
        if let Some(motor_dir) = in_motor_direction.try_next_message_pure(){
            let (m1_, m2_, m3_, m4_) = motor_dir;
            /// æ›´æ–°å…¨å±€å˜é‡
            crate::utils::variables::MotorDirectionEditor::write_directions(
                [m1_.unwrap_or(true),m2_.unwrap_or(true),m3_.unwrap_or(true),m4_.unwrap_or(true)]
            ).await;
            
            /// å‘é€åˆ°ç”µè°ƒ
            out_pio_motors.reverse([
                m1_.unwrap_or(true),
                m2_.unwrap_or(true),
                m3_.unwrap_or(true),
                m4_.unwrap_or(true)
            ]);
        }else{
            // ç•™å‡ºæ—¶é—´ç»™å…¶ä»–ä»»åŠ¡æ‰§è¡Œ, ä¸èƒ½ä¸€ç›´å ç”¨cpu
            Timer::after(Duration::from_millis(50)).await;
        }

    }
}

// 3. ç”µè°ƒåˆå§‹åŒ–
// p_pio, (p_motor1_gpio, p_motor2_gpio, p_motor3_gpio, p_motor4_gpio)
pub async fn init_motors(out_pio_motors :&mut DshotPio<'static, 4, embassy_rp::peripherals::PIO0>)
{
    defmt::println!("hello from init_motors");
    // 3.1 ç»‘å®šgpioå’Œdshotä¿¡å·
    let _ = little_bee::init().await;
        
    // 3.2 å‘é€å°æ²¹é—¨ä¿¡å·è§£é”ç”µè°ƒ, è®©ç”µæœºå¯ä»¥æ—‹è½¬
    arming_esc(Motors::One, out_pio_motors).await;
    arming_esc(Motors::Two, out_pio_motors).await;
    arming_esc(Motors::Three, out_pio_motors).await;
    arming_esc(Motors::Four, out_pio_motors).await;
}

// 4. æµ‹è¯•åˆ†åˆ«æ—‹è½¬å››ä¸ªç”µæœº, ç„¶åè®©ç”µæœºä¿æŒç¼“æ…¢æ—‹è½¬
#[embassy_executor::task]
pub async fn motor_test_task(
    mut in_motor_state : signals::MotorStateSub,
){
    // ç­‰å¾…ç”µæœºåˆå§‹åŒ–å®Œæˆ
    let state = in_motor_state.next_message_pure().await;
    if state == MotorState::READY {
        defmt::println!("hello from motor_test");
        
        // 1. ä¾æ¬¡æ—‹è½¬å››ä¸ªç”µæœº
        signals::MOTOR_SPEED.publisher().unwrap().publish_immediate((Some(30), Some(0), Some(0), Some(0)));
        Timer::after(Duration::from_millis(2000)).await;
        signals::MOTOR_SPEED.publisher().unwrap().publish_immediate((Some(0), Some(30), Some(0), Some(0)));
        Timer::after(Duration::from_millis(2000)).await;
        signals::MOTOR_SPEED.publisher().unwrap().publish_immediate((Some(0), Some(0), Some(30), Some(0)));
        Timer::after(Duration::from_millis(2000)).await;
        signals::MOTOR_SPEED.publisher().unwrap().publish_immediate((Some(0), Some(0), Some(0), Some(30)));
        Timer::after(Duration::from_millis(2000)).await;
        
        defmt::println!("done: motor_test");
        
        // 2. ä¿æŒæ…¢é€Ÿæ—‹è½¬, éœ€è¦ä¸€ç›´å‘å¸ƒä¿¡å·
        loop{
            if let Some(state2) = in_motor_state.try_next_message_pure(){
                if state2 == MotorState::READY {
                    signals::MOTOR_SPEED.publisher().unwrap().publish_immediate((Some(10), Some(10), Some(10), Some(10)));
                    // ç•™å‡ºæ—¶é—´ç»™å…¶ä»–ä»»åŠ¡æ‰§è¡Œ, ä¸èƒ½ä¸€ç›´å ç”¨cpu
                    Timer::after(Duration::from_millis(500)).await;
                }else{
                    defmt::println!("done: motor_ready");
                    // é€€å‡ºloopå¾ªç¯
                    break;
                }// end else
            }// end if let Some
            else{
                signals::MOTOR_SPEED.publisher().unwrap().publish_immediate((Some(10), Some(10), Some(10), Some(10)));
                // ç•™å‡ºæ—¶é—´ç»™å…¶ä»–ä»»åŠ¡æ‰§è¡Œ, ä¸èƒ½ä¸€ç›´å ç”¨cpu
                Timer::after(Duration::from_millis(500)).await;
            }// end else
            
        }// end loop
        
    }
}
</code></pre><p><strong>motor.rs</strong><pre class=language-rs data-lang=rs><code class=language-rs data-lang=rs>// å‘½ä»¤è§£æç›¸å…³
use embedded_cli::Command;
use embedded_io::ErrorKind;
use embedded_io_async::{Read, Write};
use ufmt::uwrite;
use heapless::String;
use core::str::FromStr;
use crate::shell::{UBuffer, INTERRUPT};

// å¼‚æ­¥ç›¸å…³
use embassy_time::{Duration, Ticker};
use embassy_futures::select::{select, Either};

// å†…éƒ¨åº“
/// ä¿¡å·
use crate::utils::signals;
/// å…¨å±€å˜é‡
use crate::utils::variables;

#[derive(Command, Clone)]
pub enum MotorCommand {
    /// set speed and direction
    Set {
        #[command(subcommand)]
        cmd: MotorSetEnum,
    },
    /// get speed and direction
    Get,
}

// å®ç°CommandHandlerç‰¹å¾
impl super::CommandHandler for MotorCommand {
    async fn handler(
        &self,
        mut serial: impl Read&LTError = ErrorKind> + Write&LTError = ErrorKind>,
    ) -> Result<(), ErrorKind> {
        match self {
            // å…·ä½“è§£æå‘½ä»¤
            MotorCommand::Set { cmd } => {
                cmd.handler(&mut serial).await?
            },
            MotorCommand::Get => {
                let speeds = crate::utils::variables::MotorSpeedEditor::get_speeds().await;
                let directions = crate::utils::variables::MotorDirectionEditor::get_directions().await;
                // ä½¿ç”¨UBufferç»“æ„ä½“
                let mut buf = UBuffer::&LT32>::new();
                
                // éå†æ•°ç»„å…ƒç´ é€ä¸ªå†™å…¥
                for (i, speed) in speeds.as_ref().iter().enumerate() {
                    if i > 0 {
                        // æ·»åŠ åˆ†éš”ç¬¦
                        uwrite!(&mut buf, " ")?; 
                    }
                    uwrite!(&mut buf, "{}", speed)?;
                }
                
                // åŠ ä¸€ä¸ªç©ºæ ¼
                uwrite!(&mut buf, " ")?;
                
                // è°ƒè¯•ä¿¡æ¯æ‰“å°
                defmt::println!("motor speed: {}", core::str::from_utf8(&buf.inner).unwrap());
                // å†™å…¥åˆ°è¾“å‡ºæ¥å£
                serial.write_all(&buf.inner).await?;
                
                // ä½¿ç”¨UBufferç»“æ„ä½“
                let mut buf2 = UBuffer::&LT32>::new();
                
                // éå†æ•°ç»„å…ƒç´ é€ä¸ªå†™å…¥
                for (i, direction) in directions.as_ref().iter().enumerate() {
                    if i > 0 {
                        // æ·»åŠ åˆ†éš”ç¬¦
                        uwrite!(&mut buf2, " ")?; 
                    }
                    uwrite!(&mut buf2, "{}", direction)?;
                }
                
                // è°ƒè¯•ä¿¡æ¯æ‰“å°
                defmt::println!("motor directions: {}", core::str::from_utf8(&buf2.inner).unwrap());
                // å†™å…¥åˆ°è¾“å‡ºæ¥å£
                serial.write_all(&buf2.inner).await?;
            }
        }
        Ok(())
    }
}

#[derive(Command, Clone)]
pub enum MotorSetEnum{
    // è®¾ç½®é€Ÿåº¦, `motor set speed 1 100`
    /// set speed
    Speed{
        motor: usize,
        speed: u16,
    },
    // è®¾ç½®æ–¹å‘, `motor set dir 1 false`
    /// set direction
    Dir{
        motor: usize,
        direction: bool,
    }
}

// å®ç°CommandHandlerç‰¹å¾
impl super::CommandHandler for MotorSetEnum {
    async fn handler(
        &self,
        mut serial: impl Read&LTError = ErrorKind> + Write&LTError = ErrorKind>,
    ) -> Result<(), ErrorKind> {
        match self {
            MotorSetEnum::Speed{motor, speed}=>{
                // è½¬æ¢ç”µæœºæ¨¡å¼åˆ°MANUAL
                signals::MOTOR_STATE.publisher().unwrap().publish_immediate(crate::tasks::motors::MotorState::MANUAL);
                
                // TODO æ£€æŸ¥æ•°å€¼åˆæ³•æ€§
                
                // è·å–å…¨å±€å˜é‡çš„ç”µæœºè½¬é€Ÿ
                let mut speeds = crate::utils::variables::MotorSpeedEditor::get_speeds().await;
                speeds[motor-1] = *speed;
                
                // å‘å¸ƒç”µæœºè½¬é€Ÿè®¾ç½®
                signals::MOTOR_SPEED.publisher().unwrap().publish_immediate(
                    (Some(speeds[0]),Some(speeds[1]),Some(speeds[2]),Some(speeds[3]))
                );
                
                defmt::println!("speeds will be set to :{}", speeds);
                
                serial.write_all(b"ok").await?;
            },
            MotorSetEnum::Dir{motor, direction}=>{
                
                // TODO æ£€æŸ¥æ•°å€¼åˆæ³•æ€§
                
                // è·å–å…¨å±€å˜é‡çš„ç”µæœºæ–¹å‘
                let mut directions = crate::utils::variables::MotorDirectionEditor::get_directions().await;
                directions[motor-1] = *direction;
                
                // å‘å¸ƒç”µæœºæ–¹å‘è®¾ç½®
                signals::MOTOR_DIR.publisher().unwrap().publish_immediate(
                    (Some(directions[0]),Some(directions[1]),Some(directions[2]),Some(directions[3]))
                );
                
                defmt::println!("direction will be set to :{}", directions);
                
                serial.write_all(b"ok").await?;
            }
        }
        Ok(())
    }
}
</code></pre><p><strong>signals.rs</strong><pre class=language-rs data-lang=rs><code class=language-rs data-lang=rs>// 2. motorsä»»åŠ¡çš„ä¿¡é“
/// ç”µæœºè½¬é€Ÿ
const MOTOR_SPEED_NUM: usize = 2;
/// å¯å¯¹ç”µæœºè¿›è¡Œå•ç‹¬è®¾ç½®è€Œä¸å½±å“å…¶ä»–ç”µæœº
pub type MotorSpeedType = (Option&LTu16>, Option&LTu16>, Option&LTu16>, Option&LTu16>);
pub type MotorSpeedPub = Pub&LTMotorSpeedType,MOTOR_SPEED_NUM>;
pub type MotorSpeedSub = Sub&LTMotorSpeedType,MOTOR_SPEED_NUM>;
pub static MOTOR_SPEED : Ch&LTMotorSpeedType,MOTOR_SPEED_NUM> = PubSubChannel::new();

/// ç”µæœºæ–¹å‘
const MOTOR_DIR_NUM: usize = 2;
/// å¯å¯¹ç”µæœºè¿›è¡Œå•ç‹¬è®¾ç½®è€Œä¸å½±å“å…¶ä»–ç”µæœº
pub type MotorDirType = (Option&LTbool>, Option&LTbool>, Option&LTbool>, Option&LTbool>);
pub type MotorDirPub = Pub&LTMotorDirType,MOTOR_DIR_NUM>;
pub type MotorDirSub = Sub&LTMotorDirType,MOTOR_DIR_NUM>;
pub static MOTOR_DIR : Ch&LTMotorDirType,MOTOR_DIR_NUM> = PubSubChannel::new();

/// ç”µæœºçŠ¶æ€
const MOTOR_STATE_NUM: usize = 2;
pub type MotorStateType = crate::tasks::motors::MotorState;
pub type MotorStatePub = Pub&LTMotorStateType,MOTOR_STATE_NUM>;
pub type MotorStateSub = Sub&LTMotorStateType,MOTOR_STATE_NUM>;
pub static MOTOR_STATE : Ch&LTMotorStateType,MOTOR_STATE_NUM> = PubSubChannel::new();
</code></pre><p><strong>variables.rs</strong><pre class=language-rs data-lang=rs><code class=language-rs data-lang=rs>#![allow(dead_code)]

//! å…¨å±€å˜é‡

// ç”¨é™æ€å˜é‡äº’æ–¥è®¿é—®æ¥å¯¹å†²rustçš„ç”Ÿå‘½å‘¨æœŸã€å€Ÿç”¨éš¾, 
// æ‰€æœ‰çš„æ“ä½œæ¥å£éƒ½æ˜¯ï¼š&'static selfã€‚

// é™æ€å˜é‡äº’æ–¥è®¿é—®ç›¸å…³
use embassy_sync::blocking_mutex::{
    CriticalSectionMutex, 
    raw::{
        CriticalSectionRawMutex, ThreadModeRawMutex
    },
};
use embassy_sync::mutex::Mutex;
// use core::sync::atomic::{AtomicU16, Ordering};
use static_cell::{StaticCell, ConstStaticCell};
use core::{
    //å†…éƒ¨å¯å˜æ€§ç±»å‹RefCell
    cell::RefCell, 
    fmt::Write, 
    //å¼•ç”¨å€Ÿç”¨
    borrow::BorrowMut,
    borrow::Borrow,
};

/// åˆå§‹åŒ–å…¨å±€å˜é‡
pub fn init_variables(){
    // unimplemented!()
}

/* start ç”µæœºé€Ÿåº¦ */
/// å…¨å±€ç”µæœºé€Ÿåº¦ï¼Œä½¿ç”¨å¼‚æ­¥Mutexä¿æŠ¤
static MOTOR_SPEEDS: Mutex&LTThreadModeRawMutex, [u16; 4]> = Mutex::new([0u16; 4]);

/// ç”µæœºé€Ÿåº¦æ“ä½œæ¥å£
pub struct MotorSpeedEditor;

impl MotorSpeedEditor {
    /// å¼‚æ­¥è·å–ç”µæœºé€Ÿåº¦ï¼ˆæ‹·è´å€¼è¿”å›ï¼‰
    pub async fn get_speeds() -> [u16; 4] {
        let guard = MOTOR_SPEEDS.lock().await;
        *guard
    }

    /// å¼‚æ­¥æ›´æ–°å…¨éƒ¨ç”µæœºé€Ÿåº¦
    pub async fn write_speeds(speeds: [u16; 4]) {
        let mut guard = MOTOR_SPEEDS.lock().await;
        *guard = speeds;
    }

    /// å¼‚æ­¥è®¾ç½®å•ä¸ªç”µæœºé€Ÿåº¦
    pub async fn set_speed(index: usize, value: u16) {
        let mut guard = MOTOR_SPEEDS.lock().await;
        guard[index] = value;
    }
}
/* end ç”µæœºé€Ÿåº¦ */

/* start ç”µæœºæ–¹å‘ */
// 1: å³è½¬, 0: å·¦è½¬
/// å…¨å±€ç”µæœºæ–¹å‘ï¼Œä½¿ç”¨å¼‚æ­¥Mutexä¿æŠ¤
static MOTOR_DIRECTIONS: Mutex&LTThreadModeRawMutex, [bool; 4]> = Mutex::new([true; 4]);

/// ç”µæœºæ–¹å‘æ“ä½œæ¥å£
pub struct MotorDirectionEditor;

impl MotorDirectionEditor {
    /// å¼‚æ­¥è·å–ç”µæœºæ–¹å‘ï¼ˆæ‹·è´å€¼è¿”å›ï¼‰
    pub async fn get_directions() -> [bool; 4] {
        let guard = MOTOR_DIRECTIONS.lock().await;
        *guard
    }

    /// å¼‚æ­¥æ›´æ–°å…¨éƒ¨ç”µæœºæ–¹å‘
    pub async fn write_directions(directions: [bool; 4]) {
        let mut guard = MOTOR_DIRECTIONS.lock().await;
        *guard = directions;
    }

    /// å¼‚æ­¥è®¾ç½®å•ä¸ªç”µæœºæ–¹å‘
    pub async fn set_direction(index: usize, value: bool) {
        let mut guard = MOTOR_DIRECTIONS.lock().await;
        guard[index] = value;
    }
}
/* end ç”µæœºæ–¹å‘ */
</code></pre></article><div><div class=post-copyright><div class=post-copyright__author_group><a class=post-copyright__author_img href=/about> <picture class="post-copyright__author_img_back progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/avatar.d5facb578cf12fdc.webp><source media="(min-width: 1em)" srcset=/processed_images/avatar.8bb6bf05eac51207.avif><img class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this) src=/processed_images/avatar.06a48b3b45482d6b.webp><noscript><img decoding=async loading=lazy src=/processed_images/avatar.06a48b3b45482d6b.webp></noscript></picture> </a><div class=post-copyright__author_name>ByeIOÂ·å¼€å‘è€…åšå®¢</div><div class=post-copyright__author_desc>ByeIOÂ·å¼€å‘è€…åšå®¢|æŠ€æœ¯è§£å†³æ–¹æ¡ˆ|å¼€å‘æ€è€ƒ|æ€»ç»“</div></div><div class=post-tools id=post-tools><div class=post-tools-left><div class=rewardLeftButton><div class="reward-link mode"><a class=reward-link-button href=/subscribe> <i class=icon-plant-fill></i>è®¢é˜… </a></div></div><div class=shareRight><div class="copyright-link mobile"><div class=copyright-qrcode><div class=copyright-button title=ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« ><i class=icon-qrcode></i></div><div class=copyright-main><div class=copyright-main-all><div id=qrcode></div><div class=reward-dec>ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« </div></div></div></div></div><div class="copyright-link copyurl"><div class=copyright-button id=post-share-url onclick=rm.copyPageUrl() title=å¤åˆ¶é“¾æ¥><i class=icon-link></i></div></div></div></div></div><div class=post-copyright__notice><span class=post-copyright-info> æœ¬æ–‡æ˜¯åŸåˆ›æ–‡ç« ï¼Œé‡‡ç”¨ <a href=/copyright target=_blank>CC BY-NC-ND 4.0</a> åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜ <a href=/ target=_blank>æœ¬ç«™åç§°åŠåœ°å€</a> </span></div></div><div class=post-tools-right><div class=tag_share><div class=post-meta__tag-list><a class=post-meta__tags href=/tags/blog/> <span class=tags-punctuation>åšå®¢</span> <span class=tagsPageCount>31</span> </a><a class=post-meta__tags href=/tags/docs/> <span class=tags-punctuation>æ–‡æ¡£</span> <span class=tagsPageCount>25</span> </a><a class=post-meta__tags href=/tags/featured/> <span class=tags-punctuation>å¿…çœ‹</span> <span class=tagsPageCount>30</span> </a><a class=post-meta__tags href=/tags/hot/> <span class=tags-punctuation>çƒ­é—¨</span> <span class=tagsPageCount>30</span> </a></div></div></div><link href=/css/post-copyright-one.css rel=stylesheet></div><nav class="pagination-post needEndHide" id=pagination><div class="prev-post pull-left"><a href=/articles/docs/rp2040ç¬”è®°[1]-ä½¿ç”¨embassyå®ç°å‘¼å¸ç¯å¹¶é€šè¿‡å‘½ä»¤è¡Œåˆ‡æ¢çŠ¶æ€/> <div class=pagination-info><div class=label>ä¸Šä¸€ç¯‡</div><div class=prev_info>rp2040ç¬”è®°[1]-ä½¿ç”¨embassyå®ç°å‘¼å¸ç¯å¹¶é€šè¿‡å‘½ä»¤è¡Œåˆ‡æ¢çŠ¶æ€</div></div> </a></div><div class="next-post pull-right"><a href=/articles/docs/å…¬ä¼—å·[2]-githubé¡¹ç›®åˆ†äº«-slambook2.rsé¡¹ç›®/> <div class=pagination-info><div class=label>ä¸‹ä¸€ç¯‡</div><div class=next_info>å…¬ä¼—å·[2]-githubé¡¹ç›®åˆ†äº«-slambook2.rsé¡¹ç›®</div></div> </a></div></nav><div class=relatedPosts><div class=headline><i class=icon-cainixihuan style=font-size:1.1rem></i><span>å–œæ¬¢è¿™ç¯‡æ–‡ç« çš„äººä¹Ÿçœ‹äº†</span></div><div class=relatedPosts-list><div><a href=/articles/docs/ROSç¬”è®°[1]-æ­å»ºGazeboä»¿çœŸç¯å¢ƒ/ title=ROSç¬”è®°[1]-æ­å»ºGazeboä»¿çœŸç¯å¢ƒ> <picture class="cover progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/img00006.8f57f1d144c2cfd7.webp><source media="(min-width: 75em)" srcset="/processed_images/img00006.688adcb5ebd82ad6.avif?w=75em"><source media="(min-width: 60em)" srcset="/processed_images/img00006.8e3bcf4e0c9fd77c.avif?w=60em"><source media="(min-width: 45em)" srcset="/processed_images/img00006.08513801052a4920.avif?w=45em"><source media="(min-width: 30em)" srcset="/processed_images/img00006.0928215d8428e769.avif?w=30em"><source media="(min-width: 22em)" srcset="/processed_images/img00006.c83fffe523ead88b.avif?w=22em"><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" srcset="/processed_images/img00006.0beae348737c79a0.webp?w=22em 360w,
              /processed_images/img00006.1e5d356251b272fe.webp?w=30em 500w,
              /processed_images/img00006.c010a791dd57f875.webp?w=45em 720w,
              /processed_images/img00006.86f2248bcd34f02f.webp?w=60em 960w,
              /processed_images/img00006.799278f602588342.webp?w=75em 1200w" class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this)><noscript><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" decoding=async loading=lazy></noscript></picture> <div class="content is-center"><div class=date><i class="far fa-calendar-alt fa-fw"></i> 2025-01-01</div><div class=title>ROSç¬”è®°[1]-æ­å»ºGazeboä»¿çœŸç¯å¢ƒ</div></div> </a></div><div><a href=/articles/docs/ROSç¬”è®°[2]-è·å–OpenMVæ•°æ®å¹¶å‘å¸ƒåˆ°ROSæ¶ˆæ¯/ title=ROSç¬”è®°[2]-è·å–OpenMVæ•°æ®å¹¶å‘å¸ƒåˆ°ROSæ¶ˆæ¯> <picture class="cover progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/img00006.8f57f1d144c2cfd7.webp><source media="(min-width: 75em)" srcset="/processed_images/img00006.688adcb5ebd82ad6.avif?w=75em"><source media="(min-width: 60em)" srcset="/processed_images/img00006.8e3bcf4e0c9fd77c.avif?w=60em"><source media="(min-width: 45em)" srcset="/processed_images/img00006.08513801052a4920.avif?w=45em"><source media="(min-width: 30em)" srcset="/processed_images/img00006.0928215d8428e769.avif?w=30em"><source media="(min-width: 22em)" srcset="/processed_images/img00006.c83fffe523ead88b.avif?w=22em"><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" srcset="/processed_images/img00006.0beae348737c79a0.webp?w=22em 360w,
              /processed_images/img00006.1e5d356251b272fe.webp?w=30em 500w,
              /processed_images/img00006.c010a791dd57f875.webp?w=45em 720w,
              /processed_images/img00006.86f2248bcd34f02f.webp?w=60em 960w,
              /processed_images/img00006.799278f602588342.webp?w=75em 1200w" class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this)><noscript><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" decoding=async loading=lazy></noscript></picture> <div class="content is-center"><div class=date><i class="far fa-calendar-alt fa-fw"></i> 2025-01-01</div><div class=title>ROSç¬”è®°[2]-è·å–OpenMVæ•°æ®å¹¶å‘å¸ƒåˆ°ROSæ¶ˆæ¯</div></div> </a></div></div></div><link href=/css/related-posts-two.css rel=stylesheet><hr></div><div class=aside-content id=aside-content><div class="card-widget card-info"><div class=card-content><div class="card-info-avatar is-center"><div class=author-info__top-group><div class=author-info__sayhi id=author-info__sayhi onclick=wjx.changeSayHelloText()>å¥½ä¹…ä¸è§ï¼Œä½ ç»ˆäºæ¥äº†</div></div></div><div class=avatar-img-group><picture class="avatar-img progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/avatar.d5facb578cf12fdc.webp><source media="(min-width: 1em)" srcset=/processed_images/avatar.8bb6bf05eac51207.avif><img class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this) src=/processed_images/avatar.06a48b3b45482d6b.webp><noscript><img decoding=async loading=lazy src=/processed_images/avatar.06a48b3b45482d6b.webp></noscript></picture></div><div class=author-info__description_group>ä¸ºåˆ›é€ è€…è€Œç”Ÿçš„å¼€æº Zola ä¸»é¢˜~</div><div class=author-info__bottom-group><a class=author-info__bottom-group-left href=/about> <div class=author-info__name>qsbye</div> <div class=author-info__desc>ByeIOÂ·å¼€å‘è€…åšå®¢|æŠ€æœ¯è§£å†³æ–¹æ¡ˆ|å¼€å‘æ€è€ƒ|æ€»ç»“</div> </a><div class="card-info-social-icons is-center"><a rel="external nofollow" class=social-icon href=https://github.com/iWangJiaxiang/zola-theme-jiaxiang.wang target=_blank title=GitHub> <i class=icon-github></i> </a></div></div></div><style>.avatar-img-group:before{content:"";-o-transition:1s;background:var(--wjx-green);border:5px solid var(--wjx-background);z-index:2;border-radius:50%;width:26px;height:26px;-webkit-transition:all 1s;-moz-transition:all 1s;-ms-transition:all 1s;transition:all 1s;position:absolute;bottom:2px;right:2px}.card-info-avatar.is-center{flex-direction:column;align-items:flex-start;display:flex}#aside-content .card-info .avatar-img{opacity:1;border:5px solid var(--wjx-white);border-radius:500px;width:118px;transition:all .3s;position:absolute;top:0;right:0;overflow:hidden}.page #aside-content .card-info .avatar-img{border-color:var(--wjx-card-bg)}.author-info__top-group{width:100%;height:28px;display:flex}.avatar-img-group{transform-origin:bottom;border-radius:500px;width:118px;height:118px;transition:all .3s cubic-bezier(.69,.39,0,1.21);position:absolute;top:90px;right:calc(50% - 59px)}#aside-content .card-info:hover .avatar-img-group{opacity:0;transform:scale(0)}.author-info__bottom-group{justify-content:space-between;align-items:center;width:100%;padding:1.2rem;display:flex;position:absolute;bottom:0;left:0}a.author-info__bottom-group-left:hover{opacity:.8}#aside-content .card-info .card-info-social-icons{cursor:pointer;flex-flow:wrap;justify-content:flex-start;margin:0;display:flex}#aside-content .card-info .card-info-social-icons i:hover{cursor:pointer;background-color:#000;transform:rotate(540deg)}#aside-content .card-info .card-info-social-icons .social-icon{margin:0 0 0 8px}#aside-content .card-info .card-info-social-icons i{background:var(--wjx-white-op);color:var(--wjx-white);justify-content:center;align-items:center;width:40px;height:40px;font-size:1rem;display:flex}#aside-content .card-info .card-info-social-icons i:hover{background:var(--wjx-white);color:var(--wjx-main);box-shadow:none;transform:scale(1.1)}[data-theme=dark] .page #aside-content .card-info .card-info-social-icons i{background:var(--wjx-black-op);color:var(--wjx-card-bg)}[data-theme=dark] .page #aside-content .card-info .card-info-social-icons i:hover{background:var(--wjx-card-bg);color:var(--wjx-fontcolor)}#aside-content .card-info .banner-button{border-radius:20px;justify-content:center;width:118px;height:40px}@media screen and (width>=1300px){#aside-content .card-info .card-info-social-icons i{color:var(--wjx-white)}[data-theme=dark] .page #aside-content .card-info .card-info-social-icons i{color:var(--wjx-card-bg)}}#aside-content .card-info .card-info-data>.card-info-data-item:hover{background:var(--wjx-post-blockquote-bg);transform:scale(.97)}#aside-content>div.card-widget.card-info>div.card-content>div.card-info-data>.card-info-data-item:hover>a>div.headline,#aside-content>div.card-widget.card-info>div.card-content>div.card-info-data>.card-info-data-item:hover>a>div.length-num{color:var(--wjx-blue)}.author-info__description_group{color:var(--wjx-white);opacity:0;width:100%;padding:1.2rem;transition:all .3s;position:absolute;top:50px;left:0}.card-widget:hover .author-info__description_group{opacity:1}.author-info__description2{text-align:justify;z-index:2;color:#fffc;width:100%;margin:.3rem 0;line-height:1.38}.author-info__description2 b{color:var(--wjx-white)}[data-theme=dark] .page div#author-info__sayhi{background:var(--wjx-black-op);color:var(--wjx-black)}#aside-content .card-info .author-info__name{text-align:left;color:var(--wjx-white);margin-bottom:5px;font-size:20px;font-weight:700;line-height:1}.page #aside-content .card-info .author-info__name,.page .author-info__desc{color:var(--wjx-white)}.author-info__desc{color:var(--wjx-white);opacity:.6;font-size:12px;line-height:1}.author-info__description{text-align:justify;color:var(--wjx-white);opacity:1;margin:.3rem 0;line-height:1.38}.page .author-info__description{color:var(--wjx-card-bg)}.author-info__description b{color:var(--wjx-white);opacity:1}.page .author-info__description b{color:var(--wjx-card-bg);opacity:1}.avatar-sticker{z-index:0;background:var(--wjx-white);border-radius:50%;justify-content:center;align-items:center;width:33px;height:33px;line-height:34px;transition:all .3s ease-out .2s;display:flex;position:absolute;bottom:2px;right:2px;transform:scale(1)}.page .avatar-sticker{background:var(--wjx-card-bg)}.avatar-sticker img{width:26px;height:26px}.card-widget:hover .avatar-sticker{opacity:0;transform:scale(0)}.author-info__description b{color:var(--wjx-white)}#aside-content>.card-widget.card-info:before{background:linear-gradient(-25deg,var(--wjx-main),var(--wjx-main-op-deep),var(--wjx-main),var(--wjx-main-op-deep));content:"";background-size:400%;width:100%;height:100%;animation:15s infinite gradient;position:absolute;top:0;left:0}</style></div><div class="card-widget wjx-right-widget" onclick="javascript:window.open('/subscribe')" id=card-wechat><div id=flip-wrapper><div id=flip-content><div style="background:url(/img/wechat/qr-green.avif) 50%/100% no-repeat" class=face></div><div class="back face" style="background:url(/img/wechat/qr-white.avif) 50%/100% no-repeat"></div></div></div><style>#aside-content .card-widget#card-wechat{background:#07c160}#aside-content .card-widget#card-wechat:before{content:"";background:url(/img/wechat/gzh_cover.avif) 50%/cover no-repeat;width:100%;height:90%;transition:all .2s cubic-bezier(.45,.04,.43,1.21);position:absolute;top:0;left:0}#aside-content .card-widget#card-wechat:hover:before{opacity:0;transition:all .3s ease-out;top:100%}</style></div><div class=sticky_layout><div class=card-widget id=card-toc><div class=item-headline><i class=icon-bars></i><span>æ–‡ç« ç›®å½•</span><span class=toc-percentage></span></div><div class=toc-content></div></div><div class="card-widget card-recent-post"><div class=item-headline><i class=icon-chat--fill style=font-size:19px></i><span>æœ€æ–°è¯„è®º</span></div><div class=aside-list id=newcomm></div></div><div class="card-widget card-recent-post"><div class=item-headline><i class=icon-eicon_map-2-line1></i><span>æœ€è¿‘å‘å¸ƒ</span></div><div class=aside-list><div class=aside-list-item><a class=thumbnail href=/articles/docs/é…ç½®orangepi5proè¿è¡Œrknnç‰ˆæœ¬çš„yolov5/ title=é…ç½®orangepi5proè¿è¡Œrknnç‰ˆæœ¬çš„yolov5> <picture class="post_bg progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/img00006.8f57f1d144c2cfd7.webp><source media="(min-width: 75em)" srcset="/processed_images/img00006.688adcb5ebd82ad6.avif?w=75em"><source media="(min-width: 60em)" srcset="/processed_images/img00006.8e3bcf4e0c9fd77c.avif?w=60em"><source media="(min-width: 45em)" srcset="/processed_images/img00006.08513801052a4920.avif?w=45em"><source media="(min-width: 30em)" srcset="/processed_images/img00006.0928215d8428e769.avif?w=30em"><source media="(min-width: 22em)" srcset="/processed_images/img00006.c83fffe523ead88b.avif?w=22em"><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" srcset="/processed_images/img00006.0beae348737c79a0.webp?w=22em 360w,
              /processed_images/img00006.1e5d356251b272fe.webp?w=30em 500w,
              /processed_images/img00006.c010a791dd57f875.webp?w=45em 720w,
              /processed_images/img00006.86f2248bcd34f02f.webp?w=60em 960w,
              /processed_images/img00006.799278f602588342.webp?w=75em 1200w" class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this)><noscript><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" decoding=async loading=lazy></noscript></picture> </a><div class=content><a class=title href=/articles/docs/é…ç½®orangepi5proè¿è¡Œrknnç‰ˆæœ¬çš„yolov5/ title=é…ç½®orangepi5proè¿è¡Œrknnç‰ˆæœ¬çš„yolov5>é…ç½®orangepi5proè¿è¡Œrknnç‰ˆæœ¬çš„yolov5</a></div></div><div class=aside-list-item><a class=thumbnail href=/articles/docs/è®¡ç®—æœºæ§åˆ¶apmé£æ§è‡ªåŠ¨é£è¡Œ/ title=è®¡ç®—æœºæ§åˆ¶apmé£æ§è‡ªåŠ¨é£è¡Œ> <picture class="post_bg progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/img00006.8f57f1d144c2cfd7.webp><source media="(min-width: 75em)" srcset="/processed_images/img00006.688adcb5ebd82ad6.avif?w=75em"><source media="(min-width: 60em)" srcset="/processed_images/img00006.8e3bcf4e0c9fd77c.avif?w=60em"><source media="(min-width: 45em)" srcset="/processed_images/img00006.08513801052a4920.avif?w=45em"><source media="(min-width: 30em)" srcset="/processed_images/img00006.0928215d8428e769.avif?w=30em"><source media="(min-width: 22em)" srcset="/processed_images/img00006.c83fffe523ead88b.avif?w=22em"><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" srcset="/processed_images/img00006.0beae348737c79a0.webp?w=22em 360w,
              /processed_images/img00006.1e5d356251b272fe.webp?w=30em 500w,
              /processed_images/img00006.c010a791dd57f875.webp?w=45em 720w,
              /processed_images/img00006.86f2248bcd34f02f.webp?w=60em 960w,
              /processed_images/img00006.799278f602588342.webp?w=75em 1200w" class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this)><noscript><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" decoding=async loading=lazy></noscript></picture> </a><div class=content><a class=title href=/articles/docs/è®¡ç®—æœºæ§åˆ¶apmé£æ§è‡ªåŠ¨é£è¡Œ/ title=è®¡ç®—æœºæ§åˆ¶apmé£æ§è‡ªåŠ¨é£è¡Œ>è®¡ç®—æœºæ§åˆ¶apmé£æ§è‡ªåŠ¨é£è¡Œ</a></div></div><div class=aside-list-item><a href="/articles/docs/ç¿»è¯‘[5]-åŸºäºrustå’Œembassyå¼‚æ­¥æ¡†æ¶çš„é£æ§å›ºä»¶_ Holsatus Flight/" title="ç¿»è¯‘[5]-åŸºäºrustå’Œembassyå¼‚æ­¥æ¡†æ¶çš„é£æ§å›ºä»¶_ Holsatus Flight" class=thumbnail> <picture class="post_bg progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/img00006.8f57f1d144c2cfd7.webp><source media="(min-width: 75em)" srcset="/processed_images/img00006.688adcb5ebd82ad6.avif?w=75em"><source media="(min-width: 60em)" srcset="/processed_images/img00006.8e3bcf4e0c9fd77c.avif?w=60em"><source media="(min-width: 45em)" srcset="/processed_images/img00006.08513801052a4920.avif?w=45em"><source media="(min-width: 30em)" srcset="/processed_images/img00006.0928215d8428e769.avif?w=30em"><source media="(min-width: 22em)" srcset="/processed_images/img00006.c83fffe523ead88b.avif?w=22em"><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" srcset="/processed_images/img00006.0beae348737c79a0.webp?w=22em 360w,
              /processed_images/img00006.1e5d356251b272fe.webp?w=30em 500w,
              /processed_images/img00006.c010a791dd57f875.webp?w=45em 720w,
              /processed_images/img00006.86f2248bcd34f02f.webp?w=60em 960w,
              /processed_images/img00006.799278f602588342.webp?w=75em 1200w" class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this)><noscript><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" decoding=async loading=lazy></noscript></picture> </a><div class=content><a href="/articles/docs/ç¿»è¯‘[5]-åŸºäºrustå’Œembassyå¼‚æ­¥æ¡†æ¶çš„é£æ§å›ºä»¶_ Holsatus Flight/" title="ç¿»è¯‘[5]-åŸºäºrustå’Œembassyå¼‚æ­¥æ¡†æ¶çš„é£æ§å›ºä»¶_ Holsatus Flight" class=title>ç¿»è¯‘[5]-åŸºäºrustå’Œembassyå¼‚æ­¥æ¡†æ¶çš„é£æ§å›ºä»¶_ Holsatus Flight</a></div></div><div class=aside-list-item><a class=thumbnail href=/articles/docs/æ­å»ºArduPilotçš„SITLä»¿çœŸç¯å¢ƒ/ title=æ­å»ºArduPilotçš„SITLä»¿çœŸç¯å¢ƒ> <picture class="post_bg progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/img00006.8f57f1d144c2cfd7.webp><source media="(min-width: 75em)" srcset="/processed_images/img00006.688adcb5ebd82ad6.avif?w=75em"><source media="(min-width: 60em)" srcset="/processed_images/img00006.8e3bcf4e0c9fd77c.avif?w=60em"><source media="(min-width: 45em)" srcset="/processed_images/img00006.08513801052a4920.avif?w=45em"><source media="(min-width: 30em)" srcset="/processed_images/img00006.0928215d8428e769.avif?w=30em"><source media="(min-width: 22em)" srcset="/processed_images/img00006.c83fffe523ead88b.avif?w=22em"><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" srcset="/processed_images/img00006.0beae348737c79a0.webp?w=22em 360w,
              /processed_images/img00006.1e5d356251b272fe.webp?w=30em 500w,
              /processed_images/img00006.c010a791dd57f875.webp?w=45em 720w,
              /processed_images/img00006.86f2248bcd34f02f.webp?w=60em 960w,
              /processed_images/img00006.799278f602588342.webp?w=75em 1200w" class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this)><noscript><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" decoding=async loading=lazy></noscript></picture> </a><div class=content><a class=title href=/articles/docs/æ­å»ºArduPilotçš„SITLä»¿çœŸç¯å¢ƒ/ title=æ­å»ºArduPilotçš„SITLä»¿çœŸç¯å¢ƒ>æ­å»ºArduPilotçš„SITLä»¿çœŸç¯å¢ƒ</a></div></div></div></div><div class="card-widget card-categories"><div class=item-headline><i class=icon-folder-open></i><span>åˆ†ç±»</span></div><div class=aside-list><ul class=card-category-list><li class=card-category-list-item><a class=card-category-list-link href=/categories/misc/ rel=tag> <span class=card-category-list-name>æ‚è°ˆ</span> <span class=card-category-list-count>6</span> </a><li class=card-category-list-item><a class=card-category-list-link href=/categories/theme/ rel=tag> <span class=card-category-list-name>ä¸»é¢˜</span> <span class=card-category-list-count>25</span> </a></ul></div></div></div></div></main><footer id=footer><div id=wjx-footer-bar><div class=footer-logo>qsbye</div><div class=footer-bar-description>ByeIOÂ·å¼€å‘è€…åšå®¢|æŠ€æœ¯è§£å†³æ–¹æ¡ˆ|å¼€å‘æ€è€ƒ|æ€»ç»“</div><a class=footer-bar-link href=/about>äº†è§£æ›´å¤š</a></div><div id=footer_deal><a rel="external nofollow noopener noreferrer" class=deal_link href=mailto:mail@example.com target=_blank title=Mail> <i class=icon-envelope></i> </a><picture class="footer_mini_logo progressive-picture" onclick="btf.scrollToDest(0, 500)" style=border-radius:500px><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/avatar.d5facb578cf12fdc.webp><source media="(min-width: 1em)" srcset=/processed_images/avatar.8bb6bf05eac51207.avif><img alt=è¿”å›é¡¶éƒ¨ class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this) src=/processed_images/avatar.06a48b3b45482d6b.webp><noscript><img alt=è¿”å›é¡¶éƒ¨ decoding=async loading=lazy src=/processed_images/avatar.06a48b3b45482d6b.webp></noscript></picture><a rel="external nofollow noopener noreferrer" class=deal_link href=https://github.com/iWangJiaxiang/zola-theme-jiaxiang.wang target=_blank title=Github> <i class=icon-github></i> </a></div><div id=wjx-footer><div class=footer-group><h3 class=footer-title>æ–‡åº“</h3><div class=footer-links><a class=footer-item data-pjax href=/archives target=_blank>å…¨éƒ¨æ–‡ç« </a><a class=footer-item data-pjax href=/categories target=_blank>åˆ†ç±»åˆ—è¡¨</a><a class=footer-item data-pjax href=/tags target=_blank>æ ‡ç­¾åˆ—è¡¨</a><a class=footer-item data-pjax href=javascript:toRandomPost() target=_blank>éšæœºæ–‡ç« </a></div></div><div class=footer-group><h3 class=footer-title>ä½œå“</h3><div class=footer-links><a class=footer-item data-pjax href=/articles/misc/lorem-ipsum target=_blank>Lorem Ipsum</a></div></div><div class=footer-group><h3 class=footer-title>åè®®</h3><div class=footer-links><a class=footer-item data-pjax href=/privacy target=_blank>éšç§åè®®</a><a class=footer-item data-pjax href=/cookies target=_blank>Cookies</a><a class=footer-item data-pjax href=/copyright target=_blank>ç‰ˆæƒåè®®</a></div></div><div class=footer-group><div class=footer-title-group><h3 class=footer-title>å‹é“¾</h3><button class=random-friends-btn id=footer-random-friends-btn onclick=javascript:wjx.addFriendLinksInFooter(); title=æ¢ä¸€æ‰¹å‹æƒ…é“¾æ¥><i class=icon-arrow-rotate-right style=font-size:16px></i></button></div><div class=footer-links id=friend-links-in-footer></div></div></div><div id=footer-bar style=padding:1rem><div class=footer-bar-links><div class=footer-bar-left><div id=footer-bar-tips><div class=copyright-group>Â© <span class=inline-word id=copyright-info>2025</span> Â ByÂ  <a class=footer-bar-link href=/ target=_blank> <picture class=progressive-picture id=copyright-logo><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/avatar.d5facb578cf12fdc.webp><source media="(min-width: 1em)" srcset=/processed_images/avatar.8bb6bf05eac51207.avif><img class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this) src=/processed_images/avatar.06a48b3b45482d6b.webp><noscript><img decoding=async loading=lazy src=/processed_images/avatar.06a48b3b45482d6b.webp></noscript></picture> ByeIOÂ·å¼€å‘è€…åšå®¢ </a><script defer>var startYear = 2025;
                            var currentYear = new Date().getFullYear();
                            var copyrightInfo = `${startYear !== currentYear ? startYear + ' - ' : ''}${currentYear}`;
                            document.getElementById('copyright-info').innerHTML = copyrightInfo;</script></div><div class=compliance-group><a rel="noopener external nofollow noreferrer" class=footer-bar-link href=https://beian.miit.gov.cn/#/Integrated/index target=_blank> ICP </a><a class=footer-bar-link href=https://github.com/iWangJiaxiang/zola-theme-jiaxiang.wang> <div class=status-light></div> <span>æœ¬ç«™åŠä¸»é¢˜åŸºäº Zola æ„å»º</span> </a></div></div></div><div class=footer-bar-right><a class=footer-bar-link href=/subscribe target=_blank>è®¢é˜…</a><a class=footer-bar-link href=https://github.com/iWangJiaxiang/zola-theme-jiaxiang.wang target=_blank>ä¸»é¢˜</a><a class=footer-bar-link href=/about>å…³äº</a><a class=footer-bar-link href=mailto:mail@example.com target=_blank>åé¦ˆ</a><a class="footer-bar-link cc" href=/copyright rel=license target=_blank title=CCç‰ˆæƒåè®®> <i class=icon-copyright-line></i> <i class=icon-creative-commons-by-line></i> <i class=icon-creative-commons-nc-line></i> <i class=icon-creative-commons-nd-line></i> </a></div></div></div><div id=quit-box onclick=RemoveRewardMask()></div><div class="comment-barrage needEndHide" style=display:none></div><style>a.footer-bar-link.cloud{align-items:center;display:flex}img.entered.loading.cloud{height:32px}</style></footer></div><div id=sidebar><div id=menu-mask></div><div id=sidebar-menus><span class=sidebar-menu-item-title>åŠŸèƒ½</span><div class=sidebar-menu-item><button class="darkmode_switchbutton menu-child" href=javascript:void(0); onclick=rm.switchDarkMode() title=æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢><i class=icon-moon style=font-size:.9rem;line-height:2></i> <span>æ˜¾ç¤ºæ¨¡å¼</span></button></div><div class=back-menu-list-groups><div class=back-menu-list-group><div class=back-menu-list-title>ä½œå“</div><div class=back-menu-list><a class="back-menu-item nav-item" href=/articles/misc/lorem-ipsum>  <i class=icon-music style=font-size:.9em></i> <span class=back-menu-item-text>Lorem Ipsum</span> </a><a class="back-menu-item nav-item" href=/articles/misc/lorem-ipsum>  <i class=icon-music style=font-size:.9em></i> <span class=back-menu-item-text>Lorem Ipsum</span> </a></div></div></div><div class=menus_items><div class=menus_item><button class=site-page><span>æ–‡åº“</span></button><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" draggable=false href=/archives> <i class="icon-book-open faa-tada" style=font-size:.9em></i> <span>å…¨éƒ¨æ–‡ç« </span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=/categories> <i class="icon-folder-open faa-tada" style=font-size:.9em></i> <span>åˆ†ç±»åˆ—è¡¨</span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=/tags> <i class="icon-tags faa-tada" style=font-size:.9em></i> <span>æ ‡ç­¾åˆ—è¡¨</span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=javascript:toRandomPost()> <i class="icon-artstation faa-tada" style=font-size:.9em></i> <span>éšæœºæ–‡ç« </span> </a></ul></div><div class=menus_item><a class=site-page href=/tags/work> <span>æ¨è</span> </a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" draggable=false href=/articles/docs/readme> <i class="icon-music faa-tada" style=font-size:.9em></i> <span>åšå®¢ä¸»é¢˜ä»‹ç»</span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=/articles/misc/lorem-ipsum> <i class="icon-music faa-tada" style=font-size:.9em></i> <span>Lorem Ipsum</span> </a></ul></div><div class=menus_item><button class=site-page><span>å‹é“¾</span></button><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" draggable=false href=/friends> <i class="icon-link faa-tada" style=font-size:.9em></i> <span>å‹é“¾åˆ—è¡¨</span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=javascript:travelling()> <i class="icon-paper-plane faa-tada" style=font-size:.9em></i> <span>éšæœºå‘ç°</span> </a></ul></div><div class=menus_item><button class=site-page><span>æˆ‘çš„</span></button><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" draggable=false href=/about> <i class="icon-rocket faa-tada" style=font-size:.9em></i> <span>å…³äºæœ¬äºº</span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=/equipment> <i class="icon-artstation faa-tada" style=font-size:.9em></i> <span>æˆ‘çš„è£…å¤‡</span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=/tags/project> <i class="icon-lightbulb faa-tada" style=font-size:.9em></i> <span>æˆ‘çš„é¡¹ç›®</span> </a></ul></div></div><span class=sidebar-menu-item-title>æ ‡ç­¾</span><div class="card-widget card-tags card-archives card-webinfo card-allinfo"><div class=item-headline></div><div class=card-tag-cloud><a class=tag-item href=/tags/blog/ style=font-size:1em title=åšå®¢>  åšå®¢<sup>31</sup> </a><a class=tag-item href=/tags/docs/ style=font-size:1em title=æ–‡æ¡£>  æ–‡æ¡£<sup>25</sup> </a><a class=tag-item href=/tags/featured/ style=font-size:1em title=å¿…çœ‹>  å¿…çœ‹<sup>30</sup> </a><a class=tag-item href=/tags/hot/ style=font-size:1em title=çƒ­é—¨>  çƒ­é—¨<sup>30</sup> </a><a class=tag-item href=/tags/project/ style=font-size:1em title=é¡¹ç›®>  é¡¹ç›®<sup>1</sup> </a><a class=tag-item href=/tags/work/ style=font-size:1em title=work>  work<sup>1</sup> </a></div></div></div></div><div id=console><div class=close-btn href=javascript:void(0); onclick=wjx.hideConsole()><i class=icon-circle-xmark></i></div><div class=console-card-group><div class=console-card-group-left><div class=console-card id=card-newest-comments onclick=wjx.hideConsole()><div class=card-content><div class=author-content-item-tips>äº’åŠ¨</div><span class=author-content-item-title>æœ€è¿‘è¯„è®º</span></div><div class=aside-list><span>æ­£åœ¨åŠ è½½ä¸­...</span></div></div></div><div class=console-card-group-right><div class="console-card tags" onclick=wjx.hideConsole()><div class=card-content><div class=author-content-item-tips>æ ‡ç­¾</div><span class=author-content-item-title>å¯»æ‰¾æ„Ÿå…´è¶£çš„é¢†åŸŸ</span></div><div class=card-tag-cloud><a href=/tags/blog/ rel=tag style=color:#d3d3d3;font-size:1em> åšå®¢<sup>31</sup> </a><a href=/tags/docs/ rel=tag style=color:#d3d3d3;font-size:1em> æ–‡æ¡£<sup>25</sup> </a><a href=/tags/featured/ rel=tag style=color:#d3d3d3;font-size:1em> å¿…çœ‹<sup>30</sup> </a><a href=/tags/hot/ rel=tag style=color:#d3d3d3;font-size:1em> çƒ­é—¨<sup>30</sup> </a><a href=/tags/project/ rel=tag style=color:#d3d3d3;font-size:1em> é¡¹ç›®<sup>1</sup> </a><a href=/tags/work/ rel=tag style=color:#d3d3d3;font-size:1em> work<sup>1</sup> </a></div></div><div class="console-card history" onclick=wjx.hideConsole()><div class=item-headline><i class="fas fa-archive"></i><span>æ–‡ç« </span></div><ul class=card-archive-list><ul><li class=card-archive-list-item><a class=card-archive-list-link href=/archives> <span class=card-archive-list-date> 2025 1æœˆ </span> <div class=card-archive-list-count-group><span class=card-archive-list-count>25</span><span class=card-archive-list-count-unit>ç¯‡</span></div> </a></ul><ul><li class=card-archive-list-item><a class=card-archive-list-link href=/archives> <span class=card-archive-list-date> 2024 12æœˆ </span> <div class=card-archive-list-count-group><span class=card-archive-list-count>6</span><span class=card-archive-list-count-unit>ç¯‡</span></div> </a></ul></ul></div></div></div><div class=button-group><div class=console-btn-item><button rel="external nofollow" class=darkmode_switchbutton href=javascript:void(0); onclick=navFn.switchDarkMode(); title=æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢><i class=icon-moon-clear-fill style=font-size:1rem></i></button></div><div class=console-btn-item id=consoleHideAside onclick=wjx.hideAsideBtn() title=è¾¹æ æ˜¾ç¤ºæ§åˆ¶><button class=asideSwitch title=ä¾§è¾¹æ å¼€å…³><i class=icon-arrows-left-right></i></button></div><div class="console-btn-item on" id=consoleCommentBarrage onclick=wjx.switchCommentBarrage() title=çƒ­è¯„å¼€å…³><button class=commentBarrage><i class=icon-chat--fill></i></button></div></div><div class=console-mask href=javascript:void(0); onclick=wjx.hideConsole()></div></div><div id=rightside><div id=rightside-config-hide><button id=translateLink title=ç®€ç¹è½¬æ¢ type=button>ç¹</button><button id=darkmode title=æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢ type=button><i class=icon-circle-half-stroke></i></button><button id=hide-aside-btn title=å•æ å’ŒåŒæ åˆ‡æ¢ type=button><i class=icon-arrows-left-right></i></button></div><div id=rightside-config-show><button id=rightside-config title=è®¾ç½® type=button><i class=icon-gear></i></button><a href=#post-comment id=to_comment title=ç›´è¾¾è¯„è®º><i class=icon-chat--fill style=font-size:17px></i></a><button id=go-up title=å›åˆ°é¡¶éƒ¨ type=button><i class=icon-arrow-up></i></button></div></div><link onload="this.onload=null;this.rel='stylesheet'" as=style href=/css/read-mode.css rel=preload><noscript><link href=/css/read-mode.css rel=stylesheet></noscript><div class=js-pjax><div id=rightMenu><div class="rightMenu-group rightMenu-small"><div class=rightMenu-item id=menu-backward><i class=icon-arrow-left></i></div><div class=rightMenu-item id=menu-forward><i class=icon-arrow-right></i></div><div class=rightMenu-item id=menu-refresh><i class=icon-arrow-rotate-right></i></div><div class=rightMenu-item id=menu-top><i class=icon-arrow-up></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class=rightMenu-item id=menu-copytext><i class=icon-copy></i><span>å¤åˆ¶é€‰ä¸­æ–‡æœ¬</span></div><div class=rightMenu-item id=menu-pastetext><i class=icon-paste></i><span>ç²˜è´´æ–‡æœ¬</span></div><a class=rightMenu-item id=menu-commenttext> <i class=icon-comment-medical></i> <span>å¼•ç”¨åˆ°è¯„è®º</span> </a><div class=rightMenu-item id=menu-newwindow><i class=icon-window-restore></i><span>æ–°çª—å£æ‰“å¼€</span></div><div class=rightMenu-item id=menu-copylink><i class=icon-link></i><span>å¤åˆ¶é“¾æ¥åœ°å€</span></div><div class=rightMenu-item id=menu-copyimg><i class=icon-images></i><span>å¤åˆ¶æ­¤å›¾ç‰‡</span></div><div class=rightMenu-item id=menu-downloadimg><i class=icon-download></i><span>ä¸‹è½½æ­¤å›¾ç‰‡</span></div><div class=rightMenu-item id=menu-newwindowimg><i class=icon-window-restore></i><span>æ–°çª—å£æ‰“å¼€å›¾ç‰‡</span></div><div class=rightMenu-item id=menu-search><i class=icon-search--line></i><span>ç«™å†…æœç´¢</span></div><div class=rightMenu-item id=menu-searchBaidu><i class=icon-baidu></i><span>ç™¾åº¦æœç´¢</span></div><div class=rightMenu-item id=menu-music-toggle><i class=icon-play></i><span>æ’­æ”¾éŸ³ä¹</span></div><div class=rightMenu-item id=menu-music-back><i class=icon-backward></i><span>åˆ‡æ¢åˆ°ä¸Šä¸€é¦–</span></div><div class=rightMenu-item id=menu-music-forward><i class=icon-forward></i><span>åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–</span></div><div onclick="javascript:window.open('https://y.qq.com/n/ryqq/playlist/xxxxx')" class=rightMenu-item id=menu-music-playlist><i class=icon-radio></i><span>æŸ¥çœ‹æ‰€æœ‰æ­Œæ›²</span></div><div class=rightMenu-item id=menu-music-copyMusicName><i class=icon-copy></i><span>å¤åˆ¶æ­Œå</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id=menu-randomPost onclick=toRandomPost()> <i class=icon-shuffle></i> <span>éšä¾¿é€›é€›</span> </a><a class="rightMenu-item menu-link" href=../categories> <i class=icon-cube></i> <span>åšå®¢åˆ†ç±»</span> </a><a class="rightMenu-item menu-link" href=../tags> <i class=icon-tags></i> <span>æ–‡ç« æ ‡ç­¾</span> </a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><div class=rightMenu-item id=menu-copy><i class=icon-copy></i><span>å¤åˆ¶åœ°å€</span></div><div class=rightMenu-item draggable=false id=menu-commentBarrage style=display:flex><i class=icon-chat--fill style=font-size:19px></i><span class=menu-commentBarrage-text>æ˜¾ç¤ºçƒ­è¯„</span></div><div class=rightMenu-item id=menu-darkmode><i class=icon-moon-clear-fill style=font-size:19px></i><span class=menu-darkmode-text>æ·±è‰²æ¨¡å¼</span></div><div class=rightMenu-item id=menu-translate><i class=icon-fanti style=font-size:19px></i><span>è½‰ç‚ºç¹é«”</span></div></div></div><div id=rightmenu-mask></div></div><script defer onload src=/libs/qrcode/qrcode.min.js></script><script defer src=/libs/view-image/view-image.min.js></script><script defer src=/libs/tocbot/4.18.2/tocbot.min.js></script><link onload="this.onload=null;this.rel='stylesheet'" as=style href=/libs/tocbot/4.18.2/tocbot.css rel=preload><noscript><link href=/libs/tocbot/4.18.2/tocbot.css rel=stylesheet></noscript><script async src=/libs/snackbar/snackbar.min.js></script><script>var meting_api = "https:&#x2F;&#x2F;api.i-meto.com&#x2F;meting&#x2F;api?server=:server&amp;type=:type&amp;id=:id&amp;r=:r";</script><canvas height=880 id=universe width=1312></canvas><script defer src=/libs/canvas/dark.js></script><script src=/libs/waterfall/waterfall.min.js></script><script src=/libs/fast-average-color/index.browser.min.js></script><script>let pjaxSelectors = ['title', '#body-wrap', '#rightside-config-hide', '#rightside-config-show', '.js-pjax', '#site-config']
          
    pjaxSelectors.unshift('meta[property="og:type"]', 'meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]', 'meta[property="og:description"]'
            , 'meta[name="twitter:title"]', 'meta[name="twitter:url"]', 'meta[name="twitter:description"]', 'meta[name="twitter:image"]', 'meta[name="description"]')
    
    var pjax = new Pjax({
        elements: 'a:not([target="_blank"])',
        selectors: pjaxSelectors,
        cacheBust: false,
        //debug: true,        
        analytics: false,
        scrollRestoration: false
    })</script><script defer src=/js/rightmenu.js></script><script data-pjax defer src=/production/js/abstract/local.js></script><script data-pjax defer src=/production/js/bundle.js></script><script defer src=/js/tw_cn.js></script><script defer src=/libs/instantpage/instantpage.min.js type=module></script><link onload="this.rel='stylesheet'" as=style href=/libs/prism/prism.min.css rel=preload><noscript><link href=/libs/prism/prism.min.css rel=stylesheet></noscript><link onload="this.rel='stylesheet'" as=style href=/libs/prism/code.css rel=preload><noscript><link href=/libs/prism/code.css rel=stylesheet></noscript><link onload="this.rel='stylesheet'" as=style data-code-theme=light href=/libs/prism/themes/prism-one-dark.css rel=preload><noscript><link href=/libs/prism/themes/prism-one-dark.css rel=stylesheet></noscript><link onload="this.rel='stylesheet'" as=style data-code-theme=dark href=/libs/prism/themes/prism-one-dark.css rel=preload><noscript><link href=/libs/prism/themes/prism-one-dark.css rel=stylesheet></noscript><script defer src=/libs/prism/prism.min.js></script><style>#article-container .code-toolbar pre.close{height:300px;overflow:hidden}</style>