<!doctype html><html lang=zh-CN><head><title>æŠ˜è…¾ç¬”è®°[11]-ä½¿ç”¨rustè¿›è¡Œç›´æ¥æ³•è§†è§‰é‡Œç¨‹è®¡ä¼°è®¡ | ByeIOÂ·å¼€å‘è€…åšå®¢</title><meta content=ByeIOÂ·å¼€å‘è€…åšå®¢ property=og:site_name><meta content=article property=og:type><meta content=æŠ˜è…¾ç¬”è®°[11]-ä½¿ç”¨rustè¿›è¡Œç›´æ¥æ³•è§†è§‰é‡Œç¨‹è®¡ä¼°è®¡ property=og:title><meta content=//articles/docs/æŠ˜è…¾ç¬”è®°[11]-ä½¿ç”¨rustè¿›è¡Œç›´æ¥æ³•è§†è§‰é‡Œç¨‹è®¡ä¼°è®¡/ property=og:url><meta content=ä½¿ç”¨rustå®ç°äº†ä¸€ä¸ªå®Œæ•´çš„ç›´æ¥æ³•è§†è§‰é‡Œç¨‹è®¡ç³»ç»Ÿï¼Œèƒ½å¤Ÿé€šè¿‡æ¯”è¾ƒä¸¤å¹…å›¾åƒä¸­çš„åƒç´ å¼ºåº¦æ¥ä¼°è®¡ç›¸æœºçš„è¿åŠ¨ã€‚å®ƒé€šè¿‡å•å±‚å’Œå¤šå±‚çš„ä¼˜åŒ–ç­–ç•¥ï¼Œâ€¦ property=og:description><meta content=/processed_images/img00006.3250c5dc35a28271.webp property=og:image><meta content=summary_large_image name=twitter:card><meta content=æŠ˜è…¾ç¬”è®°[11]-ä½¿ç”¨rustè¿›è¡Œç›´æ¥æ³•è§†è§‰é‡Œç¨‹è®¡ä¼°è®¡ name=twitter:title><meta content=//articles/docs/æŠ˜è…¾ç¬”è®°[11]-ä½¿ç”¨rustè¿›è¡Œç›´æ¥æ³•è§†è§‰é‡Œç¨‹è®¡ä¼°è®¡/ name=twitter:url><meta content=ä½¿ç”¨rustå®ç°äº†ä¸€ä¸ªå®Œæ•´çš„ç›´æ¥æ³•è§†è§‰é‡Œç¨‹è®¡ç³»ç»Ÿï¼Œèƒ½å¤Ÿé€šè¿‡æ¯”è¾ƒä¸¤å¹…å›¾åƒä¸­çš„åƒç´ å¼ºåº¦æ¥ä¼°è®¡ç›¸æœºçš„è¿åŠ¨ã€‚å®ƒé€šè¿‡å•å±‚å’Œå¤šå±‚çš„ä¼˜åŒ–ç­–ç•¥ï¼Œâ€¦ name=twitter:description><meta content=/processed_images/img00006.3250c5dc35a28271.webp name=twitter:image><meta content="ä½¿ç”¨rustå®ç°äº†ä¸€ä¸ªå®Œæ•´çš„ç›´æ¥æ³•è§†è§‰é‡Œç¨‹è®¡ç³»ç»Ÿï¼Œèƒ½å¤Ÿé€šè¿‡æ¯”è¾ƒä¸¤å¹…å›¾åƒä¸­çš„åƒç´ å¼ºåº¦æ¥ä¼°è®¡ç›¸æœºçš„è¿åŠ¨ã€‚å®ƒé€šè¿‡å•å±‚å’Œå¤šå±‚çš„ä¼˜åŒ–ç­–ç•¥ï¼Œç»“åˆå›¾åƒé‡‘å­—å¡”å’Œå¹¶è¡Œè®¡ç®—ï¼Œæé«˜äº†ä½å§¿ä¼°è®¡çš„ç²¾åº¦å’Œæ•ˆç‡ã€‚æœ€ç»ˆï¼Œä»£ç è¾“å‡ºäº†ä¼˜åŒ–åçš„ç›¸æœºä½å§¿å˜æ¢çŸ©é˜µï¼Œå¹¶å¯è§†åŒ–äº†æŠ•å½±ç‚¹çš„ä½ç½®ã€‚This is a complete direct methâ€¦" name=description><script id=ld-json type=application/ld+json>
        {
          "@context": "https://schema.org/",
          "@type": "Article",
          "headline": "æŠ˜è…¾ç¬”è®°[11]-ä½¿ç”¨rustè¿›è¡Œç›´æ¥æ³•è§†è§‰é‡Œç¨‹è®¡ä¼°è®¡",
          "author": {
            "@type": "Person",
            "name": "qsbye",
            "url": "/about"
          },
          "image": "/processed_images/img00006.c4abedc898f992a6.webp",
          "datePublished": "2025-01-01T00:00:00+00:00",
          
          "description": "ä½¿ç”¨rustå®ç°äº†ä¸€ä¸ªå®Œæ•´çš„ç›´æ¥æ³•è§†è§‰é‡Œç¨‹è®¡ç³»ç»Ÿï¼Œèƒ½å¤Ÿé€šè¿‡æ¯”è¾ƒä¸¤å¹…å›¾åƒä¸­çš„åƒç´ å¼ºåº¦æ¥ä¼°è®¡ç›¸æœºçš„è¿åŠ¨ã€‚å®ƒé€šè¿‡å•å±‚å’Œå¤šå±‚çš„ä¼˜åŒ–ç­–ç•¥ï¼Œç»“åˆå›¾åƒé‡‘å­—å¡”å’Œå¹¶è¡Œè®¡ç®—ï¼Œæé«˜äº†ä½å§¿ä¼°è®¡çš„ç²¾åº¦å’Œæ•ˆç‡ã€‚æœ€ç»ˆï¼Œä»£ç è¾“å‡ºäº†ä¼˜åŒ–åçš„ç›¸æœºä½å§¿å˜æ¢çŸ©é˜µï¼Œå¹¶å¯è§†åŒ–äº†æŠ•å½±ç‚¹çš„ä½ç½®ã€‚This is a complete direct method visual odometry system implemented in Rust, which estimates camera motion by comparing pixel intensities between two images. It employs both single-layer and multi-layer optimization strategies, combined with image pyramids and parallel computing, to enhance the accuracy and efficiency of pose estimation. Finally, the code outputs the optimized camera pose transformation matrix and visualizes the positions of the projected points."
        }
    </script><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content="telephone=no" name=format-detection><meta content=var(--wjx-card-bg) name=theme-color><link href=/manifest.json rel=manifest><link href=/img/avatar.png rel=icon type=image/x-icon><link href=/img/avatar.png rel=apple-touch-icon><link href=/img/avatar.png rel=bookmark><link href=/img/avatar.png rel=apple-touch-icon-precomposed sizes=180x180><script src=/libs/jquery/jquery-3.7.1.min.js></script><script src=/libs/pjax/pjax.min.js></script><script src=/production/js/utils.js></script><link href=/production/css/blog.css rel=stylesheet><link href=/css/custom.css rel=stylesheet><link onload="this.onload=null;this.rel='stylesheet'" as=style href=/libs/snackbar/snackbar.min.css rel=preload><noscript><link href=/libs/snackbar/snackbar.min.css rel=stylesheet></noscript><script>// Added non-passive event listener
  !function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){var e,t=["scroll","wheel","touchstart","touchmove","touchenter","touchend","touchleave","mouseout","mouseleave","mouseup","mousedown","mousemove","mouseenter","mousewheel","mouseover"];if(function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}()){var n=EventTarget.prototype.addEventListener;e=n,EventTarget.prototype.addEventListener=function(n,o,r){var i,s="object"==typeof r&&null!==r,u=s?r.capture:r;(r=s?function(e){var t=Object.getOwnPropertyDescriptor(e,"passive");return t&&!0!==t.writable&&void 0===t.set?Object.assign({},e):e}(r):{}).passive=void 0!==(i=r.passive)?i:-1!==t.indexOf(n)&&!0,r.capture=void 0!==u&&u,e.call(this,n,o,r)},EventTarget.prototype.addEventListener._original=e}});</script><script>((win) => {
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return;
        const now = new Date();
        const expiryDay = ttl * 86400000;
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        };
        localStorage.setItem(key, JSON.stringify(item));
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key);

        if (!itemStr) {
          return undefined;
        }
        const item = JSON.parse(itemStr);
        const now = new Date();

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key);
          return undefined;
        }
        return item.value;
      },
    };

    win.getScript = (url) =>
      new Promise((resolve, reject) => {
        const script = document.createElement("script");
        script.src = url;
        script.async = true;
        script.onerror = reject;
        script.onload = script.onreadystatechange = function () {
          const loadState = this.readyState;
          if (loadState && loadState !== "loaded" && loadState !== "complete")
            return;
          script.onload = script.onreadystatechange = null;
          resolve();
        };
        document.head.appendChild(script);
      });

    win.getCSS = (url, id = false) =>
      new Promise((resolve, reject) => {
        const link = document.createElement("link");
        link.rel = "stylesheet";
        link.href = url;
        if (id) link.id = id;
        link.onerror = reject;
        link.onload = link.onreadystatechange = function () {
          const loadState = this.readyState;
          if (loadState && loadState !== "loaded" && loadState !== "complete")
            return;
          link.onload = link.onreadystatechange = null;
          resolve();
        };
        document.head.appendChild(link);
      });

    win.activateDarkMode = function () {
      document.documentElement.setAttribute("data-theme", "dark");
      document.documentElement.classList.add("color-scheme-dark");
      wjx.initThemeColor();
    };
    win.activateLightMode = function () {
      document.documentElement.setAttribute("data-theme", "light");
      document.documentElement.classList.remove("color-scheme-dark");
      wjx.initThemeColor();
    };
    const t = saveToLocal.get("theme");

    const isDarkMode = window.matchMedia(
      "(prefers-color-scheme: dark)"
    ).matches;
    const isLightMode = window.matchMedia(
      "(prefers-color-scheme: light)"
    ).matches;
    const isNotSpecified = window.matchMedia(
      "(prefers-color-scheme: no-preference)"
    ).matches;
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified;

    if (t === undefined) {
      if (isLightMode) activateLightMode();
      else if (isDarkMode) activateDarkMode();
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date();
        const hour = now.getHours();
        const isNight = hour <= 6 || hour >= 18;
        isNight ? activateDarkMode() : activateLightMode();
      }
      window
        .matchMedia("(prefers-color-scheme: dark)")
        .addListener(function (e) {
          if (saveToLocal.get("theme") === undefined) {
            e.matches ? activateDarkMode() : activateLightMode();
          }
        });
    } else if (t === "light") activateLightMode();
    else activateDarkMode();

    if ("system" === "dark")
      activateDarkMode();
    else activateLightMode();

    const asideStatus = saveToLocal.get("aside-status");
    if (asideStatus !== undefined) {
      if (asideStatus === "hide") {
        document.documentElement.classList.add("hide-aside");
      } else {
        document.documentElement.classList.remove("hide-aside");
      }
    }
  })(window);</script><script data-pace-options='{ "restartOnRequestAfter":false,"eventLag":false}' src=/libs/pace/pace.min.js></script><script defer src=/libs/clipboard/clipboard.min.js></script><script src=/libs/countup/countup.js></script><link href=/icon/font.css rel=stylesheet><style>[data-theme=light]{--wjx-theme:#425aef!important;--wjx-theme-op:#425aef23!important;--wjx-theme-op-deep:#425aefdd!important;--wjx-theme-none:#425aef00!important}[data-theme=dark]{--wjx-theme:#f2b94b!important;--wjx-theme-op:#f2b94b23!important;--wjx-theme-op-deep:#f2b94bdd!important;--wjx-theme-none:#f2b94b00!important}:root{--halo-comment-widget-component-card-bg:var(--wjx-card-bg);--halo-comment-widget-component-theme-op:var(--wjx-theme-op);--halo-comment-widget-component-card-border:var(--wjx-card-border);--halo-comment-widget-component-shadow-border:var(--wjx-shadow-border);--halo-comment-widget-component-secondtext:var(--wjx-secondtext);--halo-comment-widget-component-lighttext:var(--wjx-lighttext);--halo-comment-widget-component-secondbg:var(--wjx-secondbg);--halo-comment-widget-component-fontcolor:var(--wjx-fontcolor);--halo-comment-widget-component-main:var(--wjx-main);--halo-comment-widget-component-background:var(--wjx-background);--halo-comment-widget-component-white:var(--wjx-white);--halo-comment-widget-component-shadow-black:var(--wjx-shadow-black)}#page{--halo-comment-widget-component-padding:1rem}.color-scheme-dark,.dark,[data-color-scheme=dark]{--halo-search-widget-color-modal-layer:var(--wjx-maskbgdeep);--halo-search-widget-color-modal-content-bg:var(--wjx-card-bg);--halo-search-widget-color-form-input:#fffc;--halo-search-widget-color-form-input-placeholder:#6b7280d9;--halo-search-widget-color-form-input-bg:var(--wjx-card-bg);--halo-search-widget-color-form-divider:#bbbbbb0f;--halo-search-widget-color-result-item-bg:var(--wjx-card-bg);--halo-search-widget-color-result-item-hover-bg:#90939914;--halo-search-widget-color-result-item-title:#fffc;--halo-search-widget-color-result-item-content:#ffffff82;--halo-search-widget-color-command-kbd-item:#c0c4ccb3;--halo-search-widget-color-command-kbd-border:#bbbbbb0f;--halo-search-widget-color-result-empty:#6b7280d9}[data-theme=light]{--halo-search-widget-color-result-item-title:#4b5563}</style><script id=site-config>var GLOBAL_CONFIG = {
        
                
        
        
        
        
        htmlType: "post",
        postTitle: "æŠ˜è…¾ç¬”è®°[11]-ä½¿ç”¨rustè¿›è¡Œç›´æ¥æ³•è§†è§‰é‡Œç¨‹è®¡ä¼°è®¡",
        isPost: true,
        isHome: false,
        passageTip: {
            enable: true,
            day: 60,
        },
        copyright: {
            enable: false,
            limitCount: 10,
            languages: {
                author: " ä½œè€…ï¼šqsbye",
                link: " é“¾æ¥ï¼š",
                source: " æ¥æºï¼šByeIOÂ·å¼€å‘è€…åšå®¢",
                info: " æç¤ºï¼šè‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„å¹¶ä¿ç•™åŸæ–‡é“¾æ¥ã€‚"
            }
        },
        lightbox: 'fancybox',
        rightMenuEnable: true,
        lazyload: {
            enable: true,
            error: "/img/404.svg"
        },
        isFriendLinksInFooter: true,
        loadingBox: true,
        progress_bar: true,
        navMusicEnable: false,
        isMusic: false,
        helloText: ["ğŸ¤–ï¸ æ•°ç ç§‘æŠ€çˆ±å¥½è€…","ğŸ”¯ å…¨æ ˆæ¶æ„éƒ½åœ¨è¡Œ","ğŸ  æ™ºèƒ½å®¶å±…å°èƒ½æ‰‹","ğŸ¤ ç§‘ç ”ç§‘æ™®ä¸¤ä¸è¯¯","ğŸµ ä¸šä½™åŸåˆ›éŸ³ä¹äºº","ğŸƒ æ–‡è‰ºé’å¹´ç»†èŠ‚æ§","ğŸ” æ¢ç´¢ä¸–ç•Œæ¶‰çŒå¹¿","ğŸ¤› çƒ­çˆ±åˆ†äº«äº¤æœ‹å‹"],
        profileStyle: "one",
        enable: true,
        keyboard: true,
        date_suffix: {
            just: 'åˆšåˆš',
            min: 'åˆ†é’Ÿå‰',
            hour: 'å°æ—¶å‰',
            day: 'å¤©å‰',
            month: 'ä¸ªæœˆå‰'
        },
        Snackbar: {
            chs_to_cht: "ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“",
            cht_to_chs: "ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“",
            day_to_night: "ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼",
            night_to_day: "ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼",
            bgLight: "#425AEF",
            bgDark: "#f2b94b",
            position: "top-center"
        },
        translate: {
            defaultEncoding: "2",
            translateDelay: 0,
            msgToTraditionalChinese: "ç¹",
            msgToSimplifiedChinese: "ç®€",
            rightMenuMsgToTraditionalChinese: "è½‰ç‚ºç¹é«”",
            rightMenuMsgToSimplifiedChinese: "è½¬ä¸ºç®€ä½“"
        },
        prism: {
            enable: true,
            enable_title: true,
            enable_hr: true,
            enable_line: true,
            enable_copy: true,
            enable_expander: true,
            prism_limit: 330,
            enable_height_limit: false
        },
        
        source: {
            power: {
                powerLink: "/",
                showNum: 3
            },
            links: {
                linksUrl: "/friends",
                linksNum: 3
            },
            jQuery: '/libs/jquery/jquery.min.js',
            justifiedGallery: {
                js: '/libs/justified-gallery/fjGallery.min.js',
                css: '/libs/justified-gallery/fjGallery.css'
            },
            fancybox: {
                js: '/libs/fancybox/jquery.fancybox.min.js',
                css: '/null'
            },
            comments: {
                use: "twikoo",
                maxBarrage: 1,
                barrageTime: 4000,
                mailMd5: "",
                lazyload: false,
                textarea: "el-textarea__inner"
            },
            post: {
                dynamicBackground: true
            },
            tool: {
                switch: false
            },
            postAi: {
                
                gptName: "æœ¬åœ°",
                modeName: "local"
            },twikoo: {
                js: "/libs/twikoo/twikoo.all.min.js",
                twikooUrl: "https://your-api-url",
            },
            footer: {
                default_enable: true
            },
            about: {
                
                rewardList: [],
                rewardAmount: 10
            }
        }
    };</script><style id=wjx-theme-styles>:root{--wjx-main:var(--wjx-theme)!important;--wjx-main-op:var(--wjx-theme-op)!important;--wjx-main-op-deep:var(--wjx-theme-op-deep)!important;--wjx-main-op-light:var(--wjx-theme-op-light)!important;--wjx-main-none:var(--wjx-theme-none)!important}</style><script>document.addEventListener('pjax:send', function () {
      // removeEventListener toc scroll
      window.removeEventListener('scroll', window.tocScrollFn);
      typeof preloader === 'object' && preloader.initLoading();
      
      if (window.aplayers) {
          for (let i = 0; i < window.aplayers.length; i++) {
              if (!window.aplayers[i].options.fixed) {
                  window.aplayers[i].destroy()
              }
          }
      }
      
      typeof typed === 'object' && typed.destroy();
      typeof window.initializationRegistry === 'object' && window.initializationRegistry.clear();
      
      //reset readmode
      const $bodyClassList = document.body.classList
      $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
  })
  document.addEventListener('pjax:complete', function () {
      window.refreshFn();
      
      document.querySelectorAll('script[data-pjax]').forEach(item => {
                  const newScript = document.createElement('script')
                  const content = item.text || item.textContent || item.innerHTML || ""
                  Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
                  newScript.appendChild(document.createTextNode(content))
                  item.parentNode.replaceChild(newScript, item)
              }
      );

      typeof chatBtnFn === 'function' && chatBtnFn();
      typeof panguInit === 'function' && panguInit();
      
      // google analytics
      typeof gtag === 'function' && gtag('config', '', {
          'page_path': window.location.pathname
      });
      
      // baidu analytics
      typeof _hmt === 'object' && _hmt.push(['_trackPageview', window.location.pathname]);
      
      typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting();
      
      // Analytics
      if (false) {
          MtaH5.pgv()
      }
      
      // prismjs
      typeof Prism === 'object' && Prism.highlightAll();
      
      typeof preloader === 'object' && preloader.endLoading();
  })
  document.addEventListener('pjax:error', (e) => {
      if (e.request.status === 404 || e.request.status === 500) {
          window.location.href = e.request.responseURL;
      }
  })</script><script data-pjax src=/production/js/main.js></script><script>let initTop = 0
  let isChatShow = true
  const innerHeight = window.innerHeight + 0
  window.addEventListener('scroll', btf.throttle(function (e) {
    const $rightside = document.getElementById('rightside')

    const $header = document.getElementById('page-header')
    const $cookies_window = document.getElementById('cookies-window')
    const isChatBtnHide = typeof chatBtnHide === 'function'
    const isChatBtnShow = typeof chatBtnShow === 'function'
  
    const currentTop = window.scrollY || document.documentElement.scrollTop
    // æ‰¾åˆ°æ»šåŠ¨æ–¹å‘ true is down & false is up
    const isDown = currentTop > initTop
    initTop = currentTop
    if (currentTop > 0) {
        if (isDown) {
            if ($header.classList.contains('nav-visible')) $header.classList.remove('nav-visible')
            if (isChatBtnShow && isChatShow === true) {
                chatBtnHide()
                isChatShow = false
            }
        } else {
            if (!$header.classList.contains('nav-visible')) $header.classList.add('nav-visible')
            if (isChatBtnHide && isChatShow === false) {
                chatBtnShow()
                isChatShow = true
            }
        }
        $header.classList.add('nav-fixed')
        if($cookies_window!=null && $cookies_window!=''){
            $cookies_window.classList.add('cw-hide')
        }
        if ($rightside && window.getComputedStyle($rightside).getPropertyValue('opacity') === '0') {
            $rightside.style.cssText = 'opacity: 0.8; transform: translateX(-58px)'
        }
    } else {
        if (currentTop === 0) {
            $header.classList.remove('nav-fixed', 'nav-visible')
        }
        $rightside.style.cssText = "opacity: ''; transform: ''"
    }
    if (document.body.scrollHeight <= innerHeight) {
        $rightside.style.cssText = 'opacity: 0.8; transform: translateX(-58px)'
    }
  }, 200))</script><script defer src=/libs/katex/katex.min.js></script><body><style>#loading-box{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#loading-box .loading-bg{background:var(--wjx-card-bg);z-index:1999;opacity:1;pointer-events:all;width:100%;height:100%;transition:all .2s;animation:.3s backwards showLoading;display:flex;position:fixed}#loading-box.loaded .loading-bg{pointer-events:none;transition:all .2s;animation:.3s forwards hideLoading}#loading-box .loading-img{width:100px;height:100px;margin:auto;animation-name:loadingAction;animation-duration:.2s;animation-iteration-count:infinite;animation-direction:alternate;overflow:hidden}#loading-box .loading-image-dot{background:#6bdf8f;border:6px solid #fff;border-radius:50%;width:30px;height:30px;position:absolute;top:50%;left:50%;-webkit-transform:translate(18px,24px);-moz-transform:translate(18px,24px);-ms-transform:translate(18px,24px);-o-transform:translate(18px,24px);transform:translate(18px,24px)}@keyframes loadingAction{0%{opacity:1}to{opacity:.6}}@keyframes hideLoading{0%{opacity:1}to{opacity:0}}@keyframes showLoading{0%{opacity:0}to{opacity:1}}</style><div id=loading-box onclick=wjx.hideLoading()><div class=loading-bg><picture class=loading-img style=border-radius:50%;width:100px;height:100px><source media="(min-width: 1em)" srcset=/processed_images/logo.21eeb8b123e2a315.avif><img alt=Loading decoding=async loading=lazy src=/processed_images/logo.caf14bfbf942dbfc.webp><noscript><img decoding=async loading=lazy src=/processed_images/logo.caf14bfbf942dbfc.webp></noscript></picture><div class=loading-image-dot></div></div></div><script>var preloader = {
            endLoading: () => {
                //- document.body.style.overflow = 'auto';
                document.getElementById('loading-box').classList.add("loaded")
            },
            initLoading: () => {
                //- document.body.style.overflow = '';
                document.getElementById('loading-box').classList.remove("loaded")
            }
        }
        window.addEventListener('load', preloader.endLoading())
        setTimeout(function () {
            preloader.endLoading();
        }, 3000)</script><div id=an_music_bg></div><div class=post data-type=post id=body-wrap><header class=post-bg id=page-header><nav class=show id=nav><div id=nav-group><div id=blog_name><div class=back-home-button tabindex=-1><i class="nav-icon back-home-button-icon icon-apps-fill" style=font-size:1rem></i><div class=back-menu-list-groups><div class=back-menu-list-group><div class=back-menu-list-title>ä½œå“</div><div class=back-menu-list><a class="back-menu-item nav-item" href=/articles/misc/lorem-ipsum>  <i class=icon-music style=font-size:.9em></i> <span class=back-menu-item-text>Lorem Ipsum</span> </a><a class="back-menu-item nav-item" href=/articles/misc/lorem-ipsum>  <i class=icon-music style=font-size:.9em></i> <span class=back-menu-item-text>Lorem Ipsum</span> </a></div></div></div></div><a class="nav-item icon-home" data-pjax href=/ id=site-name title=è¿”å›åšå®¢ä¸»é¡µ> <span>ByeIOÂ·å¼€å‘è€…åšå®¢</span> </a></div><div id=page-name-mask><div id=page-name><a clase=nav-item id=page-name-text onclick=btf.scrollToDest(0,500)> æŠ˜è…¾ç¬”è®°[11]-ä½¿ç”¨rustè¿›è¡Œç›´æ¥æ³•è§†è§‰é‡Œç¨‹è®¡ä¼°è®¡ </a></div></div><div id=menus><div class=menus_items><div class=menus_item><button class="site-page nav-item"><span>æ–‡åº“</span></button><div class=menus_item_child><div class=recursion_menus_item><a class="site-page child nav-item" href=/archives> <i class=icon-book-open style=font-size:.9em></i> <span>å…¨éƒ¨æ–‡ç« </span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=/categories> <i class=icon-folder-open style=font-size:.9em></i> <span>åˆ†ç±»åˆ—è¡¨</span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=/tags> <i class=icon-tags style=font-size:.9em></i> <span>æ ‡ç­¾åˆ—è¡¨</span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=javascript:toRandomPost()> <i class=icon-artstation style=font-size:.9em></i> <span>éšæœºæ–‡ç« </span> </a></div></div></div><div class=menus_item><a class="site-page nav-item" href=/tags/work> <span>æ¨è</span> </a><div class="menus_item_child vertical_nav"><div class=recursion_menus_item><a class="site-page child nav-item" href=/articles/docs/readme> <i class=icon-music style=font-size:.9em></i> <span>åšå®¢ä¸»é¢˜ä»‹ç»</span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=/articles/misc/lorem-ipsum> <i class=icon-music style=font-size:.9em></i> <span>Lorem Ipsum</span> </a></div></div></div><div class=menus_item><button class="site-page nav-item"><span>å‹é“¾</span></button><div class=menus_item_child><div class=recursion_menus_item><a class="site-page child nav-item" href=/friends> <i class=icon-link style=font-size:.9em></i> <span>å‹é“¾åˆ—è¡¨</span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=javascript:travelling()> <i class=icon-paper-plane style=font-size:.9em></i> <span>éšæœºå‘ç°</span> </a></div></div></div><div class=menus_item><button class="site-page nav-item"><span>æˆ‘çš„</span></button><div class=menus_item_child><div class=recursion_menus_item><a class="site-page child nav-item" href=/about> <i class=icon-rocket style=font-size:.9em></i> <span>å…³äºæœ¬äºº</span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=/equipment> <i class=icon-artstation style=font-size:.9em></i> <span>æˆ‘çš„è£…å¤‡</span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=/tags/project> <i class=icon-lightbulb style=font-size:.9em></i> <span>æˆ‘çš„é¡¹ç›®</span> </a></div></div></div></div></div><div id=nav-right><div class=nav-button id=randomPost_button><button class="site-page nav-item" href=javascript:void(0); onclick=toRandomPost() title=éšæœºæ–‡ç« ><i class="nav-icon icon-dice"></i></button></div><div class=nav-button id=darkmode_button><button class="site-page console_switchbutton nav-item" title="åˆ‡æ¢æ¨¡å¼ - æ—¥å¤œäº¤æ›¿ï¼Œé»‘ç™½äº’æ¢ã€‚" href=javascript:void(0); onclick=navFn.switchDarkMode();><i class="nav-icon icon-moon-clear-fill" style=font-size:1rem></i></button></div><div class=nav-button id=nav-console><button class="site-page console_switchbutton nav-item" href=javascript:void(0); onclick=wjx.showConsole() title=æ˜¾ç¤ºä¸­æ§å°><i class="nav-icon icon-dashboard"></i></button></div><div class=nav-button id=nav-totop onclick=btf.scrollToDest(0,500)><button class="totopbtn nav-item"><i class="nav-icon icon-arrow-up" style=font-size:1rem></i><span id=percent>0</span></button></div><div id=toggle-menu><button class="site-page nav-item"><i class="nav-icon icon-bars"></i></button></div></div></div></nav><div class="coverdiv loaded" id=coverdiv><img alt=cover class=nolazyload decoding=async id=post-cover loading=lazy src=/processed_images/img00006.c4abedc898f992a6.webp></div><div id=post-info><div id=post-firstinfo><div class=meta-firstline><a class=post-meta-original href=/copyright title=è¯¥æ–‡ç« ä¸ºåŸåˆ›æ–‡ç« ï¼Œæ³¨æ„ç‰ˆæƒåè®®>åŸåˆ›</a><span class=post-meta-categories> <a href=/categories/theme/ title=ä¸»é¢˜> ä¸»é¢˜ </a> </span><div class=tag_share><div class=post-meta__tag-list><a class=post-meta__tags href=/tags/blog/ title=åšå®¢> <span class="tags-name tags-punctuation">åšå®¢</span> </a><a class=post-meta__tags href=/tags/docs/ title=æ–‡æ¡£> <span class="tags-name tags-punctuation">æ–‡æ¡£</span> </a><a class=post-meta__tags href=/tags/featured/ title=å¿…çœ‹> <span class="tags-name tags-punctuation">å¿…çœ‹</span> </a><a class=post-meta__tags href=/tags/hot/ title=çƒ­é—¨> <span class="tags-name tags-punctuation">çƒ­é—¨</span> </a></div></div></div></div><h1 class=post-title>æŠ˜è…¾ç¬”è®°[11]-ä½¿ç”¨rustè¿›è¡Œç›´æ¥æ³•è§†è§‰é‡Œç¨‹è®¡ä¼°è®¡</h1><div id=post-meta><div class=meta-secondline><span class=post-meta-author data-flag-title=æ–‡ç« ä½œè€… title=æ–‡ç« ä½œè€…> <i class="icon-zuozhe post-meta-icon"></i>qsbye </span><span class=post-meta-wordcount> <i class="icon-file-word post-meta-icon" title=å­—æ•°></i> <span class=post-meta-label>å­—æ•°:</span> <span class=word-count>2227</span> <span class=post-meta-separator></span> <i class="icon-clock post-meta-icon" title=é˜…è¯»è€—æ—¶></i> <span class=post-meta-label>é˜…è¯»è€—æ—¶:</span> <span> 12 åˆ†é’Ÿ</span> </span><span class=post-meta-date> <i class="icon-calendar-days post-meta-icon"></i> <time title="2025-01-01 00:00:00" datetime=2025-01-01> 2025/01/01 </time> </span><span class=post-meta-wechat title=è¯¥æ–‡ç« åœ¨åšå®¢é¦–å‘> <i class="icon-rss post-meta-icon"></i>åšå®¢ç‹¬äº« </span><a class=post-meta-pv data-flag-title=çƒ­åº¦ title=çƒ­åº¦> <i class="icon-fire post-meta-icon"></i> <span class=post-meta-label>çƒ­åº¦:</span> <span id=twikoo_visitors> <i class="icon-spinner fa-spin"></i> </span> </a><a class=post-meta-commentcount data-flag-title=è¯„è®ºæ•° href=#post-comment title=è¯„è®ºæ•°> <i class="icon-chat--fill post-meta-icon" style=font-size:17px></i> <span class=post-meta-label>è¯„è®º:</span> <span id=twikoo-count> <i class="icon-spinner fa-spin"></i> </span> </a></div></div></div><section class="main-hero-waves-area waves-area"><svg viewbox="0 24 150 28" class=waves-svg preserveaspectratio=none shape-rendering=auto xlink=http://www.w3.org/1999/xlink xmlns=http://www.w3.org/2000/svg><defs><path d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z" id=gentle-wave></path></defs><g class=parallax><use href=#gentle-wave x=48 y=0></use><use href=#gentle-wave x=48 y=3></use><use href=#gentle-wave x=48 y=5></use><use href=#gentle-wave x=48 y=7></use></g></svg></section></header><main class="layout right-aside" id=content-inner><div id=post><div id=abstract-container><div class=abstract-title><i class=icon-bilibili></i><div class=abstract-title-text>æ–‡ç« æ‘˜è¦</div><div id=abstract-tag>æœ¬åœ°</div></div><div id=abstract-content style=display:block>ä½¿ç”¨rustå®ç°äº†ä¸€ä¸ªå®Œæ•´çš„ç›´æ¥æ³•è§†è§‰é‡Œç¨‹è®¡ç³»ç»Ÿï¼Œèƒ½å¤Ÿé€šè¿‡æ¯”è¾ƒä¸¤å¹…å›¾åƒä¸­çš„åƒç´ å¼ºåº¦æ¥ä¼°è®¡ç›¸æœºçš„è¿åŠ¨ã€‚å®ƒé€šè¿‡å•å±‚å’Œå¤šå±‚çš„ä¼˜åŒ–ç­–ç•¥ï¼Œç»“åˆå›¾åƒé‡‘å­—å¡”å’Œå¹¶è¡Œè®¡ç®—ï¼Œæé«˜äº†ä½å§¿ä¼°è®¡çš„ç²¾åº¦å’Œæ•ˆç‡ã€‚æœ€ç»ˆï¼Œä»£ç è¾“å‡ºäº†ä¼˜åŒ–åçš„ç›¸æœºä½å§¿å˜æ¢çŸ©é˜µï¼Œå¹¶å¯è§†åŒ–äº†æŠ•å½±ç‚¹çš„ä½ç½®ã€‚This is a complete direct method visual odometry system implemented in Rust, which estimates camera motion by comparing pixel intensities between two images. It employs both single-layer and multi-layer optimization strategies, combined with image pyramids and parallel computing, to enhance the accuracy and efficiency of pose estimation. Finally, the code outputs the optimized camera pose transformation matrix and visualizes the positions of the projected points.</div><div class=abstract-btn-box><div class=abstract-btn-item id=abstract-intro>ä»‹ç»è‡ªå·±</div><div class=abstract-btn-item id=abstract-generate>ç”Ÿæˆæœ¬æ–‡ç®€ä»‹</div><div class=abstract-btn-item id=abstract-recommend>æ¨èç›¸å…³æ–‡ç« </div><div class=abstract-btn-item id=abstract-home>å‰å¾€ä¸»é¡µ</div><div class=abstract-btn-item id=abstract-hide style=margin-left:auto>éšè—æœ¬æ‘˜è¦</div></div></div><div class="note simple warning" data-tip-enable=true data-update-date=2025-01-01 id=passage-tip></div><article class="post-content line-numbers" id=article-container><h2 id=zhai-yao>æ‘˜è¦</h2><p>ä½¿ç”¨rustå®ç°äº†ä¸€ä¸ªå®Œæ•´çš„ç›´æ¥æ³•è§†è§‰é‡Œç¨‹è®¡ç³»ç»Ÿï¼Œèƒ½å¤Ÿé€šè¿‡æ¯”è¾ƒä¸¤å¹…å›¾åƒä¸­çš„åƒç´ å¼ºåº¦æ¥ä¼°è®¡ç›¸æœºçš„è¿åŠ¨ã€‚å®ƒé€šè¿‡å•å±‚å’Œå¤šå±‚çš„ä¼˜åŒ–ç­–ç•¥ï¼Œç»“åˆå›¾åƒé‡‘å­—å¡”å’Œå¹¶è¡Œè®¡ç®—ï¼Œæé«˜äº†ä½å§¿ä¼°è®¡çš„ç²¾åº¦å’Œæ•ˆç‡ã€‚æœ€ç»ˆï¼Œä»£ç è¾“å‡ºäº†ä¼˜åŒ–åçš„ç›¸æœºä½å§¿å˜æ¢çŸ©é˜µï¼Œå¹¶å¯è§†åŒ–äº†æŠ•å½±ç‚¹çš„ä½ç½®ã€‚ This is a complete direct method visual odometry system implemented in Rust, which estimates camera motion by comparing pixel intensities between two images. It employs both single-layer and multi-layer optimization strategies, combined with image pyramids and parallel computing, to enhance the accuracy and efficiency of pose estimation. Finally, the code outputs the optimized camera pose transformation matrix and visualizes the positions of the projected points.<h2 id=guan-jian-ci>å…³é”®è¯</h2><p>rust;slam;visual odometry;<h2 id=guan-jian-xin-xi>å…³é”®ä¿¡æ¯</h2><p><strong>é¡¹ç›®åœ°å€</strong>:[https://github.com/ByeIO/slambook2.rs]<pre class=language-toml data-lang=toml><code class=language-toml data-lang=toml>[package]
name = "exp65-rust-ziglang-slambook2"
version = "0.1.0"
edition = "2021"

[dependencies]
env_logger = { version = "0.11.6", default-features = false, features = [
    "auto-color",
    "humantime",
] }

# éšæœºæ•°
rand = "0.8.5"
rand_distr = "0.4.3"
fastrand = "2.3.0"

# çº¿æ€§ä»£æ•°
nalgebra = { version = "0.33.2",features = ["rand"]}
ndarray = "0.16.1"

# winit
wgpu = "23.0.1"
winit = "0.30.8"

# egui
eframe = "0.30.0"
egui = { version = "0.30.0", features = [
    "default"
]}
egui_extras = {version = "0.30.0",features = ["default", "image"]}

# three_d
three-d = {path = "./static/three-d" , features=["egui-gui"] }
three-d-asset = {version = "0.9",features = ["hdr", "http"] }

# sophus
sophus = { version = "0.11.0" }
sophus_autodiff = { version = "0.11.0" }
sophus_geo = "0.11.0"
sophus_image = "0.11.0"
sophus_lie = "0.11.0"
sophus_opt = "0.11.0"
sophus_renderer = "0.11.0"
sophus_sensor = "0.11.0"
sophus_sim = "0.11.0"
sophus_spline = "0.11.0"
sophus_tensor = "0.11.0"
sophus_timeseries = "0.11.0"
sophus_viewer = "0.11.0"
tokio = "1.43.0"
approx = "0.5.1"
bytemuck = "1.21.0"
thingbuf = "0.1.6"

# rust-cvè®¡ç®—æœºè§†è§‰
cv = { version = "0.6.0" , features = ["default"] }
cv-core = "0.15.0"
cv-geom = "0.7.0"
cv-pinhole = "0.6.0"
akaze = "0.7.0"
eight-point = "0.8.0"
lambda-twist = "0.7.0"
image = "0.25.5"
imageproc = "0.25.0"

# æœ€å°äºŒä¹˜ä¼˜åŒ–
gomez = "0.5.0"

# å›¾ä¼˜åŒ–
factrs = "0.2.0"

# ORBè§’ç‚¹æ£€æµ‹
bye_orb_rs = { path = "./static/bye_orb_rs" }

# ä¾èµ–è¦†ç›–
[patch.crates-io]
pulp = { path = "./static/pulp" }
</code></pre><h2 id=yuan-li-jian-jie>åŸç†ç®€ä»‹</h2><h3 id=shi-jue-li-cheng-ji-jian-jie>è§†è§‰é‡Œç¨‹è®¡ç®€ä»‹</h3><p>è§†è§‰é‡Œç¨‹è®¡ï¼ˆVisual Odometry, VOï¼‰æ˜¯ä¸€ç§é€šè¿‡åˆ†æå›¾åƒåºåˆ—æ¥ä¼°è®¡ç›¸æœºè¿åŠ¨çš„æŠ€æœ¯ã€‚ä¸»è¦æœ‰ç›´æ¥æ³•å’Œå…‰æµæ³•ã€‚<h4 id=1-zhi-jie-fa>1. ç›´æ¥æ³•</h4><p>ç›´æ¥æ³•é€šè¿‡æœ€å°åŒ–å›¾åƒé—´çš„å…‰åº¦è¯¯å·®æ¥ä¼°è®¡ç›¸æœºè¿åŠ¨ã€‚å‡è®¾åœ¨å›¾åƒåºåˆ—ä¸­ï¼Œåƒç´ çš„å…‰åº¦å€¼åœ¨ç›¸é‚»å¸§ä¹‹é—´ä¿æŒä¸å˜ï¼Œå³ï¼š<p>$$ I_1(\mathbf{x}) = I_2(\mathbf{x} + \mathbf{d}) $$<p>å…¶ä¸­ï¼Œ$I_1$ å’Œ $I_2$ åˆ†åˆ«æ˜¯ç¬¬ä¸€å¸§å’Œç¬¬äºŒå¸§çš„å›¾åƒï¼Œ$\mathbf{x}$ æ˜¯åƒç´ åæ ‡ï¼Œ$\mathbf{d}$ æ˜¯åƒç´ çš„ä½ç§»ã€‚<p>ä¸ºäº†ä¼°è®¡ç›¸æœºçš„ä½å§¿å˜åŒ–ï¼Œæˆ‘ä»¬éœ€è¦æœ€å°åŒ–ä»¥ä¸‹å…‰åº¦è¯¯å·®ï¼š<p>$$ E(\mathbf{d}) = \sum_{\mathbf{x}} \left( I_1(\mathbf{x}) - I_2(\mathbf{x} + \mathbf{d}) \right)^2 $$<p>é€šè¿‡å¯¹è¯¯å·®å‡½æ•° $E(\mathbf{d})$ è¿›è¡Œä¼˜åŒ–ï¼Œå¯ä»¥å¾—åˆ°åƒç´ çš„ä½ç§» $\mathbf{d}$ï¼Œè¿›è€Œæ¨å¯¼å‡ºç›¸æœºçš„è¿åŠ¨ã€‚<h4 id=2-guang-liu-fa>2. å…‰æµæ³•</h4><p>å…‰æµæ³•é€šè¿‡ä¼°è®¡å›¾åƒåºåˆ—ä¸­åƒç´ çš„è¿åŠ¨çŸ¢é‡åœºæ¥æ¨æ–­ç›¸æœºè¿åŠ¨ã€‚å…‰æµæ³•å‡è®¾åœ¨çŸ­æ—¶é—´å†…ï¼Œå›¾åƒä¸­ç‰©ä½“çš„è¿åŠ¨æ˜¯å¹³æ»‘çš„ã€‚å…‰æµçº¦æŸæ–¹ç¨‹ä¸ºï¼š<p>$$ I(x, y, t) = I(x + u, y + v, t + 1) $$<p>å…¶ä¸­ï¼Œ$(u, v)$ æ˜¯å…‰æµçŸ¢é‡ï¼Œè¡¨ç¤ºåƒç´ åœ¨å›¾åƒå¹³é¢ä¸Šçš„ä½ç§»ã€‚<p>ä¸ºäº†æ±‚è§£å…‰æµçŸ¢é‡ï¼Œé€šå¸¸ä½¿ç”¨æ³°å‹’å±•å¼€å¯¹ä¸Šè¿°æ–¹ç¨‹è¿›è¡Œçº¿æ€§åŒ–ï¼Œå¾—åˆ°ï¼š<p>$$ \frac{\partial I}{\partial x} u + \frac{\partial I}{\partial y} v + \frac{\partial I}{\partial t} = 0 $$<p>è¿™ä¸ªæ–¹ç¨‹ç§°ä¸ºå…‰æµçº¦æŸæ–¹ç¨‹ã€‚é€šè¿‡å¯¹å¤šä¸ªåƒç´ ç‚¹çš„å…‰æµçº¦æŸæ–¹ç¨‹è¿›è¡Œæ±‚è§£ï¼Œå¯ä»¥å¾—åˆ°æ•´ä¸ªå›¾åƒçš„å…‰æµåœºã€‚<p>è¿™ä¸¤ç§æ–¹æ³•å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œç›´æ¥æ³•åˆ©ç”¨äº†å›¾åƒçš„å…¨éƒ¨åƒç´ ä¿¡æ¯ï¼Œé€‚ç”¨äºçº¹ç†ä¸°å¯Œçš„åœºæ™¯ï¼›è€Œå…‰æµæ³•é€‚ç”¨äºå®æ—¶åº”ç”¨ï¼Œè®¡ç®—ç›¸å¯¹ç®€å•ã€‚<h3 id=ya-ke-bi-ju-zhen-jian-jie>é›…å¯æ¯”çŸ©é˜µç®€ä»‹</h3><p>é›…å¯æ¯”çŸ©é˜µï¼ˆJacobian Matrixï¼‰æ˜¯ä¸€ä¸ªé‡è¦çš„æ•°å­¦å·¥å…·ï¼Œç”¨äºæè¿°å¤šå˜é‡å‡½æ•°çš„åå¯¼æ•°ã€‚å®ƒåœ¨è®¸å¤šé¢†åŸŸä¸­éƒ½æœ‰åº”ç”¨ï¼ŒåŒ…æ‹¬ä¼˜åŒ–ã€æ§åˆ¶ç†è®ºå’Œè®¡ç®—æœºè§†è§‰ç­‰ã€‚<h4 id=1-ya-ke-bi-ju-zhen-de-ding-yi>1. é›…å¯æ¯”çŸ©é˜µçš„å®šä¹‰</h4><p>å¯¹äºä¸€ä¸ªå‘é‡å€¼å‡½æ•° $\mathbf{f} : \mathbb{R}^n \to \mathbb{R}^m$ï¼Œå…¶é›…å¯æ¯”çŸ©é˜µæ˜¯ä¸€ä¸ª $m \times n$ çš„çŸ©é˜µï¼ŒçŸ©é˜µä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯å‡½æ•° $\mathbf{f}$ çš„åˆ†é‡å¯¹è¾“å…¥å˜é‡çš„åå¯¼æ•°ã€‚å…·ä½“æ¥è¯´ï¼Œé›…å¯æ¯”çŸ©é˜µ $J$ çš„å…ƒç´  $J_{ij}$ æ˜¯å‡½æ•° $\mathbf{f}_i$ å¯¹å˜é‡ $x_j$ çš„åå¯¼æ•°ï¼š<p>$$ J_{ij} = \frac{\partial \mathbf{f}_i}{\partial x_j} $$<p>å› æ­¤ï¼Œé›…å¯æ¯”çŸ©é˜µå¯ä»¥è¡¨ç¤ºä¸ºï¼š<p>$$ J = \begin{bmatrix} \frac{\partial \mathbf{f}_1}{\partial x_1} & \cdots & \frac{\partial \mathbf{f}_1}{\partial x_n} \ \vdots & \ddots & \vdots \ \frac{\partial \mathbf{f}_m}{\partial x_1} & \cdots & \frac{\partial \mathbf{f}_m}{\partial x_n} \end{bmatrix} $$<h4 id=2-ying-yong>2. åº”ç”¨</h4><ol><li><p><strong>ä¼˜åŒ–é—®é¢˜</strong>ï¼šåœ¨ä¼˜åŒ–é—®é¢˜ä¸­ï¼Œé›…å¯æ¯”çŸ©é˜µç”¨äºæè¿°ç›®æ ‡å‡½æ•°çš„æ¢¯åº¦ä¿¡æ¯ï¼Œå¸®åŠ©ä¼˜åŒ–ç®—æ³•æ‰¾åˆ°å‡½æ•°çš„æå€¼ç‚¹ã€‚</p><li><p><strong>éçº¿æ€§æ–¹ç¨‹ç»„æ±‚è§£</strong>ï¼šåœ¨æ±‚è§£éçº¿æ€§æ–¹ç¨‹ç»„æ—¶ï¼Œé›…å¯æ¯”çŸ©é˜µç”¨äºçº¿æ€§åŒ–æ–¹ç¨‹ç»„ï¼Œä»è€Œåº”ç”¨è¿­ä»£æ–¹æ³•ï¼ˆå¦‚ç‰›é¡¿æ³•ï¼‰è¿›è¡Œæ±‚è§£ã€‚</p><li><p><strong>è®¡ç®—æœºè§†è§‰</strong>ï¼šåœ¨è®¡ç®—æœºè§†è§‰ä¸­ï¼Œé›…å¯æ¯”çŸ©é˜µç”¨äºæè¿°å›¾åƒåæ ‡å˜åŒ–å¯¹ç›¸æœºå‚æ•°å˜åŒ–çš„æ•æ„Ÿæ€§ï¼Œå¸¸ç”¨äºè§†è§‰é‡Œç¨‹è®¡å’Œä¸‰ç»´é‡å»ºç­‰åº”ç”¨ã€‚</p></ol><p>é›…å¯æ¯”çŸ©é˜µæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°æè¿°å¤šå˜é‡å‡½æ•°çš„å±€éƒ¨çº¿æ€§è¿‘ä¼¼ï¼Œä»è€Œåœ¨è®¸å¤šå®é™…é—®é¢˜ä¸­å‘æŒ¥é‡è¦ä½œç”¨ã€‚<h3 id=tu-xiang-jin-zi-ta-jian-jie>å›¾åƒé‡‘å­—å¡”ç®€ä»‹</h3><p>å›¾åƒé‡‘å­—å¡”æ˜¯ä¸€ç§å¤šåˆ†è¾¨ç‡å›¾åƒè¡¨ç¤ºæ–¹æ³•ï¼Œé€šè¿‡å°†å›¾åƒé€å±‚ç¼©å°ï¼Œå½¢æˆä¸€ç³»åˆ—ä¸åŒåˆ†è¾¨ç‡çš„å›¾åƒã€‚å›¾åƒé‡‘å­—å¡”åœ¨è®¡ç®—æœºè§†è§‰ä¸­æœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨å›¾åƒå¤„ç†ã€ç‰¹å¾æ£€æµ‹å’ŒåŒ¹é…ç­‰é¢†åŸŸã€‚<h4 id=1-tu-xiang-jin-zi-ta-de-lei-xing>1. å›¾åƒé‡‘å­—å¡”çš„ç±»å‹</h4><ol><li><p><strong>é«˜æ–¯é‡‘å­—å¡”ï¼ˆGaussian Pyramidï¼‰</strong>ï¼š</p> <ul><li>é€šè¿‡å¯¹å›¾åƒè¿›è¡Œé«˜æ–¯æ¨¡ç³Šï¼Œç„¶åä¸‹é‡‡æ ·ï¼ˆé€šå¸¸æ˜¯ç¼©å°ä¸€åŠï¼‰æ¥æ„å»ºã€‚<li>æ¯ä¸€å±‚éƒ½æ˜¯ä¸Šä¸€å±‚çš„ä½é€šæ»¤æ³¢ç‰ˆæœ¬ï¼Œä¸»è¦ç”¨äºå›¾åƒå¹³æ»‘å’Œé™å™ªã€‚</ul><li><p><strong>æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”ï¼ˆLaplacian Pyramidï¼‰</strong>ï¼š</p> <ul><li>ç”±é«˜æ–¯é‡‘å­—å¡”æ„å»ºï¼Œé€šè¿‡ä»æ¯ä¸€å±‚çš„é«˜æ–¯é‡‘å­—å¡”ä¸­å‡å»å…¶ä¸‹ä¸€å±‚çš„ä¸Šé‡‡æ ·ç‰ˆæœ¬å¾—åˆ°ã€‚<li>ç”¨äºå›¾åƒçš„è¾¹ç¼˜æ£€æµ‹å’Œå¢å¼ºã€‚</ul></ol><h4 id=2-tu-xiang-jin-zi-ta-de-gou-jian>2. å›¾åƒé‡‘å­—å¡”çš„æ„å»º</h4><p>åœ¨ä»£ç ä¸­ï¼Œå›¾åƒé‡‘å­—å¡”çš„æ„å»ºè¿‡ç¨‹å¦‚ä¸‹ï¼š<pre class=language-cpp data-lang=cpp><code class=language-cpp data-lang=cpp>// create pyramids
vector&LTcv::Mat> pyr1, pyr2; // image pyramids
for (int i = 0; i < pyramids; i++) {
    if (i == 0) {
        pyr1.push_back(img1);
        pyr2.push_back(img2);
    } else {
        cv::Mat img1_pyr, img2_pyr;
        cv::resize(pyr1[i - 1], img1_pyr,
                   cv::Size(pyr1[i - 1].cols * pyramid_scale, pyr1[i - 1].rows * pyramid_scale));
        cv::resize(pyr2[i - 1], img2_pyr,
                   cv::Size(pyr2[i - 1].cols * pyramid_scale, pyr2[i - 1].rows * pyramid_scale));
        pyr1.push_back(img1_pyr);
        pyr2.push_back(img2_pyr);
    }
}
</code></pre><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå›¾åƒè¢«é€å±‚ç¼©å°ï¼Œå½¢æˆä¸€ä¸ªé‡‘å­—å¡”ç»“æ„ã€‚æ¯ä¸€å±‚çš„å›¾åƒåˆ†è¾¨ç‡æ˜¯ä¸Šä¸€å±‚çš„ <code>pyramid_scale</code> å€ï¼ˆé€šå¸¸æ˜¯0.5ï¼‰ï¼Œå³æ¯å±‚çš„å®½åº¦å’Œé«˜åº¦éƒ½æ˜¯ä¸Šä¸€å±‚çš„ä¸€åŠã€‚<h4 id=3-ying-yong>3. åº”ç”¨</h4><ul><li><strong>ç‰¹å¾æ£€æµ‹å’ŒåŒ¹é…</strong>ï¼šåœ¨ä¸åŒåˆ†è¾¨ç‡ä¸‹æ£€æµ‹ç‰¹å¾ï¼Œå¯ä»¥æé«˜ç‰¹å¾åŒ¹é…çš„é²æ£’æ€§ã€‚<li><strong>å›¾åƒèåˆ</strong>ï¼šåœ¨å¤šåˆ†è¾¨ç‡ä¸‹è¿›è¡Œå›¾åƒèåˆï¼Œå¯ä»¥å‡å°‘èåˆè¿‡ç¨‹ä¸­çš„ä¼ªå½±ã€‚<li><strong>å›¾åƒå‹ç¼©</strong>ï¼šé€šè¿‡é‡‘å­—å¡”ç»“æ„ï¼Œå¯ä»¥å®ç°å›¾åƒçš„æ¸è¿›å¼ä¼ è¾“å’Œå‹ç¼©ã€‚</ul><p>å›¾åƒé‡‘å­—å¡”é€šè¿‡æä¾›å¤šåˆ†è¾¨ç‡çš„å›¾åƒè¡¨ç¤ºï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°å¤„ç†ä¸åŒå°ºåº¦ä¸‹çš„å›¾åƒä¿¡æ¯ï¼Œæ˜¯è®¡ç®—æœºè§†è§‰ä¸­ä¸€ä¸ªé‡è¦çš„å·¥å…·ã€‚<h3 id=tu-xiang-shuang-xian-xing-cha-zhi-jian-jie>å›¾åƒåŒçº¿æ€§æ’å€¼ç®€ä»‹</h3><p>åŒçº¿æ€§æ’å€¼æ˜¯ä¸€ç§ç”¨äºå›¾åƒå¤„ç†çš„æ’å€¼æ–¹æ³•ï¼Œç”¨äºåœ¨å›¾åƒç¼©æ”¾ã€æ—‹è½¬æˆ–å˜å½¢æ—¶è®¡ç®—éæ•´æ•°åƒç´ ä½ç½®çš„åƒç´ å€¼ã€‚å®ƒé€šè¿‡å¯¹å‘¨å›´çš„å››ä¸ªåƒç´ è¿›è¡ŒåŠ æƒå¹³å‡æ¥ä¼°è®¡ç›®æ ‡åƒç´ çš„å€¼ã€‚<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå›¾åƒï¼Œç›®æ ‡æ˜¯è®¡ç®—ä½ç½® $(x, y)$ çš„åƒç´ å€¼ï¼Œå…¶ä¸­ $x$ å’Œ $y$ ä¸æ˜¯æ•´æ•°ã€‚åŒçº¿æ€§æ’å€¼çš„æ­¥éª¤å¦‚ä¸‹ï¼š<ol><li><p><strong>ç¡®å®šé‚»è¿‘çš„å››ä¸ªåƒç´ </strong>ï¼š</p> <ul><li>æ‰¾åˆ°åŒ…å« $(x, y)$ çš„å››ä¸ªæœ€è¿‘çš„æ•´æ•°åƒç´ ç‚¹ï¼š$(x_1, y_1)$ã€$(x_1+1, y_1)$ã€$(x_1, y_1+1)$ã€$(x_1+1, y_1+1)$ã€‚</ul><li><p><strong>è®¡ç®—æ°´å¹³æ’å€¼</strong>ï¼š</p> <ul><li>å¯¹ $x$ æ–¹å‘è¿›è¡Œæ’å€¼ï¼Œå¾—åˆ°ä¸¤ä¸ªä¸­é—´å€¼ï¼š $$ f(x, y_1) = (x_1+1 - x) \cdot f(x_1, y_1) + (x - x_1) \cdot f(x_1+1, y_1) $$ $$ f(x, y_1+1) = (x_1+1 - x) \cdot f(x_1, y_1+1) + (x - x_1) \cdot f(x_1+1, y_1+1) $$</ul><li><p><strong>è®¡ç®—å‚ç›´æ’å€¼</strong>ï¼š</p> <ul><li>å¯¹ $y$ æ–¹å‘è¿›è¡Œæ’å€¼ï¼Œå¾—åˆ°æœ€ç»ˆçš„æ’å€¼å€¼ï¼š $$ f(x, y) = (y_1+1 - y) \cdot f(x, y_1) + (y - y_1) \cdot f(x, y_1+1) $$</ul></ol><h2 id=shi-xian>å®ç°</h2><ol><li>åŸå§‹cppä»£ç [https://github.com/gaoxiang12/slambook2/blob/master/ch8/direct_method.cpp]</ol><pre class=language-cpp data-lang=cpp><code class=language-cpp data-lang=cpp>#include &LTopencv2/opencv.hpp>
#include &LTsophus/se3.hpp>
#include &LTboost/format.hpp>
#include &LTpangolin/pangolin.h>

using namespace std;

typedef vector&LTEigen::Vector2d, Eigen::aligned_allocator&LTEigen::Vector2d>> VecVector2d;

// Camera intrinsics
double fx = 718.856, fy = 718.856, cx = 607.1928, cy = 185.2157;
// baseline
double baseline = 0.573;
// paths
string left_file = "./left.png";
string disparity_file = "./disparity.png";
boost::format fmt_others("./%06d.png");    // other files

// useful typedefs
typedef Eigen::Matrix&LTdouble, 6, 6> Matrix6d;
typedef Eigen::Matrix&LTdouble, 2, 6> Matrix26d;
typedef Eigen::Matrix&LTdouble, 6, 1> Vector6d;

/// class for accumulator jacobians in parallel
class JacobianAccumulator {
public:
    JacobianAccumulator(
        const cv::Mat &img1_,
        const cv::Mat &img2_,
        const VecVector2d &px_ref_,
        const vector&LTdouble> depth_ref_,
        Sophus::SE3d &T21_) :
        img1(img1_), img2(img2_), px_ref(px_ref_), depth_ref(depth_ref_), T21(T21_) {
        projection = VecVector2d(px_ref.size(), Eigen::Vector2d(0, 0));
    }

    /// accumulate jacobians in a range
    void accumulate_jacobian(const cv::Range &range);

    /// get hessian matrix
    Matrix6d hessian() const { return H; }

    /// get bias
    Vector6d bias() const { return b; }

    /// get total cost
    double cost_func() const { return cost; }

    /// get projected points
    VecVector2d projected_points() const { return projection; }

    /// reset h, b, cost to zero
    void reset() {
        H = Matrix6d::Zero();
        b = Vector6d::Zero();
        cost = 0;
    }

private:
    const cv::Mat &img1;
    const cv::Mat &img2;
    const VecVector2d &px_ref;
    const vector&LTdouble> depth_ref;
    Sophus::SE3d &T21;
    VecVector2d projection; // projected points

    std::mutex hessian_mutex;
    Matrix6d H = Matrix6d::Zero();
    Vector6d b = Vector6d::Zero();
    double cost = 0;
};

/**
 * pose estimation using direct method
 * @param img1
 * @param img2
 * @param px_ref
 * @param depth_ref
 * @param T21
 */
void DirectPoseEstimationMultiLayer(
    const cv::Mat &img1,
    const cv::Mat &img2,
    const VecVector2d &px_ref,
    const vector&LTdouble> depth_ref,
    Sophus::SE3d &T21
);

/**
 * pose estimation using direct method
 * @param img1
 * @param img2
 * @param px_ref
 * @param depth_ref
 * @param T21
 */
void DirectPoseEstimationSingleLayer(
    const cv::Mat &img1,
    const cv::Mat &img2,
    const VecVector2d &px_ref,
    const vector&LTdouble> depth_ref,
    Sophus::SE3d &T21
);

// bilinear interpolation
inline float GetPixelValue(const cv::Mat &img, float x, float y) {
    // boundary check
    if (x < 0) x = 0;
    if (y < 0) y = 0;
    if (x >= img.cols) x = img.cols - 1;
    if (y >= img.rows) y = img.rows - 1;
    uchar *data = &img.data[int(y) * img.step + int(x)];
    float xx = x - floor(x);
    float yy = y - floor(y);
    return float(
        (1 - xx) * (1 - yy) * data[0] +
        xx * (1 - yy) * data[1] +
        (1 - xx) * yy * data[img.step] +
        xx * yy * data[img.step + 1]
    );
}

int main(int argc, char **argv) {

    cv::Mat left_img = cv::imread(left_file, 0);
    cv::Mat disparity_img = cv::imread(disparity_file, 0);

    // let's randomly pick pixels in the first image and generate some 3d points in the first image's frame
    cv::RNG rng;
    int nPoints = 2000;
    int boarder = 20;
    VecVector2d pixels_ref;
    vector&LTdouble> depth_ref;

    // generate pixels in ref and load depth data
    for (int i = 0; i < nPoints; i++) {
        int x = rng.uniform(boarder, left_img.cols - boarder);  // don't pick pixels close to boarder
        int y = rng.uniform(boarder, left_img.rows - boarder);  // don't pick pixels close to boarder
        int disparity = disparity_img.at&LTuchar>(y, x);
        double depth = fx * baseline / disparity; // you know this is disparity to depth
        depth_ref.push_back(depth);
        pixels_ref.push_back(Eigen::Vector2d(x, y));
    }

    // estimates 01~05.png's pose using this information
    Sophus::SE3d T_cur_ref;

    for (int i = 1; i < 6; i++) {  // 1~10
        cv::Mat img = cv::imread((fmt_others % i).str(), 0);
        // try single layer by uncomment this line
        // DirectPoseEstimationSingleLayer(left_img, img, pixels_ref, depth_ref, T_cur_ref);
        DirectPoseEstimationMultiLayer(left_img, img, pixels_ref, depth_ref, T_cur_ref);
    }
    return 0;
}

void DirectPoseEstimationSingleLayer(
    const cv::Mat &img1,
    const cv::Mat &img2,
    const VecVector2d &px_ref,
    const vector&LTdouble> depth_ref,
    Sophus::SE3d &T21) {

    const int iterations = 10;
    double cost = 0, lastCost = 0;
    auto t1 = chrono::steady_clock::now();
    JacobianAccumulator jaco_accu(img1, img2, px_ref, depth_ref, T21);

    for (int iter = 0; iter < iterations; iter++) {
        jaco_accu.reset();
        cv::parallel_for_(cv::Range(0, px_ref.size()),
                          std::bind(&JacobianAccumulator::accumulate_jacobian, &jaco_accu, std::placeholders::_1));
        Matrix6d H = jaco_accu.hessian();
        Vector6d b = jaco_accu.bias();

        // solve update and put it into estimation
        Vector6d update = H.ldlt().solve(b);;
        T21 = Sophus::SE3d::exp(update) * T21;
        cost = jaco_accu.cost_func();

        if (std::isnan(update[0])) {
            // sometimes occurred when we have a black or white patch and H is irreversible
            cout << "update is nan" << endl;
            break;
        }
        if (iter > 0 && cost > lastCost) {
            cout << "cost increased: " << cost << ", " << lastCost << endl;
            break;
        }
        if (update.norm() < 1e-3) {
            // converge
            break;
        }

        lastCost = cost;
        cout << "iteration: " << iter << ", cost: " << cost << endl;
    }

    cout << "T21 = \n" << T21.matrix() << endl;
    auto t2 = chrono::steady_clock::now();
    auto time_used = chrono::duration_cast&LTchrono::duration&LTdouble>>(t2 - t1);
    cout << "direct method for single layer: " << time_used.count() << endl;

    // plot the projected pixels here
    cv::Mat img2_show;
    cv::cvtColor(img2, img2_show, CV_GRAY2BGR);
    VecVector2d projection = jaco_accu.projected_points();
    for (size_t i = 0; i < px_ref.size(); ++i) {
        auto p_ref = px_ref[i];
        auto p_cur = projection[i];
        if (p_cur[0] > 0 && p_cur[1] > 0) {
            cv::circle(img2_show, cv::Point2f(p_cur[0], p_cur[1]), 2, cv::Scalar(0, 250, 0), 2);
            cv::line(img2_show, cv::Point2f(p_ref[0], p_ref[1]), cv::Point2f(p_cur[0], p_cur[1]),
                     cv::Scalar(0, 250, 0));
        }
    }
    cv::imshow("current", img2_show);
    cv::waitKey();
}

void JacobianAccumulator::accumulate_jacobian(const cv::Range &range) {

    // parameters
    const int half_patch_size = 1;
    int cnt_good = 0;
    Matrix6d hessian = Matrix6d::Zero();
    Vector6d bias = Vector6d::Zero();
    double cost_tmp = 0;

    for (size_t i = range.start; i < range.end; i++) {

        // compute the projection in the second image
        Eigen::Vector3d point_ref =
            depth_ref[i] * Eigen::Vector3d((px_ref[i][0] - cx) / fx, (px_ref[i][1] - cy) / fy, 1);
        Eigen::Vector3d point_cur = T21 * point_ref;
        if (point_cur[2] < 0)   // depth invalid
            continue;

        float u = fx * point_cur[0] / point_cur[2] + cx, v = fy * point_cur[1] / point_cur[2] + cy;
        if (u < half_patch_size || u > img2.cols - half_patch_size || v < half_patch_size ||
            v > img2.rows - half_patch_size)
            continue;

        projection[i] = Eigen::Vector2d(u, v);
        double X = point_cur[0], Y = point_cur[1], Z = point_cur[2],
            Z2 = Z * Z, Z_inv = 1.0 / Z, Z2_inv = Z_inv * Z_inv;
        cnt_good++;

        // and compute error and jacobian
        for (int x = -half_patch_size; x <= half_patch_size; x++)
            for (int y = -half_patch_size; y <= half_patch_size; y++) {

                double error = GetPixelValue(img1, px_ref[i][0] + x, px_ref[i][1] + y) -
                               GetPixelValue(img2, u + x, v + y);
                Matrix26d J_pixel_xi;
                Eigen::Vector2d J_img_pixel;

                J_pixel_xi(0, 0) = fx * Z_inv;
                J_pixel_xi(0, 1) = 0;
                J_pixel_xi(0, 2) = -fx * X * Z2_inv;
                J_pixel_xi(0, 3) = -fx * X * Y * Z2_inv;
                J_pixel_xi(0, 4) = fx + fx * X * X * Z2_inv;
                J_pixel_xi(0, 5) = -fx * Y * Z_inv;

                J_pixel_xi(1, 0) = 0;
                J_pixel_xi(1, 1) = fy * Z_inv;
                J_pixel_xi(1, 2) = -fy * Y * Z2_inv;
                J_pixel_xi(1, 3) = -fy - fy * Y * Y * Z2_inv;
                J_pixel_xi(1, 4) = fy * X * Y * Z2_inv;
                J_pixel_xi(1, 5) = fy * X * Z_inv;

                J_img_pixel = Eigen::Vector2d(
                    0.5 * (GetPixelValue(img2, u + 1 + x, v + y) - GetPixelValue(img2, u - 1 + x, v + y)),
                    0.5 * (GetPixelValue(img2, u + x, v + 1 + y) - GetPixelValue(img2, u + x, v - 1 + y))
                );

                // total jacobian
                Vector6d J = -1.0 * (J_img_pixel.transpose() * J_pixel_xi).transpose();

                hessian += J * J.transpose();
                bias += -error * J;
                cost_tmp += error * error;
            }
    }

    if (cnt_good) {
        // set hessian, bias and cost
        unique_lock&LTmutex> lck(hessian_mutex);
        H += hessian;
        b += bias;
        cost += cost_tmp / cnt_good;
    }
}

void DirectPoseEstimationMultiLayer(
    const cv::Mat &img1,
    const cv::Mat &img2,
    const VecVector2d &px_ref,
    const vector&LTdouble> depth_ref,
    Sophus::SE3d &T21) {

    // parameters
    int pyramids = 4;
    double pyramid_scale = 0.5;
    double scales[] = {1.0, 0.5, 0.25, 0.125};

    // create pyramids
    vector&LTcv::Mat> pyr1, pyr2; // image pyramids
    for (int i = 0; i < pyramids; i++) {
        if (i == 0) {
            pyr1.push_back(img1);
            pyr2.push_back(img2);
        } else {
            cv::Mat img1_pyr, img2_pyr;
            cv::resize(pyr1[i - 1], img1_pyr,
                       cv::Size(pyr1[i - 1].cols * pyramid_scale, pyr1[i - 1].rows * pyramid_scale));
            cv::resize(pyr2[i - 1], img2_pyr,
                       cv::Size(pyr2[i - 1].cols * pyramid_scale, pyr2[i - 1].rows * pyramid_scale));
            pyr1.push_back(img1_pyr);
            pyr2.push_back(img2_pyr);
        }
    }

    double fxG = fx, fyG = fy, cxG = cx, cyG = cy;  // backup the old values
    for (int level = pyramids - 1; level >= 0; level--) {
        VecVector2d px_ref_pyr; // set the keypoints in this pyramid level
        for (auto &px: px_ref) {
            px_ref_pyr.push_back(scales[level] * px);
        }

        // scale fx, fy, cx, cy in different pyramid levels
        fx = fxG * scales[level];
        fy = fyG * scales[level];
        cx = cxG * scales[level];
        cy = cyG * scales[level];
        DirectPoseEstimationSingleLayer(pyr1[level], pyr2[level], px_ref_pyr, depth_ref, T21);
    }

}
</code></pre><ol start=2><li>é‡æ„çš„rustä»£ç </ol><pre class=language-rs data-lang=rs><code class=language-rs data-lang=rs>#![allow(dead_code)]
#![allow(unused_variables)]
#![allow(unused_imports)]
#![allow(unused_mut)]
#![allow(unused_assignments)]
#![cfg_attr(not(debug_assertions), windows_subsystem = "windows")]
#![allow(rustdoc::missing_crate_level_docs)]
#![allow(unsafe_code)]
#![allow(clippy::undocumented_unsafe_blocks)]
#![allow(unused_must_use)]
#![allow(non_snake_case)]

// çº¿æ€§ä»£æ•°
use nalgebra::{
    DMatrix, DVector, Matrix3, Vector3, 
    Vector2, Matrix6, Vector6, Matrix2x6, 
    SMatrix, SVector
};

// å›¾åƒå¤„ç†
use image::{
    open, ImageBuffer, Rgb, DynamicImage, Luma, RgbImage,
    buffer::ConvertBuffer
};
use imageproc::{
    drawing::draw_cross_mut, drawing::draw_line_segment_mut
};

// ORBè§’ç‚¹æ£€æµ‹
use bye_orb_rs::{
    orb, fast, common::Matchable
};

// å›¾ä¼˜åŒ–
use factrs::{
    assign_symbols,
    core::{BetweenResidual, GaussNewton, Graph, Values},
    dtype, fac,
    linalg::{Const, ForwardProp, Numeric, NumericalDiff, VectorX, DiffResult, MatrixX},
    residuals::Residual1,
    traits::*,
    variables::{VectorVar2, SE2, VectorVar3, SE3, SO2, SO3, MatrixLieGroup},
    containers::Key,
    noise::{GaussianNoise}
};

// éšæœºæ•°
use rand::{
    Rng, SeedableRng
};
use rand::distributions::{
    Distribution, Uniform
};

// æ—¶é—´
use std::time::Instant;

// å¼•ç”¨å•å…ƒ
use std::cell::RefCell;

// å®šä¹‰ç¬¦å·å˜é‡
assign_symbols!(_X_: VectorVar3);
assign_symbols!(_Y_: SE2);
assign_symbols!(_Z_: SE3);

// ç›¸æœºå†…å‚
const FX: f64 = 718.856;
const FY: f64 = 718.856;
const CX: f64 = 607.1928;
const CY: f64 = 185.2157;
// åŸºçº¿
const BASELINE: f64 = 0.573;

// åŒçº¿æ€§æ’å€¼
fn get_pixel_value(img: &ImageBuffer&LTLuma&LTu8>, Vec&LTu8>>, x: f64, y: f64) -> f64 {
    let mut x = x;
    let mut y = y;
    
    // è¾¹ç•Œæ£€æŸ¥
    if x < 0.0 {
        x = 0.0;
    }
    if y < 0.0 {
        y = 0.0;
    }
    if x >= img.width() as f64 - 1.0 {
        x = img.width() as f64 - 1.0;
    }
    if y >= img.height() as f64 - 1.0 {
        y = img.height() as f64 - 1.0;
    }

    let x_floor = x.floor() as u32;
    let y_floor = y.floor() as u32;
    let xx = x - x_floor as f64;
    let yy = y - y_floor as f64;

    // ç¡®ä¿ä¸è¶Šç•Œ
    let x_ceil = (x_floor + 1).min(img.width() - 1);
    let y_ceil = (y_floor + 1).min(img.height() - 1);

    let data = |x: u32, y: u32| img.get_pixel(x, y)[0] as f64;

    (1.0 - xx) * (1.0 - yy) * data(x_floor, y_floor) +
    xx * (1.0 - yy) * data(x_ceil, y_floor) +
    (1.0 - xx) * yy * data(x_floor, y_ceil) +
    xx * yy * data(x_ceil, y_ceil)
}

// ç”¨äºå¹¶è¡Œç´¯åŠ é›…å¯æ¯”çŸ©é˜µçš„ç»“æ„ä½“
struct JacobianAccumulator<'a> {
    img1: &'a ImageBuffer&LTLuma&LTu8>, Vec&LTu8>>,
    img2: &'a ImageBuffer&LTLuma&LTu8>, Vec&LTu8>>,
    px_ref: &'a Vec&LTVector2&LTf64>>,
    depth_ref: &'a Vec&LTf64>,
    T21: &'a mut SE3&LTf64>,
    projection: Vec&LTVector2&LTf64>>,
    H: Matrix6&LTf64>,
    b: Vector6&LTf64>,
    cost: f64,
}

impl<'a> JacobianAccumulator<'a> {
    fn new(
        img1: &'a ImageBuffer&LTLuma&LTu8>, Vec&LTu8>>,
        img2: &'a ImageBuffer&LTLuma&LTu8>, Vec&LTu8>>,
        px_ref: &'a Vec&LTVector2&LTf64>>,
        depth_ref: &'a Vec&LTf64>,
        T21: &'a mut SE3&LTf64>
    ) -> Self {
        let projection = vec![Vector2::zeros(); px_ref.len()];
        Self {
            img1,
            img2,
            px_ref,
            depth_ref,
            T21,
            projection,
            H: Matrix6::zeros(),
            b: Vector6::zeros(),
            cost: 0.0,
        }
    }

    fn accumulate_jacobian(&mut self, range: std::ops::Range&LTusize>) {
        let half_patch_size = 1;  
        let mut cnt_good = 0;
        let mut hessian = Matrix6::zeros();
        let mut bias = Vector6::zeros();
        let mut cost_tmp = 0.0;

        for i in range {
            // è®¡ç®—åœ¨ç¬¬äºŒå¼ å›¾åƒä¸­çš„æŠ•å½±
            let point_ref = self.depth_ref[i] * Vector3::new(
                (self.px_ref[i].x - CX) / FX,
                (self.px_ref[i].y - CY) / FY,
                1.0
            );
            let point_cur = self.T21.apply(point_ref.as_view());
            if point_cur[2] < 0.0 {   // æ·±åº¦æ— æ•ˆ
                continue;
            }

            let u = FX * point_cur[0] / point_cur[2] + CX;
            let v = FY * point_cur[1] / point_cur[2] + CY;
            if u < half_patch_size as f64 || u > (self.img2.width() - half_patch_size) as f64 ||
                v < half_patch_size as f64 || v > (self.img2.height() - half_patch_size) as f64 {
                continue;
            }

            self.projection[i] = Vector2::new(u, v);
            let X = point_cur[0];
            let Y = point_cur[1];
            let Z = point_cur[2];
            let Z2 = Z * Z;
            let Z_inv = 1.0 / Z;
            let Z2_inv = Z_inv * Z_inv;
            cnt_good += 1;

            // è®¡ç®—è¯¯å·®å’Œé›…å¯æ¯”
            for x in -(half_patch_size as i32)..=half_patch_size as i32 {
                for y in -(half_patch_size as i32)..=half_patch_size as i32 {
                    let error = get_pixel_value(self.img1, self.px_ref[i].x + x as f64, self.px_ref[i].y + y as f64) -
                                get_pixel_value(self.img2, u + x as f64, v + y as f64);
                    let mut J_pixel_xi = Matrix2x6::zeros();
                    let mut J_img_pixel = Vector2::zeros();

                    J_pixel_xi[(0, 0)] = FX * Z_inv;
                    J_pixel_xi[(0, 1)] = 0.0;
                    J_pixel_xi[(0, 2)] = -FX * X * Z2_inv;
                    J_pixel_xi[(0, 3)] = -FX * X * Y * Z2_inv;
                    J_pixel_xi[(0, 4)] = FX + FX * X * X * Z2_inv;
                    J_pixel_xi[(0, 5)] = -FX * Y * Z_inv;

                    J_pixel_xi[(1, 0)] = 0.0;
                    J_pixel_xi[(1, 1)] = FY * Z_inv;
                    J_pixel_xi[(1, 2)] = -FY * Y * Z2_inv;
                    J_pixel_xi[(1, 3)] = -FY - FY * Y * Y * Z2_inv;
                    J_pixel_xi[(1, 4)] = FY * X * Y * Z2_inv;
                    J_pixel_xi[(1, 5)] = FY * X * Z_inv;

                    J_img_pixel = Vector2::new(
                        0.5 * (get_pixel_value(self.img2, u + 1.0 + x as f64, v + y as f64) - get_pixel_value(self.img2, u - 1.0 + x as f64, v + y as f64)),
                        0.5 * (get_pixel_value(self.img2, u + x as f64, v + 1.0 + y as f64) - get_pixel_value(self.img2, u + x as f64, v - 1.0 + y as f64))
                    );

                    // æ€»é›…å¯æ¯”
                    let J = -1.0 * (J_img_pixel.transpose() * J_pixel_xi).transpose();

                    hessian += J * J.transpose();
                    bias += -error * J;
                    cost_tmp += error * error;
                }
            }
        }

        if cnt_good > 0 {
            self.H += hessian;
            self.b += bias;
            self.cost += cost_tmp / cnt_good as f64;
        }
    }

    fn hessian(&self) -> Matrix6&LTf64> {
        self.H
    }

    fn bias(&self) -> Vector6&LTf64> {
        self.b
    }

    fn cost_func(&self) -> f64 {
        self.cost
    }

    fn projected_points(&self) -> &Vec&LTVector2&LTf64>> {
        &self.projection
    }

    fn reset(&mut self) {
        self.H = Matrix6::zeros();
        self.b = Vector6::zeros();
        self.cost = 0.0;
    }
}

fn direct_pose_estimation_single_layer(
    img1: &ImageBuffer&LTLuma&LTu8>, Vec&LTu8>>,
    img2: &ImageBuffer&LTLuma&LTu8>, Vec&LTu8>>,
    px_ref: &Vec&LTVector2&LTf64>>,
    depth_ref: &Vec&LTf64>,
    T21: &mut SE3&LTf64>
) {
    let iterations = 10;
    let mut cost = 0.0;
    let mut last_cost = 0.0;
    let t1 = Instant::now();

    for iter in 0..iterations {
        // ä½¿ç”¨ T21 çš„å…‹éš†æ¥é¿å…å€Ÿç”¨å†²çª
        let mut T21_clone = T21.clone();
        let mut jaco_accu = JacobianAccumulator::new(img1, img2, px_ref, depth_ref, &mut T21_clone);
        jaco_accu.reset();
        jaco_accu.accumulate_jacobian(0..px_ref.len());
        let H = jaco_accu.hessian();
        let b = jaco_accu.bias();

        // æ±‚è§£æ›´æ–°å¹¶æ”¾å…¥ä¼°è®¡
        let update = H.lu().solve(&b).unwrap_or_else(|| {
            eprintln!("çŸ©é˜µæ±‚è§£å¤±è´¥!");
            Vector6::zeros()
        });
        if update[0].is_nan() {
            // æœ‰æ—¶å‘ç”Ÿåœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªé»‘è‰²æˆ–ç™½è‰²çš„è¡¥ä¸å¹¶ä¸”Hæ˜¯ä¸å¯é€†çš„
            eprintln!("æ›´æ–°ä¸ºnan");
            break;
        }

        // æ›´æ–° T21
        *T21 = SE3::exp((&update).into()) * T21.clone();
        cost = jaco_accu.cost_func();

        if iter > 0 && cost > last_cost {
            eprintln!("æˆæœ¬å¢åŠ : {}, {}", cost, last_cost);
            break;
        }
        if update.norm() < 1e-3 {
            // æ”¶æ•›
            break;
        }

        last_cost = cost;
        println!("è¿­ä»£: {}, æˆæœ¬: {}", iter, cost);
    }

    println!("T21 = \n{}", T21.to_matrix());
    let t2 = Instant::now();
    let time_used = t2.duration_since(t1).as_secs_f64();
    println!("å•å±‚ç›´æ¥æ³•: {}", time_used);

    // åœ¨æ­¤å¤„ç»˜åˆ¶æŠ•å½±åƒç´ ,è½¬æ¢ä¸ºrgbå›¾
    let mut img2_show: RgbImage = img2.convert();

    let mut T21_clone = T21.clone();
    let mut jaco_accu = JacobianAccumulator::new(img1, img2, px_ref, depth_ref, &mut T21_clone);
    let projection = jaco_accu.projected_points();
    for i in 0..px_ref.len() {
        let p_ref = px_ref[i];
        let p_cur = projection[i];
        if p_cur.x > 0.0 && p_cur.y > 0.0 {
            draw_cross_mut(&mut img2_show, Rgb([0, 250, 0]), p_cur.x as i32, p_cur.y as i32);
            draw_line_segment_mut(&mut img2_show, (p_ref.x as f32, p_ref.y as f32), (p_cur.x as f32, p_cur.y as f32), Rgb([0, 250, 0]));
        }
    }
    img2_show.save("ch8-direct_method-current.png").unwrap();
}

// å¤šå±‚ç›´æ¥æ³•ä½å§¿ä¼°è®¡
fn direct_pose_estimation_multi_layer(
    img1: &ImageBuffer&LTLuma&LTu8>, Vec&LTu8>>,
    img2: &ImageBuffer&LTLuma&LTu8>, Vec&LTu8>>,
    px_ref: &Vec&LTVector2&LTf64>>,
    depth_ref: &Vec&LTf64>,
    T21: &mut SE3&LTf64>
) {
    // å‚æ•°
    let pyramids = 4;
    let pyramid_scale = 0.5;
    let scales = [1.0, 0.5, 0.25, 0.125];

    // åˆ›å»ºé‡‘å­—å¡”
    let mut pyr1 = Vec::new();
    let mut pyr2 = Vec::new();
    for i in 0..pyramids {
        if i == 0 {
            pyr1.push(img1.clone());
            pyr2.push(img2.clone());
        } else {
            let img1_pyr = image::imageops::resize(&pyr1[i - 1], (pyr1[i - 1].width() as f64 * pyramid_scale) as u32, (pyr1[i - 1].height() as f64 * pyramid_scale) as u32, image::imageops::FilterType::Nearest);
            let img2_pyr = image::imageops::resize(&pyr2[i - 1], (pyr2[i - 1].width() as f64 * pyramid_scale) as u32, (pyr2[i - 1].height() as f64 * pyramid_scale) as u32, image::imageops::FilterType::Nearest);

            // è½¬æ¢å›¾ç‰‡ä¸ºç°åº¦å›¾,ç›´æ¥å°†luma8æ•°æ®æ¨å…¥å‘é‡
            pyr1.push(img1_pyr);
            pyr2.push(img2_pyr);
        }
    }

    let fxG = FX;
    let fyG = FY;
    let cxG = CX;
    let cyG = CY;  // å¤‡ä»½æ—§å€¼
    for level in (0..pyramids).rev() {
        let mut px_ref_pyr = Vec::new();
        for px in px_ref {
            px_ref_pyr.push(scales[level] * px);
        }

        // åœ¨ä¸åŒçš„é‡‘å­—å¡”å±‚æ¬¡ä¸­ç¼©æ”¾ fx, fy, cx, cy
        let fx = fxG * scales[level];
        let fy = fyG * scales[level];
        let cx = cxG * scales[level];
        let cy = cyG * scales[level];
        direct_pose_estimation_single_layer(&pyr1[level], &pyr2[level], &px_ref_pyr, depth_ref, T21);
    }
}

fn main() {
    let left_file = "./assets/ch8-left.png";
    let disparity_file = "./assets/ch8-disparity.png";
    let fmt_others = "./assets/ch8-{:06}.png"; // æ³¨æ„è¿™é‡Œæ˜¯ {:06}ï¼Œä¸æ˜¯ %06d

    let left_img = open(left_file).unwrap().to_luma8();
    let disparity_img = open(disparity_file).unwrap().to_luma8();

    // æˆ‘ä»¬åœ¨ç¬¬ä¸€å¼ å›¾åƒä¸­éšæœºé€‰æ‹©åƒç´ å¹¶åœ¨ç¬¬ä¸€å¼ å›¾åƒçš„å¸§ä¸­ç”Ÿæˆä¸€äº›3Dç‚¹
    let mut rng = rand::thread_rng();
    let nPoints = 2000;
    let boarder = 20;
    let mut pixels_ref = Vec::new();
    let mut depth_ref = Vec::new();

    // åœ¨refä¸­ç”Ÿæˆåƒç´ å¹¶åŠ è½½æ·±åº¦æ•°æ®
    for _ in 0..nPoints {
        let x = rng.gen_range(boarder..left_img.width() - boarder) as f64;
        let y = rng.gen_range(boarder..left_img.height() - boarder) as f64;
        let disparity = disparity_img.get_pixel(x as u32, y as u32)[0] as f64;
        let depth = FX * BASELINE / disparity; // ä½ çŸ¥é“è¿™æ˜¯è§†å·®åˆ°æ·±åº¦
        depth_ref.push(depth);
        pixels_ref.push(Vector2::new(x, y));
    } // ç»“æŸfor

    // ä½¿ç”¨æ­¤ä¿¡æ¯ä¼°è®¡01~05.pngçš„å§¿æ€
    let mut T_cur_ref = SE3::identity();

    for i in 1..6 {
        let img_path = format!("./assets/ch8-{:06}.png", i);
        println!("å›¾ç‰‡è·¯å¾„:{:?}\n",img_path);
        let img = open(&img_path).unwrap().to_luma8();
        direct_pose_estimation_multi_layer(&left_img, &img, &pixels_ref, &depth_ref, &mut T_cur_ref);
    }

}
</code></pre><h3 id=dai-ma-luo-ji-fen-xi>ä»£ç é€»è¾‘åˆ†æ</h3><ol><li><p><strong>ç›¸æœºå†…å‚å’ŒåŸºçº¿</strong>ï¼šä»£ç ä¸­å®šä¹‰äº†ç›¸æœºçš„å†…å‚ï¼ˆ<code>fx</code>, <code>fy</code>, <code>cx</code>, <code>cy</code>ï¼‰å’ŒåŸºçº¿ï¼ˆ<code>baseline</code>ï¼‰ï¼Œè¿™äº›å‚æ•°ç”¨äºå°†è§†å·®è½¬æ¢ä¸ºæ·±åº¦ã€‚</p><li><p><strong>å›¾åƒè¯»å–</strong>ï¼šä»£ç è¯»å–äº†å·¦å›¾å’Œè§†å·®å›¾ï¼Œå¹¶éšæœºé€‰æ‹©äº†ä¸€äº›åƒç´ ç‚¹ç”¨äºåç»­çš„ä½å§¿ä¼°è®¡ã€‚</p><li><p><strong>æ·±åº¦è®¡ç®—</strong>ï¼šé€šè¿‡è§†å·®å›¾è®¡ç®—æ·±åº¦ä¿¡æ¯ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨<code>depth_ref</code>ä¸­ã€‚</p><li><p><strong>ä½å§¿ä¼°è®¡</strong>ï¼šä½¿ç”¨ç›´æ¥æ³•è¿›è¡Œä½å§¿ä¼°è®¡ï¼Œåˆ†ä¸ºå•å±‚å’Œå¤šå±‚ä¸¤ç§æ–¹æ³•ã€‚ä»£ç ä¸­è°ƒç”¨çš„æ˜¯å¤šå±‚æ–¹æ³•<code>DirectPoseEstimationMultiLayer</code>ã€‚</p><li><p><strong>é›…å¯æ¯”ç´¯åŠ å™¨</strong>ï¼š<code>JacobianAccumulator</code>ç±»ç”¨äºåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ç´¯åŠ é›…å¯æ¯”çŸ©é˜µå’Œè®¡ç®—è¯¯å·®ã€‚</p><li><p><strong>åŒçº¿æ€§æ’å€¼</strong>ï¼š<code>GetPixelValue</code>å‡½æ•°ç”¨äºåœ¨å›¾åƒä¸­è¿›è¡ŒåŒçº¿æ€§æ’å€¼ï¼Œç¡®ä¿åœ¨æµ®ç‚¹åæ ‡ä¸‹è·å–åƒç´ å€¼ã€‚</p></ol><h3 id=xiao-guo>æ•ˆæœ</h3><ol><li>è¾“å‡º</ol><pre class=language-sh data-lang=sh><code class=language-sh data-lang=sh>å›¾ç‰‡è·¯å¾„:"./assets/ch8-000001.png"

è¿­ä»£: 0, æˆæœ¬: 12308.606882324208
T21 = 

  â”Œ                                                                                             â”
  â”‚     0.9524303857277323     0.3015001816619056   0.044429728790090155  -0.003210241232723807 â”‚
  â”‚   -0.28373242767373474     0.9304624727537855   -0.23180918075710438 -0.0007448658012033818 â”‚
  â”‚   -0.11123070542297181    0.20817595263322064      0.971746110317072   0.004654729361295467 â”‚
  â”‚                      0                      0                      0                      1 â”‚
  â””                                                                                             â”˜


å•å±‚ç›´æ¥æ³•: 0.265253083
è¿­ä»£: 0, æˆæœ¬: 85669.981282861
T21 = 

  â”Œ                                                                                             â”
  â”‚     0.9218799427483955     0.3859353122197975    0.03451530008594093  -0.005209022743755008 â”‚
  â”‚    -0.3607089083126468     0.8873181597241661    -0.2873248455800819 -0.0008377164815452974 â”‚
  â”‚    -0.1415148565420385    0.25242903597947436     0.9572111194362295  0.0075372648611578925 â”‚
  â”‚                      0                      0                      0                      1 â”‚
  â””                                                                                             â”˜


å•å±‚ç›´æ¥æ³•: 0.209044375
è¿­ä»£: 0, æˆæœ¬: 86278.86385506127
è¿­ä»£: 1, æˆæœ¬: 78932.01005537802
T21 = 

  â”Œ                                                                                             â”
  â”‚     0.9125446387532822    0.40829198571115227   0.023662981356667577  -0.003920845296385371 â”‚
  â”‚    -0.3842899544360964     0.8758218816839785   -0.29198846292796965 -0.0005550692441357431 â”‚
  â”‚   -0.13994110619165737     0.2573590603953543      0.956129071219088   0.005821003343790509 â”‚
  â”‚                      0                      0                      0                      1 â”‚
  â””                                                                                             â”˜


å•å±‚ç›´æ¥æ³•: 0.218726375
è¿­ä»£: 0, æˆæœ¬: 80969.97454752732
T21 = 

  â”Œ                                                                                             â”
  â”‚     0.9024751333468863     0.4303302061971928   0.018829427097003137 -0.0038350987692527313 â”‚
  â”‚    -0.4083426816880122     0.8686402069107689   -0.28057164013823516  0.0009773860335536846 â”‚
  â”‚   -0.13709444920332334    0.24552006959166922       0.95964837697218   0.006101092525896705 â”‚
  â”‚                      0                      0                      0                      1 â”‚
  â””                                                                                             â”˜


å•å±‚ç›´æ¥æ³•: 0.127039291
å›¾ç‰‡è·¯å¾„:"./assets/ch8-000002.png"

è¿­ä»£: 0, æˆæœ¬: 62918.87454601741
è¿­ä»£: 1, æˆæœ¬: 50964.083456400964
T21 = 

  â”Œ                                                                                         â”
  â”‚    0.9471695479166553  -0.29475511826277095  -0.12644867637606494 -0.024437567736266715 â”‚
  â”‚   0.31573559637889087    0.9262155288055071    0.2059995810160813 -0.006922309367973688 â”‚
  â”‚   0.05639929679193713  -0.23504087826894032    0.9703478267425244  0.031340398699299214 â”‚
  â”‚                     0                     0                     0                     1 â”‚
  â””                                                                                         â”˜


å•å±‚ç›´æ¥æ³•: 0.200831125
è¿­ä»£: 0, æˆæœ¬: 69534.8098484062
T21 = 

  â”Œ                                                                                         â”
  â”‚    0.9472662867926415  -0.29811538115257286  -0.11753212933635326  -0.02048814529041247 â”‚
  â”‚   0.31717620385681067    0.9245284812892887     0.211296812545538 -0.005842805353928968 â”‚
  â”‚   0.04567097122969815  -0.23743274164524486    0.9703297664102439  0.026951156449003068 â”‚
  â”‚                     0                     0                     0                     1 â”‚
  â””                                                                                         â”˜


å•å±‚ç›´æ¥æ³•: 0.184161042
è¿­ä»£: 0, æˆæœ¬: 83774.72875510731
T21 = 

  â”Œ                                                                                         â”
  â”‚    0.9471687899339618  -0.29351554196707935  -0.12930549098474545 -0.021599883894582617 â”‚
  â”‚   0.31590017516818664    0.9234576352579759    0.2177913570655551 -0.005447138203677023 â”‚
  â”‚   0.05548299472580243   -0.2471328033821467    0.9673918620645605  0.026764523956617322 â”‚
  â”‚                     0                     0                     0                     1 â”‚
  â””                                                                                         â”˜


å•å±‚ç›´æ¥æ³•: 0.1588415
è¿­ä»£: 0, æˆæœ¬: 95209.12401528576
T21 = 

  â”Œ                                                                                             â”
  â”‚     0.9333317952635999   -0.31511300687588656   -0.17203358058141766  -0.023745940533225245 â”‚
  â”‚     0.3542740917013179      0.885997942912672    0.29916134961542046 -0.0009776576916912668 â”‚
  â”‚   0.058151766088673965   -0.34016384001264904     0.9385664249527665   0.026241319858266894 â”‚
  â”‚                      0                      0                      0                      1 â”‚
  â””                                                                                             â”˜


å•å±‚ç›´æ¥æ³•: 0.126065416
å›¾ç‰‡è·¯å¾„:"./assets/ch8-000003.png"

è¿­ä»£: 0, æˆæœ¬: 22775.232856931147
T21 = 

  â”Œ                                                                                         â”
  â”‚   0.04421799171614049    0.8267708019552389   -0.5607983686164595  -0.11494996211886517 â”‚
  â”‚   -0.5883617834340118   -0.4321172771721953   -0.6834508545342795 -0.013060132923383315 â”‚
  â”‚   -0.8073878751894532    0.3601731525302503    0.4673329853471514   0.17026336457658037 â”‚
  â”‚                     0                     0                     0                     1 â”‚
  â””                                                                                         â”˜


å•å±‚ç›´æ¥æ³•: 0.014470583
è¿­ä»£: 0, æˆæœ¬: 63921.11568575347
T21 = 

  â”Œ                                                                                         â”
  â”‚  -0.04616616846798771    0.7583799406344983   -0.6501757843323606  -0.12865335429683258 â”‚
  â”‚  -0.49587978081956463   -0.5824112758412814   -0.6441275873204559 -0.018972255722675038 â”‚
  â”‚   -0.8671631495072458   0.29267212271780474   0.40295297581793377    0.1871745873124643 â”‚
  â”‚                     0                     0                     0                     1 â”‚
  â””                                                                                         â”˜


å•å±‚ç›´æ¥æ³•: 0.102599416
è¿­ä»£: 0, æˆæœ¬: 130972.77167231684
T21 = 

  â”Œ                                                                                         â”
  â”‚  -0.07708204146335573    0.7174503164073005    -0.692331858555495  -0.12220712057420292 â”‚
  â”‚   -0.4823637720411582   -0.6345562962860871   -0.6038737436467237 -0.009325333785477431 â”‚
  â”‚   -0.8725729484152411    0.2874079858506856    0.3949849356155055   0.17640532201758752 â”‚
  â”‚                     0                     0                     0                     1 â”‚
  â””                                                                                         â”˜


å•å±‚ç›´æ¥æ³•: 0.056263917
è¿­ä»£: 0, æˆæœ¬: 160315.8221080921
è¿­ä»£: 1, æˆæœ¬: 117803.74896521952
T21 = 

  â”Œ                                                                                     â”
  â”‚  0.11041063796222783   0.8092234858483349  -0.5770327902088784 -0.12796900323951144 â”‚
  â”‚  -0.6937522281289734 -0.35299298414217173  -0.6277768704822513 0.012703735880665796 â”‚
  â”‚  -0.7117003140303219   0.4696310286787641   0.5224264157862495   0.1615720204177094 â”‚
  â”‚                    0                    0                    0                    1 â”‚
  â””                                                                                     â”˜


å•å±‚ç›´æ¥æ³•: 0.04936275
å›¾ç‰‡è·¯å¾„:"./assets/ch8-000004.png"

T21 = 

  â”Œ                                                                                     â”
  â”‚  0.11041063796222783   0.8092234858483349  -0.5770327902088784 -0.12796900323951144 â”‚
  â”‚  -0.6937522281289734 -0.35299298414217173  -0.6277768704822513 0.012703735880665796 â”‚
  â”‚  -0.7117003140303219   0.4696310286787641   0.5224264157862495   0.1615720204177094 â”‚
  â”‚                    0                    0                    0                    1 â”‚
  â””                                                                                     â”˜


å•å±‚ç›´æ¥æ³•: 0.002474291
è¿­ä»£: 0, æˆæœ¬: 9952.64361905522
T21 = 

  â”Œ                                                                                     â”
  â”‚   0.9936933376281276  0.10127337313948065   0.0481378712286223  -0.0973772597095485 â”‚
  â”‚  -0.0881181514129811   0.9707573545011597 -0.22330550838138477 -0.06053442151615137 â”‚
  â”‚ -0.06934509459962428  0.21765537570862173   0.9735591380497169  0.12565698167218953 â”‚
  â”‚                    0                    0                    0                    1 â”‚
  â””                                                                                     â”˜


å•å±‚ç›´æ¥æ³•: 0.006331209
è¿­ä»£: 0, æˆæœ¬: 63264.225409655686
T21 = 

  â”Œ                                                                                         â”
  â”‚     0.993265544467401   0.09742560583615734   0.06270414261701729  -0.09536557330216772 â”‚
  â”‚   -0.0810970355733821    0.9711440954988444    -0.224282002396405 -0.062349676699279086 â”‚
  â”‚  -0.08274556782745005    0.2176864651400935    0.9725048965942145    0.1302758082903449 â”‚
  â”‚                     0                     0                     0                     1 â”‚
  â””                                                                                         â”˜


å•å±‚ç›´æ¥æ³•: 0.072367167
è¿­ä»£: 0, æˆæœ¬: 119395.80207527199
T21 = 

  â”Œ                                                                                     â”
  â”‚   0.9902854758169111  0.12098584779861912  0.06853539974730932  -0.0944911844223315 â”‚
  â”‚ -0.10422445060874833   0.9721083356759842 -0.21010151737808208 -0.05673084026913784 â”‚
  â”‚ -0.09204314358700871  0.20091741672069474   0.9752744492587222  0.13244235645914174 â”‚
  â”‚                    0                    0                    0                    1 â”‚
  â””                                                                                     â”˜


å•å±‚ç›´æ¥æ³•: 0.176934625
å›¾ç‰‡è·¯å¾„:"./assets/ch8-000005.png"

T21 = 

  â”Œ                                                                                     â”
  â”‚   0.9902854758169111  0.12098584779861912  0.06853539974730932  -0.0944911844223315 â”‚
  â”‚ -0.10422445060874833   0.9721083356759842 -0.21010151737808208 -0.05673084026913784 â”‚
  â”‚ -0.09204314358700871  0.20091741672069474   0.9752744492587222  0.13244235645914174 â”‚
  â”‚                    0                    0                    0                    1 â”‚
  â””                                                                                     â”˜


å•å±‚ç›´æ¥æ³•: 0.002497459
è¿­ä»£: 0, æˆæœ¬: 51340.046356081984
T21 = 

  â”Œ                                                                                     â”
  â”‚    0.488721427927844  0.01590160068119037  -0.8722949644357377 -0.24508797891778478 â”‚
  â”‚   0.3281547532426462  -0.9297616528746497  0.16690634130570506  0.05602332984185457 â”‚
  â”‚  -0.8083723299374038 -0.36781844426234866  -0.4596126284731503 0.009371172503020716 â”‚
  â”‚                    0                    0                    0                    1 â”‚
  â””                                                                                     â”˜


å•å±‚ç›´æ¥æ³•: 0.005589166
T21 = 

  â”Œ                                                                                     â”
  â”‚    0.488721427927844  0.01590160068119037  -0.8722949644357377 -0.24508797891778478 â”‚
  â”‚   0.3281547532426462  -0.9297616528746497  0.16690634130570506  0.05602332984185457 â”‚
  â”‚  -0.8083723299374038 -0.36781844426234866  -0.4596126284731503 0.009371172503020716 â”‚
  â”‚                    0                    0                    0                    1 â”‚
  â””                                                                                     â”˜


å•å±‚ç›´æ¥æ³•: 0.002532792
T21 = 

  â”Œ                                                                                     â”
  â”‚    0.488721427927844  0.01590160068119037  -0.8722949644357377 -0.24508797891778478 â”‚
  â”‚   0.3281547532426462  -0.9297616528746497  0.16690634130570506  0.05602332984185457 â”‚
  â”‚  -0.8083723299374038 -0.36781844426234866  -0.4596126284731503 0.009371172503020716 â”‚
  â”‚                    0                    0                    0                    1 â”‚
  â””                                                                                     â”˜


å•å±‚ç›´æ¥æ³•: 0.0024075

æˆæœ¬å¢åŠ : 56793.99123379931, 12308.606882324208
æˆæœ¬å¢åŠ : 92649.7299219401, 85669.981282861
æˆæœ¬å¢åŠ : 80753.76146512033, 78932.01005537802
æˆæœ¬å¢åŠ : 81108.55695446623, 80969.97454752732
æˆæœ¬å¢åŠ : 76023.83826864949, 50964.083456400964
æˆæœ¬å¢åŠ : 76052.18150445452, 69534.8098484062
æˆæœ¬å¢åŠ : 88042.76661683866, 83774.72875510731
æˆæœ¬å¢åŠ : 108168.18679485178, 95209.12401528576
æˆæœ¬å¢åŠ : 132775.2488141031, 22775.232856931147
æˆæœ¬å¢åŠ : 68884.44033429243, 63921.11568575347
æˆæœ¬å¢åŠ : 146982.56562344934, 130972.77167231684
æˆæœ¬å¢åŠ : 136980.53080711715, 117803.74896521952
çŸ©é˜µæ±‚è§£å¤±è´¥!
çŸ©é˜µæ±‚è§£å¤±è´¥!
æˆæœ¬å¢åŠ : 71608.36972602786, 63264.225409655686
æˆæœ¬å¢åŠ : 120213.22098266528, 119395.80207527199
çŸ©é˜µæ±‚è§£å¤±è´¥!
çŸ©é˜µæ±‚è§£å¤±è´¥!
çŸ©é˜µæ±‚è§£å¤±è´¥!
çŸ©é˜µæ±‚è§£å¤±è´¥!
</code></pre><ol start=2><li>å›¾ç‰‡æ¯”è¾ƒ</ol><table><thead><tr><th>ch8-direct_method-current<th>ch8-disparity<tbody><tr><td><img alt decoding=async loading=lazy src=https://img2024.cnblogs.com/blog/1048201/202501/1048201-20250123123525862-548337074.png><td><img alt decoding=async loading=lazy src=https://img2024.cnblogs.com/blog/1048201/202501/1048201-20250123123530252-1402606991.png><tr><td>000001<td>000002<tr><td><img alt decoding=async loading=lazy src=https://img2024.cnblogs.com/blog/1048201/202501/1048201-20250123123536351-2124919815.png><td><img alt decoding=async loading=lazy src=https://img2024.cnblogs.com/blog/1048201/202501/1048201-20250123123540375-1139636499.png><tr><td>000003<td>000004<tr><td><img alt decoding=async loading=lazy src=https://img2024.cnblogs.com/blog/1048201/202501/1048201-20250123123543564-565289117.png><td><img alt decoding=async loading=lazy src=https://img2024.cnblogs.com/blog/1048201/202501/1048201-20250123123546970-470310915.png><tr><td>000005<td><tr><td><img alt decoding=async loading=lazy src=https://img2024.cnblogs.com/blog/1048201/202501/1048201-20250123123551774-423709835.png><td></table><h3>åˆ†æ</h3><ol><li><p><strong>è¿­ä»£è¿‡ç¨‹</strong>ï¼šè¾“å‡ºæ˜¾ç¤ºäº†æ¯æ¬¡è¿­ä»£çš„æˆæœ¬ï¼ˆcostï¼‰ï¼Œä»¥åŠæœ€ç»ˆçš„ä½å§¿çŸ©é˜µï¼ˆT21ï¼‰ã€‚æˆæœ¬çš„å˜åŒ–åæ˜ äº†ä¼˜åŒ–è¿‡ç¨‹çš„æ”¶æ•›æƒ…å†µã€‚</p><li><p><strong>æˆæœ¬å¢åŠ </strong>ï¼šåœ¨æŸäº›è¿­ä»£ä¸­ï¼Œæˆæœ¬å‡ºç°äº†å¢åŠ çš„æƒ…å†µï¼Œè¿™å¯èƒ½æ˜¯ç”±äºä¼˜åŒ–è¿‡ç¨‹ä¸­çš„å±€éƒ¨æå°å€¼æˆ–æ•°å€¼ä¸ç¨³å®šæ€§å¯¼è‡´çš„ã€‚</p><li><p><strong>çŸ©é˜µæ±‚è§£å¤±è´¥</strong>ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¾“å‡ºæ˜¾ç¤ºâ€œçŸ©é˜µæ±‚è§£å¤±è´¥â€ï¼Œè¿™é€šå¸¸æ˜¯ç”±äºé›…å¯æ¯”çŸ©é˜µçš„æ¡ä»¶æ•°è¾ƒå·®ï¼Œå¯¼è‡´çº¿æ€§æ–¹ç¨‹ç»„ä¸å¯è§£ã€‚</p></ol></article><div><div class=post-copyright><div class=post-copyright__author_group><a class=post-copyright__author_img href=/about> <picture class="post-copyright__author_img_back progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/avatar.d5facb578cf12fdc.webp><source media="(min-width: 1em)" srcset=/processed_images/avatar.8bb6bf05eac51207.avif><img class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this) src=/processed_images/avatar.06a48b3b45482d6b.webp><noscript><img decoding=async loading=lazy src=/processed_images/avatar.06a48b3b45482d6b.webp></noscript></picture> </a><div class=post-copyright__author_name>ByeIOÂ·å¼€å‘è€…åšå®¢</div><div class=post-copyright__author_desc>ByeIOÂ·å¼€å‘è€…åšå®¢|æŠ€æœ¯è§£å†³æ–¹æ¡ˆ|å¼€å‘æ€è€ƒ|æ€»ç»“</div></div><div class=post-tools id=post-tools><div class=post-tools-left><div class=rewardLeftButton><div class="reward-link mode"><a class=reward-link-button href=/subscribe> <i class=icon-plant-fill></i>è®¢é˜… </a></div></div><div class=shareRight><div class="copyright-link mobile"><div class=copyright-qrcode><div class=copyright-button title=ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« ><i class=icon-qrcode></i></div><div class=copyright-main><div class=copyright-main-all><div id=qrcode></div><div class=reward-dec>ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« </div></div></div></div></div><div class="copyright-link copyurl"><div class=copyright-button id=post-share-url onclick=rm.copyPageUrl() title=å¤åˆ¶é“¾æ¥><i class=icon-link></i></div></div></div></div></div><div class=post-copyright__notice><span class=post-copyright-info> æœ¬æ–‡æ˜¯åŸåˆ›æ–‡ç« ï¼Œé‡‡ç”¨ <a href=/copyright target=_blank>CC BY-NC-ND 4.0</a> åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜ <a href=/ target=_blank>æœ¬ç«™åç§°åŠåœ°å€</a> </span></div></div><div class=post-tools-right><div class=tag_share><div class=post-meta__tag-list><a class=post-meta__tags href=/tags/blog/> <span class=tags-punctuation>åšå®¢</span> <span class=tagsPageCount>31</span> </a><a class=post-meta__tags href=/tags/docs/> <span class=tags-punctuation>æ–‡æ¡£</span> <span class=tagsPageCount>25</span> </a><a class=post-meta__tags href=/tags/featured/> <span class=tags-punctuation>å¿…çœ‹</span> <span class=tagsPageCount>30</span> </a><a class=post-meta__tags href=/tags/hot/> <span class=tags-punctuation>çƒ­é—¨</span> <span class=tagsPageCount>30</span> </a></div></div></div><link href=/css/post-copyright-one.css rel=stylesheet></div><nav class="pagination-post needEndHide" id=pagination><div class="prev-post pull-left"><a href=/articles/docs/æŠ˜è…¾ç¬”è®°[10]-ä½¿ç”¨rustè¿›è¡ŒORBè§’ç‚¹æ£€æµ‹/> <div class=pagination-info><div class=label>ä¸Šä¸€ç¯‡</div><div class=prev_info>æŠ˜è…¾ç¬”è®°[10]-ä½¿ç”¨rustè¿›è¡ŒORBè§’ç‚¹æ£€æµ‹</div></div> </a></div><div class="next-post pull-right"><a href=/articles/docs/æŠ˜è…¾ç¬”è®°[12]-ä½¿ç”¨rustè¿›è¡Œä½å§¿å›¾ä¼˜åŒ–/> <div class=pagination-info><div class=label>ä¸‹ä¸€ç¯‡</div><div class=next_info>æŠ˜è…¾ç¬”è®°[12]-ä½¿ç”¨rustè¿›è¡Œä½å§¿å›¾ä¼˜åŒ–</div></div> </a></div></nav><div class=relatedPosts><div class=headline><i class=icon-cainixihuan style=font-size:1.1rem></i><span>å–œæ¬¢è¿™ç¯‡æ–‡ç« çš„äººä¹Ÿçœ‹äº†</span></div><div class=relatedPosts-list><div><a href=/articles/docs/ROSç¬”è®°[1]-æ­å»ºGazeboä»¿çœŸç¯å¢ƒ/ title=ROSç¬”è®°[1]-æ­å»ºGazeboä»¿çœŸç¯å¢ƒ> <picture class="cover progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/img00006.8f57f1d144c2cfd7.webp><source media="(min-width: 75em)" srcset="/processed_images/img00006.688adcb5ebd82ad6.avif?w=75em"><source media="(min-width: 60em)" srcset="/processed_images/img00006.8e3bcf4e0c9fd77c.avif?w=60em"><source media="(min-width: 45em)" srcset="/processed_images/img00006.08513801052a4920.avif?w=45em"><source media="(min-width: 30em)" srcset="/processed_images/img00006.0928215d8428e769.avif?w=30em"><source media="(min-width: 22em)" srcset="/processed_images/img00006.c83fffe523ead88b.avif?w=22em"><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" srcset="/processed_images/img00006.0beae348737c79a0.webp?w=22em 360w,
              /processed_images/img00006.1e5d356251b272fe.webp?w=30em 500w,
              /processed_images/img00006.c010a791dd57f875.webp?w=45em 720w,
              /processed_images/img00006.86f2248bcd34f02f.webp?w=60em 960w,
              /processed_images/img00006.799278f602588342.webp?w=75em 1200w" class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this)><noscript><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" decoding=async loading=lazy></noscript></picture> <div class="content is-center"><div class=date><i class="far fa-calendar-alt fa-fw"></i> 2025-01-01</div><div class=title>ROSç¬”è®°[1]-æ­å»ºGazeboä»¿çœŸç¯å¢ƒ</div></div> </a></div><div><a href=/articles/docs/ROSç¬”è®°[2]-è·å–OpenMVæ•°æ®å¹¶å‘å¸ƒåˆ°ROSæ¶ˆæ¯/ title=ROSç¬”è®°[2]-è·å–OpenMVæ•°æ®å¹¶å‘å¸ƒåˆ°ROSæ¶ˆæ¯> <picture class="cover progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/img00006.8f57f1d144c2cfd7.webp><source media="(min-width: 75em)" srcset="/processed_images/img00006.688adcb5ebd82ad6.avif?w=75em"><source media="(min-width: 60em)" srcset="/processed_images/img00006.8e3bcf4e0c9fd77c.avif?w=60em"><source media="(min-width: 45em)" srcset="/processed_images/img00006.08513801052a4920.avif?w=45em"><source media="(min-width: 30em)" srcset="/processed_images/img00006.0928215d8428e769.avif?w=30em"><source media="(min-width: 22em)" srcset="/processed_images/img00006.c83fffe523ead88b.avif?w=22em"><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" srcset="/processed_images/img00006.0beae348737c79a0.webp?w=22em 360w,
              /processed_images/img00006.1e5d356251b272fe.webp?w=30em 500w,
              /processed_images/img00006.c010a791dd57f875.webp?w=45em 720w,
              /processed_images/img00006.86f2248bcd34f02f.webp?w=60em 960w,
              /processed_images/img00006.799278f602588342.webp?w=75em 1200w" class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this)><noscript><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" decoding=async loading=lazy></noscript></picture> <div class="content is-center"><div class=date><i class="far fa-calendar-alt fa-fw"></i> 2025-01-01</div><div class=title>ROSç¬”è®°[2]-è·å–OpenMVæ•°æ®å¹¶å‘å¸ƒåˆ°ROSæ¶ˆæ¯</div></div> </a></div></div></div><link href=/css/related-posts-two.css rel=stylesheet><hr></div><div class=aside-content id=aside-content><div class="card-widget card-info"><div class=card-content><div class="card-info-avatar is-center"><div class=author-info__top-group><div class=author-info__sayhi id=author-info__sayhi onclick=wjx.changeSayHelloText()>å¥½ä¹…ä¸è§ï¼Œä½ ç»ˆäºæ¥äº†</div></div></div><div class=avatar-img-group><picture class="avatar-img progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/avatar.d5facb578cf12fdc.webp><source media="(min-width: 1em)" srcset=/processed_images/avatar.8bb6bf05eac51207.avif><img class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this) src=/processed_images/avatar.06a48b3b45482d6b.webp><noscript><img decoding=async loading=lazy src=/processed_images/avatar.06a48b3b45482d6b.webp></noscript></picture></div><div class=author-info__description_group>ä¸ºåˆ›é€ è€…è€Œç”Ÿçš„å¼€æº Zola ä¸»é¢˜~</div><div class=author-info__bottom-group><a class=author-info__bottom-group-left href=/about> <div class=author-info__name>qsbye</div> <div class=author-info__desc>ByeIOÂ·å¼€å‘è€…åšå®¢|æŠ€æœ¯è§£å†³æ–¹æ¡ˆ|å¼€å‘æ€è€ƒ|æ€»ç»“</div> </a><div class="card-info-social-icons is-center"><a rel="external nofollow" class=social-icon href=https://github.com/iWangJiaxiang/zola-theme-jiaxiang.wang target=_blank title=GitHub> <i class=icon-github></i> </a></div></div></div><style>.avatar-img-group:before{content:"";-o-transition:1s;background:var(--wjx-green);border:5px solid var(--wjx-background);z-index:2;border-radius:50%;width:26px;height:26px;-webkit-transition:all 1s;-moz-transition:all 1s;-ms-transition:all 1s;transition:all 1s;position:absolute;bottom:2px;right:2px}.card-info-avatar.is-center{flex-direction:column;align-items:flex-start;display:flex}#aside-content .card-info .avatar-img{opacity:1;border:5px solid var(--wjx-white);border-radius:500px;width:118px;transition:all .3s;position:absolute;top:0;right:0;overflow:hidden}.page #aside-content .card-info .avatar-img{border-color:var(--wjx-card-bg)}.author-info__top-group{width:100%;height:28px;display:flex}.avatar-img-group{transform-origin:bottom;border-radius:500px;width:118px;height:118px;transition:all .3s cubic-bezier(.69,.39,0,1.21);position:absolute;top:90px;right:calc(50% - 59px)}#aside-content .card-info:hover .avatar-img-group{opacity:0;transform:scale(0)}.author-info__bottom-group{justify-content:space-between;align-items:center;width:100%;padding:1.2rem;display:flex;position:absolute;bottom:0;left:0}a.author-info__bottom-group-left:hover{opacity:.8}#aside-content .card-info .card-info-social-icons{cursor:pointer;flex-flow:wrap;justify-content:flex-start;margin:0;display:flex}#aside-content .card-info .card-info-social-icons i:hover{cursor:pointer;background-color:#000;transform:rotate(540deg)}#aside-content .card-info .card-info-social-icons .social-icon{margin:0 0 0 8px}#aside-content .card-info .card-info-social-icons i{background:var(--wjx-white-op);color:var(--wjx-white);justify-content:center;align-items:center;width:40px;height:40px;font-size:1rem;display:flex}#aside-content .card-info .card-info-social-icons i:hover{background:var(--wjx-white);color:var(--wjx-main);box-shadow:none;transform:scale(1.1)}[data-theme=dark] .page #aside-content .card-info .card-info-social-icons i{background:var(--wjx-black-op);color:var(--wjx-card-bg)}[data-theme=dark] .page #aside-content .card-info .card-info-social-icons i:hover{background:var(--wjx-card-bg);color:var(--wjx-fontcolor)}#aside-content .card-info .banner-button{border-radius:20px;justify-content:center;width:118px;height:40px}@media screen and (width>=1300px){#aside-content .card-info .card-info-social-icons i{color:var(--wjx-white)}[data-theme=dark] .page #aside-content .card-info .card-info-social-icons i{color:var(--wjx-card-bg)}}#aside-content .card-info .card-info-data>.card-info-data-item:hover{background:var(--wjx-post-blockquote-bg);transform:scale(.97)}#aside-content>div.card-widget.card-info>div.card-content>div.card-info-data>.card-info-data-item:hover>a>div.headline,#aside-content>div.card-widget.card-info>div.card-content>div.card-info-data>.card-info-data-item:hover>a>div.length-num{color:var(--wjx-blue)}.author-info__description_group{color:var(--wjx-white);opacity:0;width:100%;padding:1.2rem;transition:all .3s;position:absolute;top:50px;left:0}.card-widget:hover .author-info__description_group{opacity:1}.author-info__description2{text-align:justify;z-index:2;color:#fffc;width:100%;margin:.3rem 0;line-height:1.38}.author-info__description2 b{color:var(--wjx-white)}[data-theme=dark] .page div#author-info__sayhi{background:var(--wjx-black-op);color:var(--wjx-black)}#aside-content .card-info .author-info__name{text-align:left;color:var(--wjx-white);margin-bottom:5px;font-size:20px;font-weight:700;line-height:1}.page #aside-content .card-info .author-info__name,.page .author-info__desc{color:var(--wjx-white)}.author-info__desc{color:var(--wjx-white);opacity:.6;font-size:12px;line-height:1}.author-info__description{text-align:justify;color:var(--wjx-white);opacity:1;margin:.3rem 0;line-height:1.38}.page .author-info__description{color:var(--wjx-card-bg)}.author-info__description b{color:var(--wjx-white);opacity:1}.page .author-info__description b{color:var(--wjx-card-bg);opacity:1}.avatar-sticker{z-index:0;background:var(--wjx-white);border-radius:50%;justify-content:center;align-items:center;width:33px;height:33px;line-height:34px;transition:all .3s ease-out .2s;display:flex;position:absolute;bottom:2px;right:2px;transform:scale(1)}.page .avatar-sticker{background:var(--wjx-card-bg)}.avatar-sticker img{width:26px;height:26px}.card-widget:hover .avatar-sticker{opacity:0;transform:scale(0)}.author-info__description b{color:var(--wjx-white)}#aside-content>.card-widget.card-info:before{background:linear-gradient(-25deg,var(--wjx-main),var(--wjx-main-op-deep),var(--wjx-main),var(--wjx-main-op-deep));content:"";background-size:400%;width:100%;height:100%;animation:15s infinite gradient;position:absolute;top:0;left:0}</style></div><div class="card-widget wjx-right-widget" onclick="javascript:window.open('/subscribe')" id=card-wechat><div id=flip-wrapper><div id=flip-content><div style="background:url(/img/wechat/qr-green.avif) 50%/100% no-repeat" class=face></div><div class="back face" style="background:url(/img/wechat/qr-white.avif) 50%/100% no-repeat"></div></div></div><style>#aside-content .card-widget#card-wechat{background:#07c160}#aside-content .card-widget#card-wechat:before{content:"";background:url(/img/wechat/gzh_cover.avif) 50%/cover no-repeat;width:100%;height:90%;transition:all .2s cubic-bezier(.45,.04,.43,1.21);position:absolute;top:0;left:0}#aside-content .card-widget#card-wechat:hover:before{opacity:0;transition:all .3s ease-out;top:100%}</style></div><div class=sticky_layout><div class=card-widget id=card-toc><div class=item-headline><i class=icon-bars></i><span>æ–‡ç« ç›®å½•</span><span class=toc-percentage></span></div><div class=toc-content></div></div><div class="card-widget card-recent-post"><div class=item-headline><i class=icon-chat--fill style=font-size:19px></i><span>æœ€æ–°è¯„è®º</span></div><div class=aside-list id=newcomm></div></div><div class="card-widget card-recent-post"><div class=item-headline><i class=icon-eicon_map-2-line1></i><span>æœ€è¿‘å‘å¸ƒ</span></div><div class=aside-list><div class=aside-list-item><a class=thumbnail href=/articles/docs/é…ç½®orangepi5proè¿è¡Œrknnç‰ˆæœ¬çš„yolov5/ title=é…ç½®orangepi5proè¿è¡Œrknnç‰ˆæœ¬çš„yolov5> <picture class="post_bg progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/img00006.8f57f1d144c2cfd7.webp><source media="(min-width: 75em)" srcset="/processed_images/img00006.688adcb5ebd82ad6.avif?w=75em"><source media="(min-width: 60em)" srcset="/processed_images/img00006.8e3bcf4e0c9fd77c.avif?w=60em"><source media="(min-width: 45em)" srcset="/processed_images/img00006.08513801052a4920.avif?w=45em"><source media="(min-width: 30em)" srcset="/processed_images/img00006.0928215d8428e769.avif?w=30em"><source media="(min-width: 22em)" srcset="/processed_images/img00006.c83fffe523ead88b.avif?w=22em"><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" srcset="/processed_images/img00006.0beae348737c79a0.webp?w=22em 360w,
              /processed_images/img00006.1e5d356251b272fe.webp?w=30em 500w,
              /processed_images/img00006.c010a791dd57f875.webp?w=45em 720w,
              /processed_images/img00006.86f2248bcd34f02f.webp?w=60em 960w,
              /processed_images/img00006.799278f602588342.webp?w=75em 1200w" class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this)><noscript><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" decoding=async loading=lazy></noscript></picture> </a><div class=content><a class=title href=/articles/docs/é…ç½®orangepi5proè¿è¡Œrknnç‰ˆæœ¬çš„yolov5/ title=é…ç½®orangepi5proè¿è¡Œrknnç‰ˆæœ¬çš„yolov5>é…ç½®orangepi5proè¿è¡Œrknnç‰ˆæœ¬çš„yolov5</a></div></div><div class=aside-list-item><a class=thumbnail href=/articles/docs/è®¡ç®—æœºæ§åˆ¶apmé£æ§è‡ªåŠ¨é£è¡Œ/ title=è®¡ç®—æœºæ§åˆ¶apmé£æ§è‡ªåŠ¨é£è¡Œ> <picture class="post_bg progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/img00006.8f57f1d144c2cfd7.webp><source media="(min-width: 75em)" srcset="/processed_images/img00006.688adcb5ebd82ad6.avif?w=75em"><source media="(min-width: 60em)" srcset="/processed_images/img00006.8e3bcf4e0c9fd77c.avif?w=60em"><source media="(min-width: 45em)" srcset="/processed_images/img00006.08513801052a4920.avif?w=45em"><source media="(min-width: 30em)" srcset="/processed_images/img00006.0928215d8428e769.avif?w=30em"><source media="(min-width: 22em)" srcset="/processed_images/img00006.c83fffe523ead88b.avif?w=22em"><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" srcset="/processed_images/img00006.0beae348737c79a0.webp?w=22em 360w,
              /processed_images/img00006.1e5d356251b272fe.webp?w=30em 500w,
              /processed_images/img00006.c010a791dd57f875.webp?w=45em 720w,
              /processed_images/img00006.86f2248bcd34f02f.webp?w=60em 960w,
              /processed_images/img00006.799278f602588342.webp?w=75em 1200w" class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this)><noscript><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" decoding=async loading=lazy></noscript></picture> </a><div class=content><a class=title href=/articles/docs/è®¡ç®—æœºæ§åˆ¶apmé£æ§è‡ªåŠ¨é£è¡Œ/ title=è®¡ç®—æœºæ§åˆ¶apmé£æ§è‡ªåŠ¨é£è¡Œ>è®¡ç®—æœºæ§åˆ¶apmé£æ§è‡ªåŠ¨é£è¡Œ</a></div></div><div class=aside-list-item><a href="/articles/docs/ç¿»è¯‘[5]-åŸºäºrustå’Œembassyå¼‚æ­¥æ¡†æ¶çš„é£æ§å›ºä»¶_ Holsatus Flight/" title="ç¿»è¯‘[5]-åŸºäºrustå’Œembassyå¼‚æ­¥æ¡†æ¶çš„é£æ§å›ºä»¶_ Holsatus Flight" class=thumbnail> <picture class="post_bg progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/img00006.8f57f1d144c2cfd7.webp><source media="(min-width: 75em)" srcset="/processed_images/img00006.688adcb5ebd82ad6.avif?w=75em"><source media="(min-width: 60em)" srcset="/processed_images/img00006.8e3bcf4e0c9fd77c.avif?w=60em"><source media="(min-width: 45em)" srcset="/processed_images/img00006.08513801052a4920.avif?w=45em"><source media="(min-width: 30em)" srcset="/processed_images/img00006.0928215d8428e769.avif?w=30em"><source media="(min-width: 22em)" srcset="/processed_images/img00006.c83fffe523ead88b.avif?w=22em"><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" srcset="/processed_images/img00006.0beae348737c79a0.webp?w=22em 360w,
              /processed_images/img00006.1e5d356251b272fe.webp?w=30em 500w,
              /processed_images/img00006.c010a791dd57f875.webp?w=45em 720w,
              /processed_images/img00006.86f2248bcd34f02f.webp?w=60em 960w,
              /processed_images/img00006.799278f602588342.webp?w=75em 1200w" class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this)><noscript><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" decoding=async loading=lazy></noscript></picture> </a><div class=content><a href="/articles/docs/ç¿»è¯‘[5]-åŸºäºrustå’Œembassyå¼‚æ­¥æ¡†æ¶çš„é£æ§å›ºä»¶_ Holsatus Flight/" title="ç¿»è¯‘[5]-åŸºäºrustå’Œembassyå¼‚æ­¥æ¡†æ¶çš„é£æ§å›ºä»¶_ Holsatus Flight" class=title>ç¿»è¯‘[5]-åŸºäºrustå’Œembassyå¼‚æ­¥æ¡†æ¶çš„é£æ§å›ºä»¶_ Holsatus Flight</a></div></div><div class=aside-list-item><a class=thumbnail href=/articles/docs/æ­å»ºArduPilotçš„SITLä»¿çœŸç¯å¢ƒ/ title=æ­å»ºArduPilotçš„SITLä»¿çœŸç¯å¢ƒ> <picture class="post_bg progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/img00006.8f57f1d144c2cfd7.webp><source media="(min-width: 75em)" srcset="/processed_images/img00006.688adcb5ebd82ad6.avif?w=75em"><source media="(min-width: 60em)" srcset="/processed_images/img00006.8e3bcf4e0c9fd77c.avif?w=60em"><source media="(min-width: 45em)" srcset="/processed_images/img00006.08513801052a4920.avif?w=45em"><source media="(min-width: 30em)" srcset="/processed_images/img00006.0928215d8428e769.avif?w=30em"><source media="(min-width: 22em)" srcset="/processed_images/img00006.c83fffe523ead88b.avif?w=22em"><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" srcset="/processed_images/img00006.0beae348737c79a0.webp?w=22em 360w,
              /processed_images/img00006.1e5d356251b272fe.webp?w=30em 500w,
              /processed_images/img00006.c010a791dd57f875.webp?w=45em 720w,
              /processed_images/img00006.86f2248bcd34f02f.webp?w=60em 960w,
              /processed_images/img00006.799278f602588342.webp?w=75em 1200w" class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this)><noscript><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" decoding=async loading=lazy></noscript></picture> </a><div class=content><a class=title href=/articles/docs/æ­å»ºArduPilotçš„SITLä»¿çœŸç¯å¢ƒ/ title=æ­å»ºArduPilotçš„SITLä»¿çœŸç¯å¢ƒ>æ­å»ºArduPilotçš„SITLä»¿çœŸç¯å¢ƒ</a></div></div></div></div><div class="card-widget card-categories"><div class=item-headline><i class=icon-folder-open></i><span>åˆ†ç±»</span></div><div class=aside-list><ul class=card-category-list><li class=card-category-list-item><a class=card-category-list-link href=/categories/misc/ rel=tag> <span class=card-category-list-name>æ‚è°ˆ</span> <span class=card-category-list-count>6</span> </a><li class=card-category-list-item><a class=card-category-list-link href=/categories/theme/ rel=tag> <span class=card-category-list-name>ä¸»é¢˜</span> <span class=card-category-list-count>25</span> </a></ul></div></div></div></div></main><footer id=footer><div id=wjx-footer-bar><div class=footer-logo>qsbye</div><div class=footer-bar-description>ByeIOÂ·å¼€å‘è€…åšå®¢|æŠ€æœ¯è§£å†³æ–¹æ¡ˆ|å¼€å‘æ€è€ƒ|æ€»ç»“</div><a class=footer-bar-link href=/about>äº†è§£æ›´å¤š</a></div><div id=footer_deal><a rel="external nofollow noopener noreferrer" class=deal_link href=mailto:mail@example.com target=_blank title=Mail> <i class=icon-envelope></i> </a><picture class="footer_mini_logo progressive-picture" onclick="btf.scrollToDest(0, 500)" style=border-radius:500px><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/avatar.d5facb578cf12fdc.webp><source media="(min-width: 1em)" srcset=/processed_images/avatar.8bb6bf05eac51207.avif><img alt=è¿”å›é¡¶éƒ¨ class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this) src=/processed_images/avatar.06a48b3b45482d6b.webp><noscript><img alt=è¿”å›é¡¶éƒ¨ decoding=async loading=lazy src=/processed_images/avatar.06a48b3b45482d6b.webp></noscript></picture><a rel="external nofollow noopener noreferrer" class=deal_link href=https://github.com/iWangJiaxiang/zola-theme-jiaxiang.wang target=_blank title=Github> <i class=icon-github></i> </a></div><div id=wjx-footer><div class=footer-group><h3 class=footer-title>æ–‡åº“</h3><div class=footer-links><a class=footer-item data-pjax href=/archives target=_blank>å…¨éƒ¨æ–‡ç« </a><a class=footer-item data-pjax href=/categories target=_blank>åˆ†ç±»åˆ—è¡¨</a><a class=footer-item data-pjax href=/tags target=_blank>æ ‡ç­¾åˆ—è¡¨</a><a class=footer-item data-pjax href=javascript:toRandomPost() target=_blank>éšæœºæ–‡ç« </a></div></div><div class=footer-group><h3 class=footer-title>ä½œå“</h3><div class=footer-links><a class=footer-item data-pjax href=/articles/misc/lorem-ipsum target=_blank>Lorem Ipsum</a></div></div><div class=footer-group><h3 class=footer-title>åè®®</h3><div class=footer-links><a class=footer-item data-pjax href=/privacy target=_blank>éšç§åè®®</a><a class=footer-item data-pjax href=/cookies target=_blank>Cookies</a><a class=footer-item data-pjax href=/copyright target=_blank>ç‰ˆæƒåè®®</a></div></div><div class=footer-group><div class=footer-title-group><h3 class=footer-title>å‹é“¾</h3><button class=random-friends-btn id=footer-random-friends-btn onclick=javascript:wjx.addFriendLinksInFooter(); title=æ¢ä¸€æ‰¹å‹æƒ…é“¾æ¥><i class=icon-arrow-rotate-right style=font-size:16px></i></button></div><div class=footer-links id=friend-links-in-footer></div></div></div><div id=footer-bar style=padding:1rem><div class=footer-bar-links><div class=footer-bar-left><div id=footer-bar-tips><div class=copyright-group>Â© <span class=inline-word id=copyright-info>2025</span> Â ByÂ  <a class=footer-bar-link href=/ target=_blank> <picture class=progressive-picture id=copyright-logo><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/avatar.d5facb578cf12fdc.webp><source media="(min-width: 1em)" srcset=/processed_images/avatar.8bb6bf05eac51207.avif><img class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this) src=/processed_images/avatar.06a48b3b45482d6b.webp><noscript><img decoding=async loading=lazy src=/processed_images/avatar.06a48b3b45482d6b.webp></noscript></picture> ByeIOÂ·å¼€å‘è€…åšå®¢ </a><script defer>var startYear = 2025;
                            var currentYear = new Date().getFullYear();
                            var copyrightInfo = `${startYear !== currentYear ? startYear + ' - ' : ''}${currentYear}`;
                            document.getElementById('copyright-info').innerHTML = copyrightInfo;</script></div><div class=compliance-group><a rel="noopener external nofollow noreferrer" class=footer-bar-link href=https://beian.miit.gov.cn/#/Integrated/index target=_blank> ICP </a><a class=footer-bar-link href=https://github.com/iWangJiaxiang/zola-theme-jiaxiang.wang> <div class=status-light></div> <span>æœ¬ç«™åŠä¸»é¢˜åŸºäº Zola æ„å»º</span> </a></div></div></div><div class=footer-bar-right><a class=footer-bar-link href=/subscribe target=_blank>è®¢é˜…</a><a class=footer-bar-link href=https://github.com/iWangJiaxiang/zola-theme-jiaxiang.wang target=_blank>ä¸»é¢˜</a><a class=footer-bar-link href=/about>å…³äº</a><a class=footer-bar-link href=mailto:mail@example.com target=_blank>åé¦ˆ</a><a class="footer-bar-link cc" href=/copyright rel=license target=_blank title=CCç‰ˆæƒåè®®> <i class=icon-copyright-line></i> <i class=icon-creative-commons-by-line></i> <i class=icon-creative-commons-nc-line></i> <i class=icon-creative-commons-nd-line></i> </a></div></div></div><div id=quit-box onclick=RemoveRewardMask()></div><div class="comment-barrage needEndHide" style=display:none></div><style>a.footer-bar-link.cloud{align-items:center;display:flex}img.entered.loading.cloud{height:32px}</style></footer></div><div id=sidebar><div id=menu-mask></div><div id=sidebar-menus><span class=sidebar-menu-item-title>åŠŸèƒ½</span><div class=sidebar-menu-item><button class="darkmode_switchbutton menu-child" href=javascript:void(0); onclick=rm.switchDarkMode() title=æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢><i class=icon-moon style=font-size:.9rem;line-height:2></i> <span>æ˜¾ç¤ºæ¨¡å¼</span></button></div><div class=back-menu-list-groups><div class=back-menu-list-group><div class=back-menu-list-title>ä½œå“</div><div class=back-menu-list><a class="back-menu-item nav-item" href=/articles/misc/lorem-ipsum>  <i class=icon-music style=font-size:.9em></i> <span class=back-menu-item-text>Lorem Ipsum</span> </a><a class="back-menu-item nav-item" href=/articles/misc/lorem-ipsum>  <i class=icon-music style=font-size:.9em></i> <span class=back-menu-item-text>Lorem Ipsum</span> </a></div></div></div><div class=menus_items><div class=menus_item><button class=site-page><span>æ–‡åº“</span></button><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" draggable=false href=/archives> <i class="icon-book-open faa-tada" style=font-size:.9em></i> <span>å…¨éƒ¨æ–‡ç« </span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=/categories> <i class="icon-folder-open faa-tada" style=font-size:.9em></i> <span>åˆ†ç±»åˆ—è¡¨</span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=/tags> <i class="icon-tags faa-tada" style=font-size:.9em></i> <span>æ ‡ç­¾åˆ—è¡¨</span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=javascript:toRandomPost()> <i class="icon-artstation faa-tada" style=font-size:.9em></i> <span>éšæœºæ–‡ç« </span> </a></ul></div><div class=menus_item><a class=site-page href=/tags/work> <span>æ¨è</span> </a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" draggable=false href=/articles/docs/readme> <i class="icon-music faa-tada" style=font-size:.9em></i> <span>åšå®¢ä¸»é¢˜ä»‹ç»</span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=/articles/misc/lorem-ipsum> <i class="icon-music faa-tada" style=font-size:.9em></i> <span>Lorem Ipsum</span> </a></ul></div><div class=menus_item><button class=site-page><span>å‹é“¾</span></button><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" draggable=false href=/friends> <i class="icon-link faa-tada" style=font-size:.9em></i> <span>å‹é“¾åˆ—è¡¨</span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=javascript:travelling()> <i class="icon-paper-plane faa-tada" style=font-size:.9em></i> <span>éšæœºå‘ç°</span> </a></ul></div><div class=menus_item><button class=site-page><span>æˆ‘çš„</span></button><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" draggable=false href=/about> <i class="icon-rocket faa-tada" style=font-size:.9em></i> <span>å…³äºæœ¬äºº</span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=/equipment> <i class="icon-artstation faa-tada" style=font-size:.9em></i> <span>æˆ‘çš„è£…å¤‡</span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=/tags/project> <i class="icon-lightbulb faa-tada" style=font-size:.9em></i> <span>æˆ‘çš„é¡¹ç›®</span> </a></ul></div></div><span class=sidebar-menu-item-title>æ ‡ç­¾</span><div class="card-widget card-tags card-archives card-webinfo card-allinfo"><div class=item-headline></div><div class=card-tag-cloud><a class=tag-item href=/tags/blog/ style=font-size:1em title=åšå®¢>  åšå®¢<sup>31</sup> </a><a class=tag-item href=/tags/docs/ style=font-size:1em title=æ–‡æ¡£>  æ–‡æ¡£<sup>25</sup> </a><a class=tag-item href=/tags/featured/ style=font-size:1em title=å¿…çœ‹>  å¿…çœ‹<sup>30</sup> </a><a class=tag-item href=/tags/hot/ style=font-size:1em title=çƒ­é—¨>  çƒ­é—¨<sup>30</sup> </a><a class=tag-item href=/tags/project/ style=font-size:1em title=é¡¹ç›®>  é¡¹ç›®<sup>1</sup> </a><a class=tag-item href=/tags/work/ style=font-size:1em title=work>  work<sup>1</sup> </a></div></div></div></div><div id=console><div class=close-btn href=javascript:void(0); onclick=wjx.hideConsole()><i class=icon-circle-xmark></i></div><div class=console-card-group><div class=console-card-group-left><div class=console-card id=card-newest-comments onclick=wjx.hideConsole()><div class=card-content><div class=author-content-item-tips>äº’åŠ¨</div><span class=author-content-item-title>æœ€è¿‘è¯„è®º</span></div><div class=aside-list><span>æ­£åœ¨åŠ è½½ä¸­...</span></div></div></div><div class=console-card-group-right><div class="console-card tags" onclick=wjx.hideConsole()><div class=card-content><div class=author-content-item-tips>æ ‡ç­¾</div><span class=author-content-item-title>å¯»æ‰¾æ„Ÿå…´è¶£çš„é¢†åŸŸ</span></div><div class=card-tag-cloud><a href=/tags/blog/ rel=tag style=color:#d3d3d3;font-size:1em> åšå®¢<sup>31</sup> </a><a href=/tags/docs/ rel=tag style=color:#d3d3d3;font-size:1em> æ–‡æ¡£<sup>25</sup> </a><a href=/tags/featured/ rel=tag style=color:#d3d3d3;font-size:1em> å¿…çœ‹<sup>30</sup> </a><a href=/tags/hot/ rel=tag style=color:#d3d3d3;font-size:1em> çƒ­é—¨<sup>30</sup> </a><a href=/tags/project/ rel=tag style=color:#d3d3d3;font-size:1em> é¡¹ç›®<sup>1</sup> </a><a href=/tags/work/ rel=tag style=color:#d3d3d3;font-size:1em> work<sup>1</sup> </a></div></div><div class="console-card history" onclick=wjx.hideConsole()><div class=item-headline><i class="fas fa-archive"></i><span>æ–‡ç« </span></div><ul class=card-archive-list><ul><li class=card-archive-list-item><a class=card-archive-list-link href=/archives> <span class=card-archive-list-date> 2025 1æœˆ </span> <div class=card-archive-list-count-group><span class=card-archive-list-count>25</span><span class=card-archive-list-count-unit>ç¯‡</span></div> </a></ul><ul><li class=card-archive-list-item><a class=card-archive-list-link href=/archives> <span class=card-archive-list-date> 2024 12æœˆ </span> <div class=card-archive-list-count-group><span class=card-archive-list-count>6</span><span class=card-archive-list-count-unit>ç¯‡</span></div> </a></ul></ul></div></div></div><div class=button-group><div class=console-btn-item><button rel="external nofollow" class=darkmode_switchbutton href=javascript:void(0); onclick=navFn.switchDarkMode(); title=æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢><i class=icon-moon-clear-fill style=font-size:1rem></i></button></div><div class=console-btn-item id=consoleHideAside onclick=wjx.hideAsideBtn() title=è¾¹æ æ˜¾ç¤ºæ§åˆ¶><button class=asideSwitch title=ä¾§è¾¹æ å¼€å…³><i class=icon-arrows-left-right></i></button></div><div class="console-btn-item on" id=consoleCommentBarrage onclick=wjx.switchCommentBarrage() title=çƒ­è¯„å¼€å…³><button class=commentBarrage><i class=icon-chat--fill></i></button></div></div><div class=console-mask href=javascript:void(0); onclick=wjx.hideConsole()></div></div><div id=rightside><div id=rightside-config-hide><button id=translateLink title=ç®€ç¹è½¬æ¢ type=button>ç¹</button><button id=darkmode title=æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢ type=button><i class=icon-circle-half-stroke></i></button><button id=hide-aside-btn title=å•æ å’ŒåŒæ åˆ‡æ¢ type=button><i class=icon-arrows-left-right></i></button></div><div id=rightside-config-show><button id=rightside-config title=è®¾ç½® type=button><i class=icon-gear></i></button><a href=#post-comment id=to_comment title=ç›´è¾¾è¯„è®º><i class=icon-chat--fill style=font-size:17px></i></a><button id=go-up title=å›åˆ°é¡¶éƒ¨ type=button><i class=icon-arrow-up></i></button></div></div><link onload="this.onload=null;this.rel='stylesheet'" as=style href=/css/read-mode.css rel=preload><noscript><link href=/css/read-mode.css rel=stylesheet></noscript><div class=js-pjax><div id=rightMenu><div class="rightMenu-group rightMenu-small"><div class=rightMenu-item id=menu-backward><i class=icon-arrow-left></i></div><div class=rightMenu-item id=menu-forward><i class=icon-arrow-right></i></div><div class=rightMenu-item id=menu-refresh><i class=icon-arrow-rotate-right></i></div><div class=rightMenu-item id=menu-top><i class=icon-arrow-up></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class=rightMenu-item id=menu-copytext><i class=icon-copy></i><span>å¤åˆ¶é€‰ä¸­æ–‡æœ¬</span></div><div class=rightMenu-item id=menu-pastetext><i class=icon-paste></i><span>ç²˜è´´æ–‡æœ¬</span></div><a class=rightMenu-item id=menu-commenttext> <i class=icon-comment-medical></i> <span>å¼•ç”¨åˆ°è¯„è®º</span> </a><div class=rightMenu-item id=menu-newwindow><i class=icon-window-restore></i><span>æ–°çª—å£æ‰“å¼€</span></div><div class=rightMenu-item id=menu-copylink><i class=icon-link></i><span>å¤åˆ¶é“¾æ¥åœ°å€</span></div><div class=rightMenu-item id=menu-copyimg><i class=icon-images></i><span>å¤åˆ¶æ­¤å›¾ç‰‡</span></div><div class=rightMenu-item id=menu-downloadimg><i class=icon-download></i><span>ä¸‹è½½æ­¤å›¾ç‰‡</span></div><div class=rightMenu-item id=menu-newwindowimg><i class=icon-window-restore></i><span>æ–°çª—å£æ‰“å¼€å›¾ç‰‡</span></div><div class=rightMenu-item id=menu-search><i class=icon-search--line></i><span>ç«™å†…æœç´¢</span></div><div class=rightMenu-item id=menu-searchBaidu><i class=icon-baidu></i><span>ç™¾åº¦æœç´¢</span></div><div class=rightMenu-item id=menu-music-toggle><i class=icon-play></i><span>æ’­æ”¾éŸ³ä¹</span></div><div class=rightMenu-item id=menu-music-back><i class=icon-backward></i><span>åˆ‡æ¢åˆ°ä¸Šä¸€é¦–</span></div><div class=rightMenu-item id=menu-music-forward><i class=icon-forward></i><span>åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–</span></div><div onclick="javascript:window.open('https://y.qq.com/n/ryqq/playlist/xxxxx')" class=rightMenu-item id=menu-music-playlist><i class=icon-radio></i><span>æŸ¥çœ‹æ‰€æœ‰æ­Œæ›²</span></div><div class=rightMenu-item id=menu-music-copyMusicName><i class=icon-copy></i><span>å¤åˆ¶æ­Œå</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id=menu-randomPost onclick=toRandomPost()> <i class=icon-shuffle></i> <span>éšä¾¿é€›é€›</span> </a><a class="rightMenu-item menu-link" href=../categories> <i class=icon-cube></i> <span>åšå®¢åˆ†ç±»</span> </a><a class="rightMenu-item menu-link" href=../tags> <i class=icon-tags></i> <span>æ–‡ç« æ ‡ç­¾</span> </a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><div class=rightMenu-item id=menu-copy><i class=icon-copy></i><span>å¤åˆ¶åœ°å€</span></div><div class=rightMenu-item draggable=false id=menu-commentBarrage style=display:flex><i class=icon-chat--fill style=font-size:19px></i><span class=menu-commentBarrage-text>æ˜¾ç¤ºçƒ­è¯„</span></div><div class=rightMenu-item id=menu-darkmode><i class=icon-moon-clear-fill style=font-size:19px></i><span class=menu-darkmode-text>æ·±è‰²æ¨¡å¼</span></div><div class=rightMenu-item id=menu-translate><i class=icon-fanti style=font-size:19px></i><span>è½‰ç‚ºç¹é«”</span></div></div></div><div id=rightmenu-mask></div></div><script defer onload src=/libs/qrcode/qrcode.min.js></script><script defer src=/libs/view-image/view-image.min.js></script><script defer src=/libs/tocbot/4.18.2/tocbot.min.js></script><link onload="this.onload=null;this.rel='stylesheet'" as=style href=/libs/tocbot/4.18.2/tocbot.css rel=preload><noscript><link href=/libs/tocbot/4.18.2/tocbot.css rel=stylesheet></noscript><script async src=/libs/snackbar/snackbar.min.js></script><script>var meting_api = "https:&#x2F;&#x2F;api.i-meto.com&#x2F;meting&#x2F;api?server=:server&amp;type=:type&amp;id=:id&amp;r=:r";</script><canvas height=880 id=universe width=1312></canvas><script defer src=/libs/canvas/dark.js></script><script src=/libs/waterfall/waterfall.min.js></script><script src=/libs/fast-average-color/index.browser.min.js></script><script>let pjaxSelectors = ['title', '#body-wrap', '#rightside-config-hide', '#rightside-config-show', '.js-pjax', '#site-config']
          
    pjaxSelectors.unshift('meta[property="og:type"]', 'meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]', 'meta[property="og:description"]'
            , 'meta[name="twitter:title"]', 'meta[name="twitter:url"]', 'meta[name="twitter:description"]', 'meta[name="twitter:image"]', 'meta[name="description"]')
    
    var pjax = new Pjax({
        elements: 'a:not([target="_blank"])',
        selectors: pjaxSelectors,
        cacheBust: false,
        //debug: true,        
        analytics: false,
        scrollRestoration: false
    })</script><script defer src=/js/rightmenu.js></script><script data-pjax defer src=/production/js/abstract/local.js></script><script data-pjax defer src=/production/js/bundle.js></script><script defer src=/js/tw_cn.js></script><script defer src=/libs/instantpage/instantpage.min.js type=module></script><link onload="this.rel='stylesheet'" as=style href=/libs/prism/prism.min.css rel=preload><noscript><link href=/libs/prism/prism.min.css rel=stylesheet></noscript><link onload="this.rel='stylesheet'" as=style href=/libs/prism/code.css rel=preload><noscript><link href=/libs/prism/code.css rel=stylesheet></noscript><link onload="this.rel='stylesheet'" as=style data-code-theme=light href=/libs/prism/themes/prism-one-dark.css rel=preload><noscript><link href=/libs/prism/themes/prism-one-dark.css rel=stylesheet></noscript><link onload="this.rel='stylesheet'" as=style data-code-theme=dark href=/libs/prism/themes/prism-one-dark.css rel=preload><noscript><link href=/libs/prism/themes/prism-one-dark.css rel=stylesheet></noscript><script defer src=/libs/prism/prism.min.js></script><style>#article-container .code-toolbar pre.close{height:300px;overflow:hidden}</style>