<!doctype html><html lang=zh-CN><head><title>æŠ˜è…¾ç¬”è®°[24]-ä½¿ç”¨ruståŸºäºå…‰æµæ³•å¯¹æ¯”å›¾åƒ | ByeIOÂ·å¼€å‘è€…åšå®¢</title><meta content=ByeIOÂ·å¼€å‘è€…åšå®¢ property=og:site_name><meta content=article property=og:type><meta content=æŠ˜è…¾ç¬”è®°[24]-ä½¿ç”¨ruståŸºäºå…‰æµæ³•å¯¹æ¯”å›¾åƒ property=og:title><meta content=//articles/docs/æŠ˜è…¾ç¬”è®°[24]-ä½¿ç”¨ruståŸºäºå…‰æµæ³•å¯¹æ¯”å›¾åƒ/ property=og:url><meta content="ä½¿ç”¨rustæ¨ç†onnxæ¨¡å‹è·å–ä¸¤å¼ å›¾ç‰‡çš„å…‰æµä¿¡æ¯, æ¯”è¾ƒå›¾ç‰‡ä¹‹é—´çš„å·®å¼‚å¹¶ä½¿ç”¨è‰²è½®ç»˜åˆ¶å·®å¼‚éƒ¨åˆ†." property=og:description><meta content=/processed_images/img00006.3250c5dc35a28271.webp property=og:image><meta content=summary_large_image name=twitter:card><meta content=æŠ˜è…¾ç¬”è®°[24]-ä½¿ç”¨ruståŸºäºå…‰æµæ³•å¯¹æ¯”å›¾åƒ name=twitter:title><meta content=//articles/docs/æŠ˜è…¾ç¬”è®°[24]-ä½¿ç”¨ruståŸºäºå…‰æµæ³•å¯¹æ¯”å›¾åƒ/ name=twitter:url><meta content="ä½¿ç”¨rustæ¨ç†onnxæ¨¡å‹è·å–ä¸¤å¼ å›¾ç‰‡çš„å…‰æµä¿¡æ¯, æ¯”è¾ƒå›¾ç‰‡ä¹‹é—´çš„å·®å¼‚å¹¶ä½¿ç”¨è‰²è½®ç»˜åˆ¶å·®å¼‚éƒ¨åˆ†." name=twitter:description><meta content=/processed_images/img00006.3250c5dc35a28271.webp name=twitter:image><meta content="ä½¿ç”¨rustæ¨ç†onnxæ¨¡å‹è·å–ä¸¤å¼ å›¾ç‰‡çš„å…‰æµä¿¡æ¯, æ¯”è¾ƒå›¾ç‰‡ä¹‹é—´çš„å·®å¼‚å¹¶ä½¿ç”¨è‰²è½®ç»˜åˆ¶å·®å¼‚éƒ¨åˆ†." name=description><script id=ld-json type=application/ld+json>
        {
          "@context": "https://schema.org/",
          "@type": "Article",
          "headline": "æŠ˜è…¾ç¬”è®°[24]-ä½¿ç”¨ruståŸºäºå…‰æµæ³•å¯¹æ¯”å›¾åƒ",
          "author": {
            "@type": "Person",
            "name": "qsbye",
            "url": "/about"
          },
          "image": "/processed_images/img00006.c4abedc898f992a6.webp",
          "datePublished": "2025-01-01T00:00:00+00:00",
          
          "description": "ä½¿ç”¨rustæ¨ç†onnxæ¨¡å‹è·å–ä¸¤å¼ å›¾ç‰‡çš„å…‰æµä¿¡æ¯, æ¯”è¾ƒå›¾ç‰‡ä¹‹é—´çš„å·®å¼‚å¹¶ä½¿ç”¨è‰²è½®ç»˜åˆ¶å·®å¼‚éƒ¨åˆ†."
        }
    </script><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content="telephone=no" name=format-detection><meta content=var(--wjx-card-bg) name=theme-color><link href=/manifest.json rel=manifest><link href=/img/avatar.png rel=icon type=image/x-icon><link href=/img/avatar.png rel=apple-touch-icon><link href=/img/avatar.png rel=bookmark><link href=/img/avatar.png rel=apple-touch-icon-precomposed sizes=180x180><script src=/libs/jquery/jquery-3.7.1.min.js></script><script src=/libs/pjax/pjax.min.js></script><script src=/production/js/utils.js></script><link href=/production/css/blog.css rel=stylesheet><link href=/css/custom.css rel=stylesheet><link onload="this.onload=null;this.rel='stylesheet'" as=style href=/libs/snackbar/snackbar.min.css rel=preload><noscript><link href=/libs/snackbar/snackbar.min.css rel=stylesheet></noscript><script>// Added non-passive event listener
  !function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){var e,t=["scroll","wheel","touchstart","touchmove","touchenter","touchend","touchleave","mouseout","mouseleave","mouseup","mousedown","mousemove","mouseenter","mousewheel","mouseover"];if(function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}()){var n=EventTarget.prototype.addEventListener;e=n,EventTarget.prototype.addEventListener=function(n,o,r){var i,s="object"==typeof r&&null!==r,u=s?r.capture:r;(r=s?function(e){var t=Object.getOwnPropertyDescriptor(e,"passive");return t&&!0!==t.writable&&void 0===t.set?Object.assign({},e):e}(r):{}).passive=void 0!==(i=r.passive)?i:-1!==t.indexOf(n)&&!0,r.capture=void 0!==u&&u,e.call(this,n,o,r)},EventTarget.prototype.addEventListener._original=e}});</script><script>((win) => {
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return;
        const now = new Date();
        const expiryDay = ttl * 86400000;
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        };
        localStorage.setItem(key, JSON.stringify(item));
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key);

        if (!itemStr) {
          return undefined;
        }
        const item = JSON.parse(itemStr);
        const now = new Date();

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key);
          return undefined;
        }
        return item.value;
      },
    };

    win.getScript = (url) =>
      new Promise((resolve, reject) => {
        const script = document.createElement("script");
        script.src = url;
        script.async = true;
        script.onerror = reject;
        script.onload = script.onreadystatechange = function () {
          const loadState = this.readyState;
          if (loadState && loadState !== "loaded" && loadState !== "complete")
            return;
          script.onload = script.onreadystatechange = null;
          resolve();
        };
        document.head.appendChild(script);
      });

    win.getCSS = (url, id = false) =>
      new Promise((resolve, reject) => {
        const link = document.createElement("link");
        link.rel = "stylesheet";
        link.href = url;
        if (id) link.id = id;
        link.onerror = reject;
        link.onload = link.onreadystatechange = function () {
          const loadState = this.readyState;
          if (loadState && loadState !== "loaded" && loadState !== "complete")
            return;
          link.onload = link.onreadystatechange = null;
          resolve();
        };
        document.head.appendChild(link);
      });

    win.activateDarkMode = function () {
      document.documentElement.setAttribute("data-theme", "dark");
      document.documentElement.classList.add("color-scheme-dark");
      wjx.initThemeColor();
    };
    win.activateLightMode = function () {
      document.documentElement.setAttribute("data-theme", "light");
      document.documentElement.classList.remove("color-scheme-dark");
      wjx.initThemeColor();
    };
    const t = saveToLocal.get("theme");

    const isDarkMode = window.matchMedia(
      "(prefers-color-scheme: dark)"
    ).matches;
    const isLightMode = window.matchMedia(
      "(prefers-color-scheme: light)"
    ).matches;
    const isNotSpecified = window.matchMedia(
      "(prefers-color-scheme: no-preference)"
    ).matches;
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified;

    if (t === undefined) {
      if (isLightMode) activateLightMode();
      else if (isDarkMode) activateDarkMode();
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date();
        const hour = now.getHours();
        const isNight = hour <= 6 || hour >= 18;
        isNight ? activateDarkMode() : activateLightMode();
      }
      window
        .matchMedia("(prefers-color-scheme: dark)")
        .addListener(function (e) {
          if (saveToLocal.get("theme") === undefined) {
            e.matches ? activateDarkMode() : activateLightMode();
          }
        });
    } else if (t === "light") activateLightMode();
    else activateDarkMode();

    if ("system" === "dark")
      activateDarkMode();
    else activateLightMode();

    const asideStatus = saveToLocal.get("aside-status");
    if (asideStatus !== undefined) {
      if (asideStatus === "hide") {
        document.documentElement.classList.add("hide-aside");
      } else {
        document.documentElement.classList.remove("hide-aside");
      }
    }
  })(window);</script><script data-pace-options='{ "restartOnRequestAfter":false,"eventLag":false}' src=/libs/pace/pace.min.js></script><script defer src=/libs/clipboard/clipboard.min.js></script><script src=/libs/countup/countup.js></script><link href=/icon/font.css rel=stylesheet><style>[data-theme=light]{--wjx-theme:#425aef!important;--wjx-theme-op:#425aef23!important;--wjx-theme-op-deep:#425aefdd!important;--wjx-theme-none:#425aef00!important}[data-theme=dark]{--wjx-theme:#f2b94b!important;--wjx-theme-op:#f2b94b23!important;--wjx-theme-op-deep:#f2b94bdd!important;--wjx-theme-none:#f2b94b00!important}:root{--halo-comment-widget-component-card-bg:var(--wjx-card-bg);--halo-comment-widget-component-theme-op:var(--wjx-theme-op);--halo-comment-widget-component-card-border:var(--wjx-card-border);--halo-comment-widget-component-shadow-border:var(--wjx-shadow-border);--halo-comment-widget-component-secondtext:var(--wjx-secondtext);--halo-comment-widget-component-lighttext:var(--wjx-lighttext);--halo-comment-widget-component-secondbg:var(--wjx-secondbg);--halo-comment-widget-component-fontcolor:var(--wjx-fontcolor);--halo-comment-widget-component-main:var(--wjx-main);--halo-comment-widget-component-background:var(--wjx-background);--halo-comment-widget-component-white:var(--wjx-white);--halo-comment-widget-component-shadow-black:var(--wjx-shadow-black)}#page{--halo-comment-widget-component-padding:1rem}.color-scheme-dark,.dark,[data-color-scheme=dark]{--halo-search-widget-color-modal-layer:var(--wjx-maskbgdeep);--halo-search-widget-color-modal-content-bg:var(--wjx-card-bg);--halo-search-widget-color-form-input:#fffc;--halo-search-widget-color-form-input-placeholder:#6b7280d9;--halo-search-widget-color-form-input-bg:var(--wjx-card-bg);--halo-search-widget-color-form-divider:#bbbbbb0f;--halo-search-widget-color-result-item-bg:var(--wjx-card-bg);--halo-search-widget-color-result-item-hover-bg:#90939914;--halo-search-widget-color-result-item-title:#fffc;--halo-search-widget-color-result-item-content:#ffffff82;--halo-search-widget-color-command-kbd-item:#c0c4ccb3;--halo-search-widget-color-command-kbd-border:#bbbbbb0f;--halo-search-widget-color-result-empty:#6b7280d9}[data-theme=light]{--halo-search-widget-color-result-item-title:#4b5563}</style><script id=site-config>var GLOBAL_CONFIG = {
        
                
        
        
        
        
        htmlType: "post",
        postTitle: "æŠ˜è…¾ç¬”è®°[24]-ä½¿ç”¨ruståŸºäºå…‰æµæ³•å¯¹æ¯”å›¾åƒ",
        isPost: true,
        isHome: false,
        passageTip: {
            enable: true,
            day: 60,
        },
        copyright: {
            enable: false,
            limitCount: 10,
            languages: {
                author: " ä½œè€…ï¼šqsbye",
                link: " é“¾æ¥ï¼š",
                source: " æ¥æºï¼šByeIOÂ·å¼€å‘è€…åšå®¢",
                info: " æç¤ºï¼šè‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„å¹¶ä¿ç•™åŸæ–‡é“¾æ¥ã€‚"
            }
        },
        lightbox: 'fancybox',
        rightMenuEnable: true,
        lazyload: {
            enable: true,
            error: "/img/404.svg"
        },
        isFriendLinksInFooter: true,
        loadingBox: true,
        progress_bar: true,
        navMusicEnable: false,
        isMusic: false,
        helloText: ["ğŸ¤–ï¸ æ•°ç ç§‘æŠ€çˆ±å¥½è€…","ğŸ”¯ å…¨æ ˆæ¶æ„éƒ½åœ¨è¡Œ","ğŸ  æ™ºèƒ½å®¶å±…å°èƒ½æ‰‹","ğŸ¤ ç§‘ç ”ç§‘æ™®ä¸¤ä¸è¯¯","ğŸµ ä¸šä½™åŸåˆ›éŸ³ä¹äºº","ğŸƒ æ–‡è‰ºé’å¹´ç»†èŠ‚æ§","ğŸ” æ¢ç´¢ä¸–ç•Œæ¶‰çŒå¹¿","ğŸ¤› çƒ­çˆ±åˆ†äº«äº¤æœ‹å‹"],
        profileStyle: "one",
        enable: true,
        keyboard: true,
        date_suffix: {
            just: 'åˆšåˆš',
            min: 'åˆ†é’Ÿå‰',
            hour: 'å°æ—¶å‰',
            day: 'å¤©å‰',
            month: 'ä¸ªæœˆå‰'
        },
        Snackbar: {
            chs_to_cht: "ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“",
            cht_to_chs: "ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“",
            day_to_night: "ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼",
            night_to_day: "ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼",
            bgLight: "#425AEF",
            bgDark: "#f2b94b",
            position: "top-center"
        },
        translate: {
            defaultEncoding: "2",
            translateDelay: 0,
            msgToTraditionalChinese: "ç¹",
            msgToSimplifiedChinese: "ç®€",
            rightMenuMsgToTraditionalChinese: "è½‰ç‚ºç¹é«”",
            rightMenuMsgToSimplifiedChinese: "è½¬ä¸ºç®€ä½“"
        },
        prism: {
            enable: true,
            enable_title: true,
            enable_hr: true,
            enable_line: true,
            enable_copy: true,
            enable_expander: true,
            prism_limit: 330,
            enable_height_limit: false
        },
        
        source: {
            power: {
                powerLink: "/",
                showNum: 3
            },
            links: {
                linksUrl: "/friends",
                linksNum: 3
            },
            jQuery: '/libs/jquery/jquery.min.js',
            justifiedGallery: {
                js: '/libs/justified-gallery/fjGallery.min.js',
                css: '/libs/justified-gallery/fjGallery.css'
            },
            fancybox: {
                js: '/libs/fancybox/jquery.fancybox.min.js',
                css: '/null'
            },
            comments: {
                use: "twikoo",
                maxBarrage: 1,
                barrageTime: 4000,
                mailMd5: "",
                lazyload: false,
                textarea: "el-textarea__inner"
            },
            post: {
                dynamicBackground: true
            },
            tool: {
                switch: false
            },
            postAi: {
                
                gptName: "æœ¬åœ°",
                modeName: "local"
            },twikoo: {
                js: "/libs/twikoo/twikoo.all.min.js",
                twikooUrl: "https://your-api-url",
            },
            footer: {
                default_enable: true
            },
            about: {
                
                rewardList: [],
                rewardAmount: 10
            }
        }
    };</script><style id=wjx-theme-styles>:root{--wjx-main:var(--wjx-theme)!important;--wjx-main-op:var(--wjx-theme-op)!important;--wjx-main-op-deep:var(--wjx-theme-op-deep)!important;--wjx-main-op-light:var(--wjx-theme-op-light)!important;--wjx-main-none:var(--wjx-theme-none)!important}</style><script>document.addEventListener('pjax:send', function () {
      // removeEventListener toc scroll
      window.removeEventListener('scroll', window.tocScrollFn);
      typeof preloader === 'object' && preloader.initLoading();
      
      if (window.aplayers) {
          for (let i = 0; i < window.aplayers.length; i++) {
              if (!window.aplayers[i].options.fixed) {
                  window.aplayers[i].destroy()
              }
          }
      }
      
      typeof typed === 'object' && typed.destroy();
      typeof window.initializationRegistry === 'object' && window.initializationRegistry.clear();
      
      //reset readmode
      const $bodyClassList = document.body.classList
      $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
  })
  document.addEventListener('pjax:complete', function () {
      window.refreshFn();
      
      document.querySelectorAll('script[data-pjax]').forEach(item => {
                  const newScript = document.createElement('script')
                  const content = item.text || item.textContent || item.innerHTML || ""
                  Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
                  newScript.appendChild(document.createTextNode(content))
                  item.parentNode.replaceChild(newScript, item)
              }
      );

      typeof chatBtnFn === 'function' && chatBtnFn();
      typeof panguInit === 'function' && panguInit();
      
      // google analytics
      typeof gtag === 'function' && gtag('config', '', {
          'page_path': window.location.pathname
      });
      
      // baidu analytics
      typeof _hmt === 'object' && _hmt.push(['_trackPageview', window.location.pathname]);
      
      typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting();
      
      // Analytics
      if (false) {
          MtaH5.pgv()
      }
      
      // prismjs
      typeof Prism === 'object' && Prism.highlightAll();
      
      typeof preloader === 'object' && preloader.endLoading();
  })
  document.addEventListener('pjax:error', (e) => {
      if (e.request.status === 404 || e.request.status === 500) {
          window.location.href = e.request.responseURL;
      }
  })</script><script data-pjax src=/production/js/main.js></script><script>let initTop = 0
  let isChatShow = true
  const innerHeight = window.innerHeight + 0
  window.addEventListener('scroll', btf.throttle(function (e) {
    const $rightside = document.getElementById('rightside')

    const $header = document.getElementById('page-header')
    const $cookies_window = document.getElementById('cookies-window')
    const isChatBtnHide = typeof chatBtnHide === 'function'
    const isChatBtnShow = typeof chatBtnShow === 'function'
  
    const currentTop = window.scrollY || document.documentElement.scrollTop
    // æ‰¾åˆ°æ»šåŠ¨æ–¹å‘ true is down & false is up
    const isDown = currentTop > initTop
    initTop = currentTop
    if (currentTop > 0) {
        if (isDown) {
            if ($header.classList.contains('nav-visible')) $header.classList.remove('nav-visible')
            if (isChatBtnShow && isChatShow === true) {
                chatBtnHide()
                isChatShow = false
            }
        } else {
            if (!$header.classList.contains('nav-visible')) $header.classList.add('nav-visible')
            if (isChatBtnHide && isChatShow === false) {
                chatBtnShow()
                isChatShow = true
            }
        }
        $header.classList.add('nav-fixed')
        if($cookies_window!=null && $cookies_window!=''){
            $cookies_window.classList.add('cw-hide')
        }
        if ($rightside && window.getComputedStyle($rightside).getPropertyValue('opacity') === '0') {
            $rightside.style.cssText = 'opacity: 0.8; transform: translateX(-58px)'
        }
    } else {
        if (currentTop === 0) {
            $header.classList.remove('nav-fixed', 'nav-visible')
        }
        $rightside.style.cssText = "opacity: ''; transform: ''"
    }
    if (document.body.scrollHeight <= innerHeight) {
        $rightside.style.cssText = 'opacity: 0.8; transform: translateX(-58px)'
    }
  }, 200))</script><script defer src=/libs/katex/katex.min.js></script><body><style>#loading-box{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#loading-box .loading-bg{background:var(--wjx-card-bg);z-index:1999;opacity:1;pointer-events:all;width:100%;height:100%;transition:all .2s;animation:.3s backwards showLoading;display:flex;position:fixed}#loading-box.loaded .loading-bg{pointer-events:none;transition:all .2s;animation:.3s forwards hideLoading}#loading-box .loading-img{width:100px;height:100px;margin:auto;animation-name:loadingAction;animation-duration:.2s;animation-iteration-count:infinite;animation-direction:alternate;overflow:hidden}#loading-box .loading-image-dot{background:#6bdf8f;border:6px solid #fff;border-radius:50%;width:30px;height:30px;position:absolute;top:50%;left:50%;-webkit-transform:translate(18px,24px);-moz-transform:translate(18px,24px);-ms-transform:translate(18px,24px);-o-transform:translate(18px,24px);transform:translate(18px,24px)}@keyframes loadingAction{0%{opacity:1}to{opacity:.6}}@keyframes hideLoading{0%{opacity:1}to{opacity:0}}@keyframes showLoading{0%{opacity:0}to{opacity:1}}</style><div id=loading-box onclick=wjx.hideLoading()><div class=loading-bg><picture class=loading-img style=border-radius:50%;width:100px;height:100px><source media="(min-width: 1em)" srcset=/processed_images/logo.21eeb8b123e2a315.avif><img alt=Loading decoding=async loading=lazy src=/processed_images/logo.caf14bfbf942dbfc.webp><noscript><img decoding=async loading=lazy src=/processed_images/logo.caf14bfbf942dbfc.webp></noscript></picture><div class=loading-image-dot></div></div></div><script>var preloader = {
            endLoading: () => {
                //- document.body.style.overflow = 'auto';
                document.getElementById('loading-box').classList.add("loaded")
            },
            initLoading: () => {
                //- document.body.style.overflow = '';
                document.getElementById('loading-box').classList.remove("loaded")
            }
        }
        window.addEventListener('load', preloader.endLoading())
        setTimeout(function () {
            preloader.endLoading();
        }, 3000)</script><div id=an_music_bg></div><div class=post data-type=post id=body-wrap><header class=post-bg id=page-header><nav class=show id=nav><div id=nav-group><div id=blog_name><div class=back-home-button tabindex=-1><i class="nav-icon back-home-button-icon icon-apps-fill" style=font-size:1rem></i><div class=back-menu-list-groups><div class=back-menu-list-group><div class=back-menu-list-title>ä½œå“</div><div class=back-menu-list><a class="back-menu-item nav-item" href=/articles/misc/lorem-ipsum>  <i class=icon-music style=font-size:.9em></i> <span class=back-menu-item-text>Lorem Ipsum</span> </a><a class="back-menu-item nav-item" href=/articles/misc/lorem-ipsum>  <i class=icon-music style=font-size:.9em></i> <span class=back-menu-item-text>Lorem Ipsum</span> </a></div></div></div></div><a class="nav-item icon-home" data-pjax href=/ id=site-name title=è¿”å›åšå®¢ä¸»é¡µ> <span>ByeIOÂ·å¼€å‘è€…åšå®¢</span> </a></div><div id=page-name-mask><div id=page-name><a clase=nav-item id=page-name-text onclick=btf.scrollToDest(0,500)> æŠ˜è…¾ç¬”è®°[24]-ä½¿ç”¨ruståŸºäºå…‰æµæ³•å¯¹æ¯”å›¾åƒ </a></div></div><div id=menus><div class=menus_items><div class=menus_item><button class="site-page nav-item"><span>æ–‡åº“</span></button><div class=menus_item_child><div class=recursion_menus_item><a class="site-page child nav-item" href=/archives> <i class=icon-book-open style=font-size:.9em></i> <span>å…¨éƒ¨æ–‡ç« </span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=/categories> <i class=icon-folder-open style=font-size:.9em></i> <span>åˆ†ç±»åˆ—è¡¨</span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=/tags> <i class=icon-tags style=font-size:.9em></i> <span>æ ‡ç­¾åˆ—è¡¨</span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=javascript:toRandomPost()> <i class=icon-artstation style=font-size:.9em></i> <span>éšæœºæ–‡ç« </span> </a></div></div></div><div class=menus_item><a class="site-page nav-item" href=/tags/work> <span>æ¨è</span> </a><div class="menus_item_child vertical_nav"><div class=recursion_menus_item><a class="site-page child nav-item" href=/articles/docs/readme> <i class=icon-music style=font-size:.9em></i> <span>åšå®¢ä¸»é¢˜ä»‹ç»</span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=/articles/misc/lorem-ipsum> <i class=icon-music style=font-size:.9em></i> <span>Lorem Ipsum</span> </a></div></div></div><div class=menus_item><button class="site-page nav-item"><span>å‹é“¾</span></button><div class=menus_item_child><div class=recursion_menus_item><a class="site-page child nav-item" href=/friends> <i class=icon-link style=font-size:.9em></i> <span>å‹é“¾åˆ—è¡¨</span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=javascript:travelling()> <i class=icon-paper-plane style=font-size:.9em></i> <span>éšæœºå‘ç°</span> </a></div></div></div><div class=menus_item><button class="site-page nav-item"><span>æˆ‘çš„</span></button><div class=menus_item_child><div class=recursion_menus_item><a class="site-page child nav-item" href=/about> <i class=icon-rocket style=font-size:.9em></i> <span>å…³äºæœ¬äºº</span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=/equipment> <i class=icon-artstation style=font-size:.9em></i> <span>æˆ‘çš„è£…å¤‡</span> </a></div><div class=recursion_menus_item><a class="site-page child nav-item" href=/tags/project> <i class=icon-lightbulb style=font-size:.9em></i> <span>æˆ‘çš„é¡¹ç›®</span> </a></div></div></div></div></div><div id=nav-right><div class=nav-button id=randomPost_button><button class="site-page nav-item" href=javascript:void(0); onclick=toRandomPost() title=éšæœºæ–‡ç« ><i class="nav-icon icon-dice"></i></button></div><div class=nav-button id=darkmode_button><button class="site-page console_switchbutton nav-item" title="åˆ‡æ¢æ¨¡å¼ - æ—¥å¤œäº¤æ›¿ï¼Œé»‘ç™½äº’æ¢ã€‚" href=javascript:void(0); onclick=navFn.switchDarkMode();><i class="nav-icon icon-moon-clear-fill" style=font-size:1rem></i></button></div><div class=nav-button id=nav-console><button class="site-page console_switchbutton nav-item" href=javascript:void(0); onclick=wjx.showConsole() title=æ˜¾ç¤ºä¸­æ§å°><i class="nav-icon icon-dashboard"></i></button></div><div class=nav-button id=nav-totop onclick=btf.scrollToDest(0,500)><button class="totopbtn nav-item"><i class="nav-icon icon-arrow-up" style=font-size:1rem></i><span id=percent>0</span></button></div><div id=toggle-menu><button class="site-page nav-item"><i class="nav-icon icon-bars"></i></button></div></div></div></nav><div class="coverdiv loaded" id=coverdiv><img alt=cover class=nolazyload decoding=async id=post-cover loading=lazy src=/processed_images/img00006.c4abedc898f992a6.webp></div><div id=post-info><div id=post-firstinfo><div class=meta-firstline><a class=post-meta-original href=/copyright title=è¯¥æ–‡ç« ä¸ºåŸåˆ›æ–‡ç« ï¼Œæ³¨æ„ç‰ˆæƒåè®®>åŸåˆ›</a><span class=post-meta-categories> <a href=/categories/theme/ title=ä¸»é¢˜> ä¸»é¢˜ </a> </span><div class=tag_share><div class=post-meta__tag-list><a class=post-meta__tags href=/tags/blog/ title=åšå®¢> <span class="tags-name tags-punctuation">åšå®¢</span> </a><a class=post-meta__tags href=/tags/docs/ title=æ–‡æ¡£> <span class="tags-name tags-punctuation">æ–‡æ¡£</span> </a><a class=post-meta__tags href=/tags/featured/ title=å¿…çœ‹> <span class="tags-name tags-punctuation">å¿…çœ‹</span> </a><a class=post-meta__tags href=/tags/hot/ title=çƒ­é—¨> <span class="tags-name tags-punctuation">çƒ­é—¨</span> </a></div></div></div></div><h1 class=post-title>æŠ˜è…¾ç¬”è®°[24]-ä½¿ç”¨ruståŸºäºå…‰æµæ³•å¯¹æ¯”å›¾åƒ</h1><div id=post-meta><div class=meta-secondline><span class=post-meta-author data-flag-title=æ–‡ç« ä½œè€… title=æ–‡ç« ä½œè€…> <i class="icon-zuozhe post-meta-icon"></i>qsbye </span><span class=post-meta-wordcount> <i class="icon-file-word post-meta-icon" title=å­—æ•°></i> <span class=post-meta-label>å­—æ•°:</span> <span class=word-count>4939</span> <span class=post-meta-separator></span> <i class="icon-clock post-meta-icon" title=é˜…è¯»è€—æ—¶></i> <span class=post-meta-label>é˜…è¯»è€—æ—¶:</span> <span> 25 åˆ†é’Ÿ</span> </span><span class=post-meta-date> <i class="icon-calendar-days post-meta-icon"></i> <time title="2025-01-01 00:00:00" datetime=2025-01-01> 2025/01/01 </time> </span><span class=post-meta-wechat title=è¯¥æ–‡ç« åœ¨åšå®¢é¦–å‘> <i class="icon-rss post-meta-icon"></i>åšå®¢ç‹¬äº« </span><a class=post-meta-pv data-flag-title=çƒ­åº¦ title=çƒ­åº¦> <i class="icon-fire post-meta-icon"></i> <span class=post-meta-label>çƒ­åº¦:</span> <span id=twikoo_visitors> <i class="icon-spinner fa-spin"></i> </span> </a><a class=post-meta-commentcount data-flag-title=è¯„è®ºæ•° href=#post-comment title=è¯„è®ºæ•°> <i class="icon-chat--fill post-meta-icon" style=font-size:17px></i> <span class=post-meta-label>è¯„è®º:</span> <span id=twikoo-count> <i class="icon-spinner fa-spin"></i> </span> </a></div></div></div><section class="main-hero-waves-area waves-area"><svg viewbox="0 24 150 28" class=waves-svg preserveaspectratio=none shape-rendering=auto xlink=http://www.w3.org/1999/xlink xmlns=http://www.w3.org/2000/svg><defs><path d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z" id=gentle-wave></path></defs><g class=parallax><use href=#gentle-wave x=48 y=0></use><use href=#gentle-wave x=48 y=3></use><use href=#gentle-wave x=48 y=5></use><use href=#gentle-wave x=48 y=7></use></g></svg></section></header><main class="layout right-aside" id=content-inner><div id=post><div id=abstract-container><div class=abstract-title><i class=icon-bilibili></i><div class=abstract-title-text>æ–‡ç« æ‘˜è¦</div><div id=abstract-tag>æœ¬åœ°</div></div><div id=abstract-content style=display:block>ä½¿ç”¨rustæ¨ç†onnxæ¨¡å‹è·å–ä¸¤å¼ å›¾ç‰‡çš„å…‰æµä¿¡æ¯, æ¯”è¾ƒå›¾ç‰‡ä¹‹é—´çš„å·®å¼‚å¹¶ä½¿ç”¨è‰²è½®ç»˜åˆ¶å·®å¼‚éƒ¨åˆ†.</div><div class=abstract-btn-box><div class=abstract-btn-item id=abstract-intro>ä»‹ç»è‡ªå·±</div><div class=abstract-btn-item id=abstract-generate>ç”Ÿæˆæœ¬æ–‡ç®€ä»‹</div><div class=abstract-btn-item id=abstract-recommend>æ¨èç›¸å…³æ–‡ç« </div><div class=abstract-btn-item id=abstract-home>å‰å¾€ä¸»é¡µ</div><div class=abstract-btn-item id=abstract-hide style=margin-left:auto>éšè—æœ¬æ‘˜è¦</div></div></div><div class="note simple warning" data-tip-enable=true data-update-date=2025-01-01 id=passage-tip></div><article class="post-content line-numbers" id=article-container><h2 id=zhai-yao>æ‘˜è¦</h2><p>ä½¿ç”¨rustæ¨ç†onnxæ¨¡å‹è·å–ä¸¤å¼ å›¾ç‰‡çš„å…‰æµä¿¡æ¯, æ¯”è¾ƒå›¾ç‰‡ä¹‹é—´çš„å·®å¼‚å¹¶ä½¿ç”¨è‰²è½®ç»˜åˆ¶å·®å¼‚éƒ¨åˆ†. Use Rust to infer an ONNX model to obtain the optical flow information between two images, compare the differences between the images, and draw the different parts using a color wheel.<h2 id=guan-jian-ci>å…³é”®è¯</h2><p>rust;ort;optical flow;neuflow;<h2 id=guan-jian-xin-xi>å…³é”®ä¿¡æ¯</h2><p>é¡¹ç›®åœ°å€:[https://github.com/ByeIO/bye.orbslam3.rs/blob/dev1/crates/seekslam_examples/examples/ort_optics.rs] é…ç½®æ–‡ä»¶:<pre class=language-toml data-lang=toml><code class=language-toml data-lang=toml>[workspace.package]
version = "0.0.1"
edition = "2024"
[workspace.dependencies]
# é”™è¯¯å¤„ç†
anyhow = "1.0.97"
# æ—¶é—´æ ¼å¼åŒ–
chrono = "0.4.40"
# Model Context Protocolåè®®å®šä¹‰
rust-mcp-schema = { version = "0.2.2", path = "./static/rust-mcp-schema" }
# Model Context Protocolå¼€å‘å·¥å…·
# rust-mcp-sdk = { version = "0.1.2", path = "./static/rust-mcp-sdk/crates/rust-mcp-sdk" }
rust-mcp-sdk = { version = "0.1.2" }
# å¤šçº¿ç¨‹æ¡†æ¶
tokio = { version = "1.44.1", features = ["full"] }
# ros2æ¥å£
ros2-interfaces-humble = "0.0.1"
# æ—¥å¿—åç«¯
log = { version = "0.4.27", features = ["std"] }
# prototxtæ–‡ä»¶è¯»å–
protokit = "0.2.0"
# protobufå¤„ç†
prost = "0.13.5"
prost-build = { version = "0.13.5", features = ["cleanup-markdown"] }
# onnxè¿è¡Œæ—¶
wonnx = { version = "0.5.1", path = "./static/wonnx/wonnx" }
# çº¿æ€§ä»£æ•°
nalgebra = { version = "0.33.2", features = ["rand"] }
ndarray = { version = "0.16.1", path = "./static/ndarray" }
# éšæœºæ•°
rand = "0.9.0"
rand_distr = "0.5.1"
# å›¾åƒå¤„ç†
image = "0.25.6"
imageproc = "0.25.0"
# å›¾ä¼˜åŒ–
factrs = "0.2.0"
# wasmè¿è¡Œæ—¶
wasmtime-cli = { version = "31.0.0", path="./static/wasmtime-cli-31.0.0" }
# tractè¿è¡Œæ—¶
tract-onnx = { version = "0.21.11", features = ["getrandom-js"], path = "./static/tract-onnx"}
# javascript/ESMè¿è¡Œæ—¶
deno_cli = { version = "2.2.8", path = "./static/deno" }
# ä¸´æ—¶æ–‡ä»¶
tempfile = "3.19.1"
# åµŒå…¥æ–‡ä»¶
embed-file = "0.2.0"
# onnxruntime(Cç»‘å®š), é»˜è®¤ç‰¹æ€§
ort = { version = "2.0.0-rc.9", path = "./static/ort" }
# YOLOv11
yolo-rs = "0.1.2"
# å¯å…‹éš†çš„è¿­ä»£å™¨
itertools = "0.14.0"
# å…‹éš†å·¥å…·
clone_dyn_types = "0.29.0"

[patch.crates-io]
# æ›¿æ¢ä¾èµ–æ–‡ä»¶
ndarray = { version = "0.16.1", path = "./static/ndarray" }
</code></pre><h2 id=yuan-li-jian-shu>åŸç†ç®€è¿°</h2><h3 id=guang-liu-gai-nian>å…‰æµæ¦‚å¿µ</h3><p>[https://xinetzone.github.io/torch-book/ecosystem/tutorials/vision-transforms/optical-flow.html] å…‰æµæ˜¯é¢„æµ‹ä¸¤å¹…å›¾åƒä¹‹é—´è¿åŠ¨çš„ä»»åŠ¡ï¼Œé€šå¸¸æ˜¯è§†é¢‘ä¸­è¿ç»­ä¸¤å¸§ä¹‹é—´çš„è¿åŠ¨ã€‚å…‰æµæ¨¡å‹æ¥å—ä¸¤å¹…å›¾åƒä½œä¸ºè¾“å…¥ï¼Œå¹¶é¢„æµ‹æµåœºï¼šæµåœºæŒ‡ç¤ºç¬¬ä¸€å¹…å›¾åƒä¸­æ¯ä¸ªåƒç´ çš„ä½ç§»ï¼Œå¹¶å°†å…¶æ˜ å°„åˆ°ç¬¬äºŒå¹…å›¾åƒä¸­çš„ç›¸åº”åƒç´ ã€‚æµåœºæ˜¯ (2, H, W) ç»´å¼ é‡ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªè½´å¯¹åº”äºé¢„æµ‹çš„æ°´å¹³ä½ç§»å’Œå‚ç›´ä½ç§»ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé¢„æµ‹çš„æµåœºæ˜¯ä»¥â€œåƒç´ â€ä¸ºå•ä½çš„ï¼Œå®ƒä»¬å¹¶æ²¡æœ‰æ ¹æ®å›¾åƒçš„å°ºå¯¸è¿›è¡Œå½’ä¸€åŒ–ã€‚ åœ¨å…‰æµä¸­ï¼Œæ¯ä¸ªâ€œæ–¹å‘â€éƒ½å°†æ˜ å°„ä¸ºç‰¹å®šçš„RGBé¢œè‰²ã€‚æ¨¡å‹è®¤ä¸ºé¢œè‰²ç›¸è¿‘çš„åƒç´ æ­£åœ¨æœç›¸ä¼¼æ–¹å‘ç§»åŠ¨ã€‚ inferenceï¼šç”¨è®­ç»ƒå¥½çš„æ¨¡å‹å¯¹è¿ç»­å›¾åƒå¸§æ±‚å…‰æµã€‚<h3 id=guang-liu-tui-li-mo-xing-zhong-yao-gai-nian>å…‰æµæ¨ç†æ¨¡å‹é‡è¦æ¦‚å¿µ</h3><p>[https://zhuanlan.zhihu.com/p/716470435]<h4 id=1-guang-liu-ke-shi-hua>1. å…‰æµå¯è§†åŒ–</h4><p>[https://blog.csdn.net/qq_33757398/article/details/106332814] å…‰æµå¯è§†åŒ–æ˜¯å°†å…‰æµä¿¡æ¯ä»¥ç›´è§‚çš„æ–¹å¼å±•ç¤ºå‡ºæ¥ï¼Œä¾¿äºç†è§£å›¾åƒåºåˆ—ä¸­ç‰©ä½“çš„è¿åŠ¨æƒ…å†µã€‚æ ¹æ®å…‰æµçš„å¯†åº¦ï¼Œå¯ä»¥åˆ†ä¸ºç¨ å¯†å…‰æµå¯è§†åŒ–å’Œç¨€ç–å…‰æµå¯è§†åŒ–ã€‚æ­¤å¤–ï¼Œå…‰æµæ˜ å°„ï¼ˆwarpï¼‰æ˜¯å°†å…‰æµåº”ç”¨åˆ°å›¾åƒä¸Šï¼Œç”Ÿæˆè¿åŠ¨åçš„å›¾åƒã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£é‡Šï¼š<h5 id=chou-mi-guang-liu-ke-shi-hua>ç¨ å¯†å…‰æµå¯è§†åŒ–</h5><p>ç¨ å¯†å…‰æµå¯è§†åŒ–æ˜¯å°†æ¯ä¸€åƒç´ çš„å…‰æµä¿¡æ¯éƒ½å±•ç¤ºå‡ºæ¥ï¼Œé€šå¸¸ä½¿ç”¨é¢œè‰²æ¥è¡¨ç¤ºå…‰æµçš„æ–¹å‘å’Œå¤§å°ã€‚é¢œè‰²ç¼–ç é€šå¸¸åŸºäºä¸€ä¸ªâ€œè‰²è½®â€ï¼ˆcolor wheelï¼‰ï¼Œå…¶ä¸­ä¸åŒçš„é¢œè‰²ä»£è¡¨ä¸åŒçš„è¿åŠ¨æ–¹å‘ï¼Œé¢œè‰²çš„äº®åº¦æˆ–é¥±å’Œåº¦è¡¨ç¤ºè¿åŠ¨çš„å¤§å°ã€‚ä¾‹å¦‚ï¼š<ul><li><strong>ç»¿è‰²</strong>å¯èƒ½è¡¨ç¤ºå‘å³ä¸Šæ–¹è¿åŠ¨ã€‚<li><strong>çº¢è‰²</strong>å¯èƒ½è¡¨ç¤ºå‘å·¦ä¸‹æ–¹è¿åŠ¨ã€‚<li>é¢œè‰²çš„æ·±åº¦ï¼ˆé¥±å’Œåº¦ï¼‰è¡¨ç¤ºè¿åŠ¨çš„å¤§å°ï¼Œé¢œè‰²è¶Šæ·±è¡¨ç¤ºè¿åŠ¨è¶Šå¿«ã€‚</ul><p>è¿™ç§å¯è§†åŒ–æ–¹å¼å¯ä»¥æ¸…æ™°åœ°å±•ç¤ºæ•´ä¸ªå›¾åƒçš„è¿åŠ¨æƒ…å†µï¼Œä½†å¯èƒ½ä¼šå› ä¸ºä¿¡æ¯è¿‡äºå¯†é›†è€Œéš¾ä»¥åŒºåˆ†ç»†èŠ‚ã€‚<h5 id=xi-shu-guang-liu-ke-shi-hua>ç¨€ç–å…‰æµå¯è§†åŒ–</h5><p>ç¨€ç–å…‰æµå¯è§†åŒ–æ˜¯åªå±•ç¤ºéƒ¨åˆ†åƒç´ çš„å…‰æµä¿¡æ¯ï¼Œé€šå¸¸é€šè¿‡é‡‡æ ·æ¥å‡å°‘æ˜¾ç¤ºçš„å…‰æµç‚¹ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æ¯éš”å‡ ä¸ªåƒç´ ç‚¹æ‰æ˜¾ç¤ºä¸€ä¸ªå…‰æµå‘é‡ã€‚è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯èƒ½å¤Ÿæ›´æ¸…æ™°åœ°å±•ç¤ºå…‰æµçš„æ–¹å‘å’Œå¤§å°ï¼Œé¿å…äº†ç¨ å¯†å…‰æµå¯è§†åŒ–ä¸­å¯èƒ½å‡ºç°çš„ä¿¡æ¯è¿‡è½½é—®é¢˜ã€‚<p>åœ¨ç¨€ç–å…‰æµå¯è§†åŒ–ä¸­ï¼Œé€šå¸¸ä¼šä½¿ç”¨ç®­å¤´æ¥è¡¨ç¤ºå…‰æµçš„æ–¹å‘å’Œå¤§å°ï¼Œç®­å¤´çš„é•¿åº¦å’Œæ–¹å‘å¯¹åº”å…‰æµçš„å¤§å°å’Œæ–¹å‘ã€‚<h5 id=guang-liu-ying-she-warp>å…‰æµæ˜ å°„ï¼ˆwarpï¼‰</h5><p>å…‰æµæ˜ å°„æ˜¯å°†å…‰æµä¿¡æ¯åº”ç”¨åˆ°å›¾åƒä¸Šï¼Œç”Ÿæˆä¸€å¼ æ–°çš„å›¾åƒï¼Œè¿™å¼ æ–°å›¾åƒåæ˜ äº†åŸå§‹å›¾åƒåœ¨å…‰æµä½œç”¨ä¸‹çš„è¿åŠ¨æ•ˆæœã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯æ ¹æ®å…‰æµå‘é‡å°†åŸå§‹å›¾åƒä¸­çš„æ¯ä¸ªåƒç´ ç§»åŠ¨åˆ°æ–°çš„ä½ç½®ï¼Œç„¶åé€šè¿‡æ’å€¼ç­‰æ–¹æ³•ç”Ÿæˆæ–°çš„å›¾åƒã€‚<p>å…‰æµæ˜ å°„æœ‰ä¸¤ç§å¸¸è§çš„æ’å€¼æ–¹å¼ï¼š<ol><li><strong>æœ€è¿‘é‚»æ’å€¼ï¼ˆnearestï¼‰</strong>ï¼šç›´æ¥é€‰æ‹©æœ€è¿‘çš„åƒç´ å€¼ã€‚<li><strong>åŒçº¿æ€§æ’å€¼ï¼ˆbilinearï¼‰</strong>ï¼šæ ¹æ®å‘¨å›´å››ä¸ªåƒç´ çš„å€¼é€šè¿‡çº¿æ€§æ’å€¼è®¡ç®—ç›®æ ‡åƒç´ çš„å€¼ã€‚</ol><p>å…‰æµæ˜ å°„å¯ä»¥ç”¨äºå¤šç§åº”ç”¨ï¼Œä¾‹å¦‚è§†é¢‘ç¨³å®šã€è¿åŠ¨ä¼°è®¡ã€å›¾åƒåˆæˆç­‰ã€‚<h5 id=zong-jie>æ€»ç»“</h5><ul><li><strong>ç¨ å¯†å…‰æµå¯è§†åŒ–</strong>ï¼šå±•ç¤ºæ‰€æœ‰åƒç´ çš„å…‰æµä¿¡æ¯ï¼Œé€‚åˆæ•´ä½“è§‚å¯Ÿè¿åŠ¨æƒ…å†µã€‚<li><strong>ç¨€ç–å…‰æµå¯è§†åŒ–</strong>ï¼šå±•ç¤ºéƒ¨åˆ†åƒç´ çš„å…‰æµä¿¡æ¯ï¼Œé€‚åˆè§‚å¯Ÿç»†èŠ‚ã€‚<li><strong>å…‰æµæ˜ å°„</strong>ï¼šå°†å…‰æµåº”ç”¨åˆ°å›¾åƒä¸Šï¼Œç”Ÿæˆè¿åŠ¨åçš„å›¾åƒï¼Œå¯ç”¨äºå¤šç§å®é™…åº”ç”¨ã€‚</ul><h4 id=2-zai-duo-chi-du-xia-xun-zhao-pi-pei-du-de-jin-zi-ta>2. åœ¨å¤šå°ºåº¦ä¸‹å¯»æ‰¾åŒ¹é…åº¦çš„é‡‘å­—å¡”</h4><p>å¤šå°ºåº¦åŒ¹é…åº¦é‡‘å­—å¡”æ˜¯å…‰æµä¼°è®¡ä¸­å¸¸ç”¨çš„ä¸€ç§æŠ€æœ¯ï¼Œå®ƒé€šè¿‡åœ¨ä¸åŒåˆ†è¾¨ç‡å±‚æ¬¡ä¸Šå¯»æ‰¾å›¾åƒä¹‹é—´çš„åŒ¹é…åº¦æ¥æé«˜å…‰æµä¼°è®¡çš„ç²¾åº¦ã€‚è¿™ç§æ–¹æ³•é¦–å…ˆå°†è¾“å…¥å›¾åƒæ„å»ºä¸ºä¸€ä¸ªé‡‘å­—å¡”ç»“æ„ï¼Œæ¯ä¸€å±‚ä»£è¡¨ä¸€ä¸ªä¸åŒçš„åˆ†è¾¨ç‡ã€‚ç„¶åï¼Œä»æœ€ç²—ç³™çš„å±‚çº§å¼€å§‹ï¼Œé€å±‚ç»†åŒ–å…‰æµä¼°è®¡ã€‚åœ¨æ¯ä¸€å±‚ï¼Œæ¨¡å‹ä¼šè®¡ç®—ç‰¹å¾åŒ¹é…çš„æˆæœ¬ä½“ç§¯ï¼Œå¹¶åˆ©ç”¨è¿™äº›ä¿¡æ¯æ¥é¢„æµ‹è¯¥å±‚çº§çš„å…‰æµã€‚éšåï¼Œè¿™äº›å…‰æµä¼°è®¡ä¼šè¢«ä¸Šé‡‡æ ·åˆ°ä¸‹ä¸€å±‚ï¼Œå¹¶ä¸ä¸‹ä¸€å±‚çš„ç‰¹å¾åŒ¹é…ä¿¡æ¯ç»“åˆï¼Œè¿›ä¸€æ­¥ç»†åŒ–å…‰æµä¼°è®¡ã€‚è¿™ç§æ–¹æ³•å¯ä»¥æœ‰æ•ˆå¤„ç†å¤§ä½ç§»è¿åŠ¨ï¼Œå¹¶å‡å°‘è®¡ç®—é‡ã€‚<h4 id=3-chang-yong-shu-ju-ji>3. å¸¸ç”¨æ•°æ®é›†</h4><p>å…‰æµä¼°è®¡çš„å¸¸ç”¨æ•°æ®é›†åŒ…æ‹¬ï¼š<ul><li><strong>FlyingChairs</strong>ï¼šåŒ…å«22872ä¸ªè®­ç»ƒå›¾åƒå¯¹ï¼Œé€šè¿‡éšæœºä»¿å°„å˜æ¢ç”Ÿæˆç¬¬äºŒå¸§å›¾åƒã€‚<li><strong>FlyingThings3D</strong>ï¼šåŒ…å«22kè®­ç»ƒå›¾åƒå¯¹ï¼Œæ‹¥æœ‰3Dè¿åŠ¨å’Œå…‰ç…§æ¸²æŸ“æ•ˆæœã€‚<li><strong>Sintel</strong>ï¼šåŒ…å«Cleanå’ŒFinalä¸¤ä¸ªå­ç±»æ•°æ®é›†ï¼Œå…±æœ‰1041ä¸ªè®­ç»ƒå›¾åƒå¯¹å’Œ552ä¸ªæµ‹è¯•å›¾åƒå¯¹ã€‚<li><strong>KITTI</strong>ï¼šåŒ…å«200ä¸ªè®­ç»ƒå›¾åƒå¯¹å’Œ200ä¸ªæµ‹è¯•å›¾åƒå¯¹ï¼Œä¸»è¦å…³æ³¨çœŸå®é“è·¯äº¤é€šåœºæ™¯ã€‚<li><strong>HD1K</strong>ï¼šåŒ…å«1047ä¸ªè®­ç»ƒå›¾åƒå¯¹ï¼Œä¸»è¦åœ¨äº¤é€šåœºæ™¯ä¸­æ•è·ã€‚</ul><p>è¿™äº›æ•°æ®é›†ä¸ºå…‰æµä¼°è®¡æ¨¡å‹æä¾›äº†ä¸°å¯Œçš„è®­ç»ƒå’Œæµ‹è¯•ææ–™ï¼Œæ¶µç›–äº†ä»åˆæˆæ•°æ®åˆ°çœŸå®åœºæ™¯çš„å¤šç§æƒ…å†µã€‚<h4 id=4-shuang-xian-xing-cha-zhi>4. åŒçº¿æ€§æ’å€¼</h4><p>åŒçº¿æ€§æ’å€¼æ˜¯ä¸€ç§åœ¨å›¾åƒå¤„ç†ä¸­å¸¸ç”¨çš„æ’å€¼æ–¹æ³•ï¼Œç”¨äºåœ¨å…‰æµä¼°è®¡ä¸­å°†ä½åˆ†è¾¨ç‡çš„å…‰æµå›¾ä¸Šé‡‡æ ·åˆ°é«˜åˆ†è¾¨ç‡ã€‚è¿™ç§æ–¹æ³•é€šè¿‡è€ƒè™‘å››ä¸ªæœ€è¿‘é‚»åƒç´ çš„åŠ æƒå¹³å‡æ¥è®¡ç®—æ–°åƒç´ çš„å€¼ã€‚åœ¨å…‰æµä¼°è®¡ä¸­ï¼ŒåŒçº¿æ€§æ’å€¼å¯ä»¥ç”¨æ¥å°†ç²—ç•¥çš„å…‰æµåœºç»†åŒ–åˆ°åŸå§‹å›¾åƒçš„åˆ†è¾¨ç‡ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•å¯èƒ½ä¼šåœ¨è¿åŠ¨è¾¹ç•ŒåŒºåŸŸäº§ç”Ÿæ¨¡ç³Šï¼Œå› æ­¤ä¸€äº›å…ˆè¿›çš„æ–¹æ³•å¦‚RAFTé‡‡ç”¨äº†å‡¸ä¸Šé‡‡æ ·æŠ€æœ¯æ¥æ”¹å–„è¿™ä¸€é—®é¢˜ã€‚<h4 id=5-grugong-shi>5. GRUå…¬å¼</h4><p>GRUï¼ˆGated Recurrent Unitï¼‰æ˜¯ä¸€ç§å¾ªç¯ç¥ç»ç½‘ç»œçš„å˜ä½“ï¼Œå®ƒé€šè¿‡å¼•å…¥æ›´æ–°é—¨å’Œé‡ç½®é—¨æ¥æ§åˆ¶ä¿¡æ¯çš„æµåŠ¨ã€‚GRUçš„å…¬å¼å¦‚ä¸‹ï¼š<ul><li>æ›´æ–°é—¨ $z_t$ï¼š $$ z_t = \sigma(W^z x_t + U^z h_{t-1}) $$<li>é‡ç½®é—¨ $r_t$ï¼š $$ r_t = \sigma(W^r x_t + U^r h_{t-1}) $$<li>å€™é€‰éšè—çŠ¶æ€ $ \tilde{h}_t $ï¼š $$ \tilde{h}<em>t = \tanh(W^h x_t + U^h (h</em>{t-1} \odot r_t)) $$<li>æœ€ç»ˆéšè—çŠ¶æ€ $ h_t $ï¼š $$ h_t = (1 - z_t) \odot \tilde{h}<em>t + z_t \odot h</em>{t-1} $$</ul><p>å…¶ä¸­ï¼Œ$ \sigma $ æ˜¯sigmoidæ¿€æ´»å‡½æ•°ï¼Œ$ W $ å’Œ $ U $ æ˜¯æƒé‡çŸ©é˜µï¼Œ$ x_t $ æ˜¯å½“å‰è¾“å…¥ï¼Œ$ h_{t-1} $ æ˜¯å‰ä¸€æ—¶åˆ»çš„éšè—çŠ¶æ€ã€‚GRUé€šè¿‡è¿™äº›é—¨æ§åˆ¶ä¿¡æ¯çš„ä¿ç•™å’Œæ›´æ–°ï¼Œä»è€Œåœ¨åºåˆ—æ•°æ®å¤„ç†ä¸­è¡¨ç°å‡ºè‰²ã€‚<h4 id=6-lstmgong-shi>6. LSTMå…¬å¼</h4><p>LSTMï¼ˆLong Short-Term Memoryï¼‰æ˜¯å¦ä¸€ç§å¾ªç¯ç¥ç»ç½‘ç»œçš„å˜ä½“ï¼Œå®ƒé€šè¿‡å¼•å…¥ä¸‰ä¸ªé—¨ï¼ˆè¾“å…¥é—¨ã€é—å¿˜é—¨ã€è¾“å‡ºé—¨ï¼‰æ¥æ§åˆ¶ä¿¡æ¯çš„æµåŠ¨ã€‚LSTMçš„å…¬å¼å¦‚ä¸‹ï¼š<ul><li>é—å¿˜é—¨ $ f_t $ï¼š $$ f_t = \sigma(W_f \cdot [h_{t-1}, x_t] + b_f) $$<li>è¾“å…¥é—¨ $ i_t $ï¼š $$ i_t = \sigma(W_i \cdot [h_{t-1}, x_t] + b_i) $$<li>å€™é€‰ç»†èƒçŠ¶æ€ $ \tilde{C}_t $ï¼š $$ \tilde{C}<em>t = \tanh(W_C \cdot [h</em>{t-1}, x_t] + b_C) $$<li>æœ€ç»ˆç»†èƒçŠ¶æ€ $ C_t $ï¼š $$ C_t = f_t \cdot C_{t-1} + i_t \cdot \tilde{C}_t $$<li>è¾“å‡ºé—¨ $ o_t $ï¼š $$ o_t = \sigma(W_o \cdot [h_{t-1}, x_t] + b_o) $$<li>æœ€ç»ˆéšè—çŠ¶æ€ $ h_t $ï¼š $$ h_t = o_t \cdot \tanh(C_t) $$</ul><p>å…¶ä¸­ï¼Œ$ W $ æ˜¯æƒé‡çŸ©é˜µï¼Œ$ b $ æ˜¯åç½®é¡¹ï¼Œ$ x_t $ æ˜¯å½“å‰è¾“å…¥ï¼Œ$ h_{t-1} $ æ˜¯å‰ä¸€æ—¶åˆ»çš„éšè—çŠ¶æ€ï¼Œ$ C_{t-1} $ æ˜¯å‰ä¸€æ—¶åˆ»çš„ç»†èƒçŠ¶æ€ã€‚LSTMé€šè¿‡è¿™äº›é—¨æ§åˆ¶ä¿¡æ¯çš„é•¿æœŸå’ŒçŸ­æœŸæµåŠ¨ï¼Œä»è€Œåœ¨å¤„ç†é•¿åºåˆ—æ•°æ®æ—¶é¿å…æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚<h4 id=7-shang-cai-yang>7. ä¸Šé‡‡æ ·</h4><p>ä¸Šé‡‡æ ·æ˜¯å…‰æµä¼°è®¡ä¸­å°†ä½åˆ†è¾¨ç‡å…‰æµå›¾æ¢å¤åˆ°åŸå§‹åˆ†è¾¨ç‡çš„è¿‡ç¨‹ã€‚å¸¸ç”¨çš„æ–¹æ³•åŒ…æ‹¬åŒçº¿æ€§æ’å€¼ã€åŒä¸‰æ¬¡æ’å€¼å’Œæœ€è¿‘é‚»æ’å€¼ç­‰ã€‚åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œè¿˜å¯ä»¥ä½¿ç”¨è½¬ç½®å·ç§¯ï¼ˆä¹Ÿç§°ä¸ºåå·ç§¯ï¼‰æ¥å®ç°ä¸Šé‡‡æ ·ã€‚è½¬ç½®å·ç§¯é€šè¿‡å­¦ä¹ ä¸Šé‡‡æ ·çš„æƒé‡æ¥æ¢å¤å›¾åƒçš„é«˜åˆ†è¾¨ç‡ç»†èŠ‚ã€‚æ­¤å¤–ï¼Œä¸€äº›å…ˆè¿›çš„æ–¹æ³•å¦‚RAFTé‡‡ç”¨äº†å‡¸ä¸Šé‡‡æ ·æŠ€æœ¯ï¼Œå®ƒé€šè¿‡å­¦ä¹ ä¸Šé‡‡æ ·æƒé‡æ¥æŒ‡å¯¼å…‰æµçš„ä¸Šé‡‡æ ·è¿‡ç¨‹ï¼Œä»è€Œåœ¨æ¢å¤é«˜åˆ†è¾¨ç‡å…‰æµå›¾æ—¶ä¿ç•™è¿åŠ¨è¾¹ç¼˜çš„æ¸…æ™°åº¦ã€‚<p>æ€»ç»“æ¥è¯´ï¼Œå…‰æµæ¨ç†æ¨¡å‹çš„é‡è¦æ¦‚å¿µæ¶µç›–äº†ä»ç‰¹å¾æå–ã€å¤šå°ºåº¦åŒ¹é…ã€æ•°æ®é›†ã€æ’å€¼æ–¹æ³•åˆ°å¾ªç¯ç¥ç»ç½‘ç»œçš„å¤šä¸ªæ–¹é¢ã€‚è¿™äº›æ¦‚å¿µä¸ä»…ä¸ºç†è§£å…‰æµä¼°è®¡æä¾›äº†åŸºç¡€ï¼Œä¹Ÿä¸ºå¼€å‘å’Œæ”¹è¿›å…‰æµæ¨ç†æ¨¡å‹æä¾›äº†å…³é”®çš„æŠ€æœ¯æ”¯æŒã€‚<h3 id=guang-liu-gen-zong-guo-cheng>å…‰æµè·Ÿè¸ªè¿‡ç¨‹</h3><p><a rel="noopener nofollow" href=https://zhuanlan.zhihu.com/p/40510838 target=_blank>çŸ¥ä¹ @å¥”è·‘çš„å°ä¼Ÿ</a> å…‰æµè·Ÿè¸ªè¿‡ç¨‹ï¼š 1ï¼‰ å¯¹ä¸€ä¸ªè¿ç»­çš„è§†é¢‘å›¾åƒå¸§åºåˆ—è¿›è¡Œå¤„ç†ï¼› 2ï¼‰ é’ˆå¯¹æ¯ä¸€å¸§å›¾åƒæ£€æµ‹å‰æ™¯ç›®æ ‡ï¼› 3ï¼‰å¦‚æœæŸä¸€å¸§å‡ºç°äº†å‰æ™¯ç›®æ ‡ï¼Œæ‰¾åˆ°å…¶å…·æœ‰ä»£è¡¨æ€§çš„ç‰¹å¾ç‚¹ï¼ˆä¸€èˆ¬åˆ©ç”¨è§’ç‚¹æ¥åšç‰¹å¾ç‚¹ï¼‰ï¼› 4ï¼‰å¯¹äºä¹‹åçš„ä¸¤ä¸ªç›¸é‚»è§†é¢‘å¸§ï¼Œå¯»æ‰¾ä¸Šä¸€å¸§ä¸­å‡ºç°çš„ç‰¹å¾ç‚¹åœ¨å½“å‰å¸§ä¸­çš„æœ€ä½³ä½ç½®ï¼Œä»è€Œå¾—åˆ°å‰æ™¯ç›®æ ‡åœ¨å½“å‰å¸§ä¸­çš„ä½ç½®ä¿¡æ¯ï¼› 5ï¼‰å¦‚æ­¤é€‰ä»£è¿›è¡Œï¼Œä¾¿å¯å®ç°ç›®æ ‡çš„è·Ÿè¸ªï¼›<h3 id=guang-liu-tui-li-mo-xing-zong-shu>å…‰æµæ¨ç†æ¨¡å‹ç»¼è¿°</h3><p>[https://zhuanlan.zhihu.com/p/623489787] [https://github.com/cuixing158/Awesome-CV-MasterHub/tree/main]<ol><li>RAFT<li>AutoFlow<li>NeoFlow(v1,v2)</ol><h4 id=1-raft-recurrent-all-pairs-field-transforms>1. RAFTï¼ˆRecurrent All-Pairs Field Transformsï¼‰</h4><ul><li><strong>ç®€ä»‹</strong>ï¼šRAFTæ˜¯ä¸€ç§åŸºäºæ·±åº¦å­¦ä¹ çš„å…‰æµä¼°è®¡æ¨¡å‹ï¼Œç”±Princeton Vision Labæå‡ºã€‚å®ƒé€šè¿‡å¾ªç¯çš„æ–¹å¼é€æ­¥ç»†åŒ–å…‰æµä¼°è®¡ï¼Œå…·æœ‰è¾ƒé«˜çš„ç²¾åº¦å’Œé²æ£’æ€§ã€‚<li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼š <ul><li><strong>ç‰¹å¾æå–</strong>ï¼šä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œæå–ä¸¤å¸§å›¾åƒçš„ç‰¹å¾å›¾ã€‚<li><strong>å¾ªç¯ç»†åŒ–</strong>ï¼šé€šè¿‡å¾ªç¯ç½‘ç»œï¼ˆGRUï¼‰é€æ­¥æ›´æ–°å…‰æµä¼°è®¡ï¼Œæ¯æ¬¡è¿­ä»£éƒ½ä¼šè€ƒè™‘æ‰€æœ‰åƒç´ å¯¹ä¹‹é—´çš„å…³ç³»ã€‚<li><strong>åŒå‘å…‰æµä¼°è®¡</strong>ï¼šåŒæ—¶ä¼°è®¡æ­£å‘å’Œåå‘å…‰æµï¼Œé€šè¿‡ä¸€è‡´æ€§æ£€æŸ¥æé«˜ç²¾åº¦ã€‚</ul><li><strong>ä¼˜ç‚¹</strong>ï¼š <ul><li>é«˜ç²¾åº¦ï¼šåœ¨å¤šä¸ªåŸºå‡†æ•°æ®é›†ä¸Šè¡¨ç°å‡ºè‰²ã€‚<li>é²æ£’æ€§ï¼šå¯¹å…‰ç…§å˜åŒ–ã€é®æŒ¡ç­‰å¤æ‚åœºæ™¯æœ‰è¾ƒå¥½çš„é€‚åº”æ€§ã€‚</ul><li><strong>ç¼ºç‚¹</strong>ï¼š <ul><li>è®¡ç®—å¤æ‚åº¦è¾ƒé«˜ï¼šç”±äºå¾ªç¯ç»†åŒ–è¿‡ç¨‹ï¼Œæ¨ç†é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ã€‚</ul><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šé€‚ç”¨äºå¯¹ç²¾åº¦è¦æ±‚è¾ƒé«˜çš„å…‰æµä¼°è®¡ä»»åŠ¡ï¼Œå¦‚è§†é¢‘åˆ†æã€è¿åŠ¨ä¼°è®¡ç­‰ã€‚</ul><h4 id=2-autoflow>2. AutoFlow</h4><ul><li><strong>ç®€ä»‹</strong>ï¼šAutoFlowæ˜¯ä¸€ç§è‡ªåŠ¨åŒ–çš„å…‰æµä¼°è®¡æ¡†æ¶ï¼Œæ—¨åœ¨é€šè¿‡è‡ªåŠ¨åŒ–è®¾è®¡å’Œä¼˜åŒ–å…‰æµç½‘ç»œæ¥æé«˜æ€§èƒ½ã€‚<li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼š <ul><li><strong>è‡ªåŠ¨åŒ–ç½‘ç»œè®¾è®¡</strong>ï¼šä½¿ç”¨ç¥ç»æ¶æ„æœç´¢ï¼ˆNASï¼‰æŠ€æœ¯è‡ªåŠ¨è®¾è®¡å…‰æµç½‘ç»œç»“æ„ã€‚<li><strong>å¤šå°ºåº¦ç‰¹å¾èåˆ</strong>ï¼šé€šè¿‡å¤šå°ºåº¦ç‰¹å¾èåˆæé«˜å…‰æµä¼°è®¡çš„ç²¾åº¦ã€‚<li><strong>è½»é‡åŒ–è®¾è®¡</strong>ï¼šåœ¨ä¿è¯ç²¾åº¦çš„åŒæ—¶ï¼Œä¼˜åŒ–ç½‘ç»œç»“æ„ä»¥æé«˜æ¨ç†é€Ÿåº¦ã€‚</ul><li><strong>ä¼˜ç‚¹</strong>ï¼š <ul><li>è‡ªåŠ¨åŒ–è®¾è®¡ï¼šå‡å°‘äº†äººå·¥è®¾è®¡ç½‘ç»œçš„å¤æ‚æ€§ã€‚<li>é«˜æ•ˆæ€§ï¼šé€šè¿‡ä¼˜åŒ–ç½‘ç»œç»“æ„ï¼Œæé«˜äº†æ¨ç†é€Ÿåº¦ã€‚</ul><li><strong>ç¼ºç‚¹</strong>ï¼š <ul><li>ä¾èµ–NASæŠ€æœ¯ï¼šéœ€è¦å¤§é‡çš„è®¡ç®—èµ„æºè¿›è¡Œç½‘ç»œæœç´¢ã€‚</ul><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šé€‚ç”¨äºéœ€è¦é«˜æ•ˆå…‰æµä¼°è®¡çš„å®æ—¶åº”ç”¨ï¼Œå¦‚è‡ªåŠ¨é©¾é©¶ã€è§†é¢‘æµå¤„ç†ç­‰ã€‚</ul><h4 id=3-neoflow-v1he-v2>3. NeoFlowï¼ˆv1å’Œv2ï¼‰</h4><ul><li><p><strong>NeoFlow v1</strong>ï¼š</p> <ul><li><strong>ç®€ä»‹</strong>ï¼šNeoFlow v1æ˜¯ä¸€ç§åŸºäºæ·±åº¦å­¦ä¹ çš„å…‰æµä¼°è®¡æ¨¡å‹ï¼Œæ—¨åœ¨æé«˜å…‰æµä¼°è®¡çš„é€Ÿåº¦å’Œç²¾åº¦ã€‚<li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼š <ul><li><strong>ç‰¹å¾æå–</strong>ï¼šä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œæå–å›¾åƒç‰¹å¾ã€‚<li><strong>å…‰æµä¼°è®¡</strong>ï¼šé€šè¿‡å·ç§¯æ“ä½œä¼°è®¡å…‰æµï¼Œç»“åˆå¤šå°ºåº¦ç‰¹å¾èåˆæé«˜ç²¾åº¦ã€‚</ul><li><strong>ä¼˜ç‚¹</strong>ï¼š <ul><li>è¾ƒé«˜çš„ç²¾åº¦ï¼šåœ¨å¤šä¸ªåŸºå‡†æ•°æ®é›†ä¸Šè¡¨ç°å‡ºè‰²ã€‚<li>è¾ƒå¿«çš„æ¨ç†é€Ÿåº¦ï¼šç›¸æ¯”ä¼ ç»Ÿæ–¹æ³•æœ‰æ˜¾è‘—æå‡ã€‚</ul><li><strong>ç¼ºç‚¹</strong>ï¼š <ul><li>å¯¹å¤æ‚åœºæ™¯çš„é€‚åº”æ€§æœ‰é™ï¼šåœ¨å…‰ç…§å˜åŒ–ã€é®æŒ¡ç­‰å¤æ‚åœºæ™¯ä¸‹è¡¨ç°ä¸å¦‚RAFTã€‚</ul><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šé€‚ç”¨äºä¸€èˆ¬å…‰æµä¼°è®¡ä»»åŠ¡ï¼Œå¦‚è§†é¢‘åˆ†æã€è¿åŠ¨ä¼°è®¡ç­‰ã€‚</ul><li><p><strong>NeoFlow v2</strong>ï¼š</p> <ul><li><strong>ç®€ä»‹</strong>ï¼šNeoFlow v2æ˜¯NeoFlow v1çš„æ”¹è¿›ç‰ˆæœ¬ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–äº†ç½‘ç»œç»“æ„å’Œç®—æ³•ï¼Œæé«˜äº†æ€§èƒ½ã€‚<li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼š <ul><li><strong>æ”¹è¿›çš„ç‰¹å¾æå–</strong>ï¼šä¼˜åŒ–äº†ç‰¹å¾æå–ç½‘ç»œï¼Œæé«˜äº†ç‰¹å¾çš„è¡¨è¾¾èƒ½åŠ›ã€‚<li><strong>åŒå‘å…‰æµä¼°è®¡</strong>ï¼šå¼•å…¥åŒå‘å…‰æµä¼°è®¡ï¼Œé€šè¿‡ä¸€è‡´æ€§æ£€æŸ¥æé«˜ç²¾åº¦ã€‚<li><strong>å¾ªç¯ç»†åŒ–</strong>ï¼šå€Ÿé‰´RAFTçš„æ€æƒ³ï¼Œé€šè¿‡å¾ªç¯ç»†åŒ–é€æ­¥ä¼˜åŒ–å…‰æµä¼°è®¡ã€‚</ul><li><strong>ä¼˜ç‚¹</strong>ï¼š <ul><li>æ›´é«˜çš„ç²¾åº¦ï¼šåœ¨å¤æ‚åœºæ™¯ä¸‹è¡¨ç°æ›´å¥½ã€‚<li>è¾ƒå¿«çš„æ¨ç†é€Ÿåº¦ï¼šç›¸æ¯”RAFTæœ‰æ˜¾è‘—æå‡ã€‚</ul><li><strong>ç¼ºç‚¹</strong>ï¼š <ul><li>ç½‘ç»œç»“æ„å¤æ‚ï¼šéœ€è¦æ›´å¤šçš„è®¡ç®—èµ„æºè¿›è¡Œè®­ç»ƒã€‚</ul><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šé€‚ç”¨äºå¯¹ç²¾åº¦å’Œé€Ÿåº¦éƒ½æœ‰è¾ƒé«˜è¦æ±‚çš„å…‰æµä¼°è®¡ä»»åŠ¡ï¼Œå¦‚è‡ªåŠ¨é©¾é©¶ã€è§†é¢‘åˆ†æç­‰ã€‚</ul></ul><h4 id=zong-jie-1>æ€»ç»“</h4><ul><li><strong>RAFT</strong>ï¼šç²¾åº¦é«˜ï¼Œé²æ£’æ€§å¼ºï¼Œä½†è®¡ç®—å¤æ‚åº¦é«˜ï¼Œé€‚åˆå¯¹ç²¾åº¦è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ã€‚<li><strong>AutoFlow</strong>ï¼šè‡ªåŠ¨åŒ–è®¾è®¡ï¼Œé«˜æ•ˆæ€§å¥½ï¼Œé€‚åˆå®æ—¶åº”ç”¨ã€‚<li><strong>NeoFlow v1</strong>ï¼šé€Ÿåº¦å¿«ï¼Œç²¾åº¦é«˜ï¼Œé€‚åˆä¸€èˆ¬å…‰æµä¼°è®¡ä»»åŠ¡ã€‚<li><strong>NeoFlow v2</strong>ï¼šç²¾åº¦å’Œé€Ÿåº¦å…¼é¡¾ï¼Œé€‚åˆå¤æ‚åœºæ™¯ä¸‹çš„å…‰æµä¼°è®¡ä»»åŠ¡ã€‚</ul><p>è¿™äº›æ¨¡å‹å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œé€‰æ‹©æ—¶éœ€è¦æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯å’Œéœ€æ±‚è¿›è¡Œæƒè¡¡ã€‚<h3 id=neoflowv2shu-xue-yuan-li-jian-jie>NeoFlowV2æ•°å­¦åŸç†ç®€ä»‹</h3><p>å®æ—¶é«˜ç²¾åº¦å…‰æµä¼°è®¡å¯¹äºå„ç§å®é™…åº”ç”¨åœºæ™¯è‡³å…³é‡è¦ã€‚å°½ç®¡æœ€è¿‘åŸºäºå­¦ä¹ çš„å…‰æµæ–¹æ³•å·²ç»å®ç°äº†é«˜ç²¾åº¦ï¼Œä½†å®ƒä»¬é€šå¸¸ä¼´éšç€å·¨å¤§çš„è®¡ç®—æˆæœ¬ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§é«˜æ•ˆçš„å…‰æµæ–¹æ³•ï¼Œèƒ½å¤Ÿåœ¨é™ä½è®¡ç®—éœ€æ±‚çš„åŒæ—¶ä¿æŒé«˜ç²¾åº¦ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¼•å…¥äº†æ–°çš„ç»„ä»¶ï¼ŒåŒ…æ‹¬ä¸€ä¸ªæ›´è½»é‡çº§çš„ä¸»å¹²ç½‘ç»œå’Œä¸€ä¸ªå¿«é€Ÿç»†åŒ–æ¨¡å—ã€‚è¿™ä¸¤ä¸ªæ¨¡å—åœ¨ä¿æŒè®¡ç®—éœ€æ±‚è¾ƒä½çš„åŒæ—¶ï¼Œæä¾›äº†æ¥è¿‘æœ€å…ˆè¿›çš„ç²¾åº¦ã€‚ä¸å…¶ä»–æœ€å…ˆè¿›çš„æ–¹æ³•ç›¸æ¯”ï¼Œæˆ‘ä»¬çš„æ¨¡å‹åœ¨ä¿æŒåˆæˆæ•°æ®å’ŒçœŸå®æ•°æ®çš„å¯æ¯”æ€§èƒ½çš„åŒæ—¶ï¼Œå®ç°äº†10å€åˆ°70å€çš„é€Ÿåº¦æå‡ã€‚å®ƒèƒ½å¤Ÿåœ¨Jetson Orin Nanoä¸Šä»¥è¶…è¿‡20 FPSçš„é€Ÿåº¦è¿è¡Œ512x384åˆ†è¾¨ç‡çš„å›¾åƒã€‚å®Œæ•´çš„è®­ç»ƒå’Œè¯„ä¼°ä»£ç å¯åœ¨<a rel="noopener nofollow" href=https://github.com/neufieldrobotics/NeuFlow_v2 target=_blank>https://github.com/neufieldrobotics/NeuFlow_v2</a>ä¸Šæ‰¾åˆ°ã€‚<p>Real-time high-accuracy optical flow estimation is crucial for various real-world applications. While recent learning-based optical flow methods have achieved high accu- racy, they often come with significant computational costs. In this paper, we propose a highly efficient optical flow method that balances high accuracy with reduced computational demands. Building upon NeuFlow v1, we introduce new components including a much more light-weight backbone and a fast refinement module. Both these modules help in keeping the computational demands light while providing close to state of the art accuracy. Compares to other state of the art methods, our model achieves a 10x-70x speedup while maintaining comparable performance on both synthetic and real-world data. It is capable of running at over 20 FPS on 512x384 resolution images on a Jetson Orin Nano. The full training and evaluation code is available at [https://github.com/neufieldrobotics/NeuFlow_v2].<table><thead><tr><th>NeoFlowV2æ¶æ„å›¾<tbody><tr><td><img alt decoding=async loading=lazy src=https://img2024.cnblogs.com/blog/1048201/202504/1048201-20250414051651217-1391875850.png></table><table><thead><tr><th>NeoFlowV2éª¨å¹²å›¾<tbody><tr><td><img alt decoding=async loading=lazy src=https://img2024.cnblogs.com/blog/1048201/202504/1048201-20250414051658022-677507102.png></table><h4>ä¸€ã€ç®€å•ä¸»å¹²ç½‘ç»œï¼ˆSimple Backboneï¼‰</h4><p>NeuFlow v2ä½¿ç”¨ä¸€ä¸ªç®€å•çš„CNNä¸»å¹²ç½‘ç»œæ¥æå–å¤šå°ºåº¦å›¾åƒçš„ä½çº§ç‰¹å¾ã€‚ä¸»å¹²ç½‘ç»œä»1/2ã€1/4å’Œ1/8å°ºåº¦çš„å›¾åƒä¸­æå–ç‰¹å¾ï¼Œä½¿ç”¨ç”±å·ç§¯å±‚ã€å½’ä¸€åŒ–å±‚å’ŒReLUæ¿€æ´»å±‚ç»„æˆçš„CNNå—æ¥æå–ç‰¹å¾ï¼Œå¹¶å°†è¿™äº›ç‰¹å¾åˆå¹¶å’Œè°ƒæ•´å¤§å°åˆ°æ‰€éœ€çš„è¾“å‡ºå°ºåº¦ï¼Œå³1/16å°ºåº¦çš„ç‰¹å¾å’Œä¸Šä¸‹æ–‡ï¼Œä»¥åŠ1/8å°ºåº¦çš„ç‰¹å¾å’Œä¸Šä¸‹æ–‡ã€‚å…·ä½“æ¥è¯´ï¼Œå¯¹äºè¾“å…¥å›¾åƒ$I$ï¼Œä¸»å¹²ç½‘ç»œçš„è¾“å‡ºå¯ä»¥è¡¨ç¤ºä¸ºï¼š $$ \begin{aligned} F_{1/8}, F_{1/16}, C_{1/8}, C_{1/16} &= \text{Backbone}(I) \end{aligned} $$ å…¶ä¸­ï¼Œ$F_{1/8}$å’Œ$F_{1/16}$æ˜¯ç”¨äºç›¸å…³æ€§è®¡ç®—çš„ç‰¹å¾ï¼Œ$C_{1/8}$å’Œ$C_{1/16}$æ˜¯ç”¨äºå…‰æµç»†åŒ–çš„ä¸Šä¸‹æ–‡ã€‚<h4 id=-1>äºŒã€äº¤å‰æ³¨æ„åŠ›å’Œå…¨å±€åŒ¹é…ï¼ˆCross-Attention and Global Matchingï¼‰</h4><p>äº¤å‰æ³¨æ„åŠ›ç”¨äºåœ¨å…¨å±€èŒƒå›´å†…äº¤æ¢å›¾åƒä¹‹é—´çš„ä¿¡æ¯ï¼Œå¢å¼ºåŒ¹é…ç‰¹å¾çš„åŒºåˆ†åº¦ï¼Œå‡å°‘æœªåŒ¹é…ç‰¹å¾çš„ç›¸ä¼¼åº¦ã€‚å…¨å±€åŒ¹é…åˆ™ç”¨äºåœ¨å…¨å±€èŒƒå›´å†…å¯»æ‰¾å¯¹åº”ç‰¹å¾ï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿå¤„ç†å¤§åƒç´ ä½ç§»ï¼Œä¾‹å¦‚åœ¨å¿«é€Ÿç§»åŠ¨çš„ç›¸æœºæƒ…å†µä¸‹ã€‚äº¤å‰æ³¨æ„åŠ›å’Œå…¨å±€åŒ¹é…çš„æ“ä½œå¯ä»¥è¡¨ç¤ºä¸ºï¼š $$ \begin{aligned} F'<em>{1/16} &= \text{CrossAttention}(F</em>{1/16}, F_{1/16}) \ F''<em>{1/16} &= \text{GlobalMatching}(F'</em>{1/16}) \end{aligned} $$ å…¶ä¸­ï¼Œ$F'<em>{1/16}$æ˜¯ç»è¿‡äº¤å‰æ³¨æ„åŠ›å¢å¼ºåçš„ç‰¹å¾ï¼Œ$F''</em>{1/16}$æ˜¯ç»è¿‡å…¨å±€åŒ¹é…åçš„ç‰¹å¾ã€‚<h4 id=-2>ä¸‰ã€ç®€å•RNNç»†åŒ–æ¨¡å—ï¼ˆSimple RNN Refinementï¼‰</h4><p>é¦–å…ˆè®¡ç®—é™„è¿‘9Ã—9é‚»åŸŸå†…çš„ç›¸å…³æ€§ï¼Œå¹¶ä½¿ç”¨ä¼°è®¡çš„å…‰æµå¯¹ç›¸å…³æ€§è¿›è¡Œæ‰­æ›²ã€‚ç„¶åå°†æ‰­æ›²çš„ç›¸å…³æ€§ã€ä¸Šä¸‹æ–‡ç‰¹å¾ã€ä¼°è®¡çš„å…‰æµå’Œå‰ä¸€éšè—çŠ¶æ€è¿æ¥èµ·æ¥ï¼Œé€šè¿‡å…«å±‚ç®€å•çš„3Ã—3å·ç§¯å±‚åæ¥ReLUæ¿€æ´»å‡½æ•°æ¥è¾“å‡ºç»†åŒ–åçš„å…‰æµå’Œæ›´æ–°åçš„éšè—çŠ¶æ€ã€‚ç®€å•RNNç»†åŒ–æ¨¡å—çš„æ“ä½œå¯ä»¥è¡¨ç¤ºä¸ºï¼š $$ \begin{aligned} C &= \text{ComputeCorrelation}(F''<em>{1/16}, F''</em>{1/16}) \ C_w &= \text{Warp}(C, F_{\text{flow}}) \ h_{t+1}, F_{\text{flow}}^{t+1} &= \text{SimpleRNN}(C_w, C_{1/16}, F_{\text{flow}}^t, h_t) \end{aligned} $$ å…¶ä¸­ï¼Œ$C$æ˜¯è®¡ç®—çš„ç›¸å…³æ€§ï¼Œ$C_w$æ˜¯æ‰­æ›²åçš„ç›¸å…³æ€§ï¼Œ$h_t$æ˜¯å‰ä¸€éšè—çŠ¶æ€ï¼Œ$F_{\text{flow}}^t$æ˜¯å½“å‰ä¼°è®¡çš„å…‰æµï¼Œ$h_{t+1}$å’Œ$F_{\text{flow}}^{t+1}$åˆ†åˆ«æ˜¯æ›´æ–°åçš„éšè—çŠ¶æ€å’Œç»†åŒ–åçš„å…‰æµã€‚<h4 id=-3>å››ã€å¤šå°ºåº¦ç‰¹å¾/ä¸Šä¸‹æ–‡åˆå¹¶ï¼ˆMulti-Scale Feature/Context Mergeï¼‰</h4><p>ä¸ºäº†å°†å…¨å±€ç‰¹å¾/ä¸Šä¸‹æ–‡ä¸å±€éƒ¨ç‰¹å¾/ä¸Šä¸‹æ–‡åˆå¹¶ï¼Œç¡®ä¿1/8å°ºåº¦çš„ç‰¹å¾/ä¸Šä¸‹æ–‡åŒ…å«å…¨å±€å’Œå±€éƒ¨ä¿¡æ¯ï¼Œä½¿ç”¨ç®€å•çš„CNNå—æ¥åˆå¹¶1/16å°ºåº¦çš„å…¨å±€ç‰¹å¾/ä¸Šä¸‹æ–‡ä¸1/8å°ºåº¦çš„å±€éƒ¨ç‰¹å¾/ä¸Šä¸‹æ–‡ã€‚åˆå¹¶æ“ä½œå¯ä»¥è¡¨ç¤ºä¸ºï¼š $$ \begin{aligned} F_{1/8}^{\text{merged}}, C_{1/8}^{\text{merged}} &= \text{Merge}(F_{1/8}, F_{1/16}^{\text{interpolated}}, C_{1/8}, C_{1/16}^{\text{interpolated}}) \end{aligned} $$ å…¶ä¸­ï¼Œ$F_{1/8}^{\text{merged}}$å’Œ$C_{1/8}^{\text{merged}}$æ˜¯åˆå¹¶åçš„1/8å°ºåº¦çš„ç‰¹å¾å’Œä¸Šä¸‹æ–‡ã€‚<h4 id=-4>äº”ã€æ•´ä½“æµç¨‹</h4><p>NeuFlow v2çš„æ•´ä½“æµç¨‹å¯ä»¥æ€»ç»“ä¸ºï¼š $$ \begin{aligned} F_{1/8}, F_{1/16}, C_{1/8}, C_{1/16} &= \text{Backbone}(I) \ F'<em>{1/16} &= \text{CrossAttention}(F</em>{1/16}, F_{1/16}) \ F''<em>{1/16} &= \text{GlobalMatching}(F'</em>{1/16}) \ C &= \text{ComputeCorrelation}(F''<em>{1/16}, F''</em>{1/16}) \ C_w &= \text{Warp}(C, F_{\text{flow}}^0) \ h_1, F_{\text{flow}}^1 &= \text{SimpleRNN}(C_w, C_{1/16}, F_{\text{flow}}^0, h_0) \ F_{1/8}^{\text{merged}}, C_{1/8}^{\text{merged}} &= \text{Merge}(F_{1/8}, F_{1/16}^{\text{interpolated}}, C_{1/8}, C_{1/16}^{\text{interpolated}}) \ \text{Repeat SimpleRNN refinement for 8 iterations on } F_{1/8}^{\text{merged}} \text{ and } C_{1/8}^{\text{merged}} \end{aligned} $$ æœ€ç»ˆï¼Œé€šè¿‡å‡¸ä¸Šé‡‡æ ·æ¨¡å—å°†ç»†åŒ–åçš„1/8å°ºåº¦å…‰æµä¸Šé‡‡æ ·åˆ°å…¨åˆ†è¾¨ç‡ï¼Œå¾—åˆ°æœ€ç»ˆçš„å…‰æµä¼°è®¡ç»“æœã€‚<h2 id=-5>å®ç°</h2><h3 id=-6>1. å‡†å¤‡onnxæ¨¡å‹</h3><p>[https://github.com/ibaiGorordo/ONNX-NeuFlowV2-Optical-Flow] [https://github.com/ibaiGorordo/ONNX-NeuFlowV2-Optical-Flow/releases/download/0.1.0/neuflow_mixed.onnx] [https://github.com/ibaiGorordo/ONNX-NeuFlowV2-Optical-Flow/releases/download/0.1.0/neuflow_sintel.onnx] [https://github.com/ibaiGorordo/ONNX-NeuFlowV2-Optical-Flow/releases/download/0.1.0/neuflow_things.onnx]<h3 id=-7>2. æ ¸å¿ƒä»£ç </h3><p><strong>Pythonç‰ˆæœ¬:</strong><pre class=language-py data-lang=py><code class=language-py data-lang=py># ä½¿ç”¨opticsæ¨¡å‹é¢„æµ‹å…‰æµ
# æ¨¡å‹: ../../../assets/neuflow_v2/neoflow_things.onnx
# è¾“å…¥:input1
# name: input1
# tensor: float32[1,3,432,768]
# input2
# name: input2
# tensor: float32[1,3,432,768]
# è¾“å‡º:output
# name: output
# tensor: float32[1,2,432,768]

import cv2
import numpy as np
import onnxruntime
import os
import requests
from tqdm import tqdm

# å¯ç”¨çš„æ¨¡å‹åˆ—è¡¨
available_models = ["neuflow_mixed", "neuflow_sintel", "neuflow_things"]

# æ£€æŸ¥æ¨¡å‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨åˆ™ä¸‹è½½
def check_model(model_path: str):
    if os.path.exists(model_path):
        print("æ¨¡å‹æ–‡ä»¶å­˜åœ¨!")
        return
    # ä»è·¯å¾„ä¸­æå–æ¨¡å‹åç§°
    model_name = os.path.basename(model_path).split('.')[0]
    if model_name not in available_models:
        raise ValueError(f"æ— æ•ˆçš„æ¨¡å‹åç§°: {model_name}")
        exit(0)

# ç»˜åˆ¶å…‰æµå›¾
def draw_flow(flow, image, boxes=None):
    # å°†å…‰æµè½¬æ¢ä¸ºå½©è‰²å›¾åƒ
    flow_img = flow_to_image(flow, 35)
    # ä»RGBé¢œè‰²ç©ºé—´è½¬æ¢ä¸ºBGRé¢œè‰²ç©ºé—´
    flow_img = cv2.cvtColor(flow_img, cv2.COLOR_RGB2BGR)
    # åˆå¹¶åŸå§‹å›¾åƒå’Œå…‰æµå›¾åƒ
    combined = cv2.addWeighted(image, 0.5, flow_img, 0.6, 0)
    if boxes is not None:
        # åˆ›å»ºç™½è‰²èƒŒæ™¯å›¾åƒ
        white_background = np.ones((image.shape[0], image.shape[1], 3), dtype=np.uint8) * 255
        # åˆå¹¶åŸå§‹å›¾åƒå’Œç™½è‰²èƒŒæ™¯
        new_image = cv2.addWeighted(image, 0.7, white_background, 0.4, 0)
        for box in boxes:
            x1, y1, x2, y2 = box.astype(int)
            # å°†åˆå¹¶åçš„å›¾åƒéƒ¨åˆ†æ›¿æ¢åˆ°æ–°å›¾åƒä¸­
            new_image[y1:y2, x1:x2] = combined[y1:y2, x1:x2]
        combined = new_image
    return combined

# ç”Ÿæˆé¢œè‰²è½®
def make_color_wheel():
    """
    æ ¹æ®Middleburyé¢œè‰²ç¼–ç ç”Ÿæˆé¢œè‰²è½®
    :return: é¢œè‰²è½®
    """
    RY = 15
    YG = 6
    GC = 4
    CB = 11
    BM = 13
    MR = 6
    ncols = RY + YG + GC + CB + BM + MR
    colorwheel = np.zeros([ncols, 3])
    col = 0
    # RYæ®µ
    colorwheel[0:RY, 0] = 255
    colorwheel[0:RY, 1] = np.transpose(np.floor(255 * np.arange(0, RY) / RY))
    col += RY
    # YGæ®µ
    colorwheel[col:col + YG, 0] = 255 - np.transpose(np.floor(255 * np.arange(0, YG) / YG))
    colorwheel[col:col + YG, 1] = 255
    col += YG
    # GCæ®µ
    colorwheel[col:col + GC, 1] = 255
    colorwheel[col:col + GC, 2] = np.transpose(np.floor(255 * np.arange(0, GC) / GC))
    col += GC
    # CBæ®µ
    colorwheel[col:col + CB, 1] = 255 - np.transpose(np.floor(255 * np.arange(0, CB) / CB))
    colorwheel[col:col + CB, 2] = 255
    col += CB
    # BMæ®µ
    colorwheel[col:col + BM, 2] = 255
    colorwheel[col:col + BM, 0] = np.transpose(np.floor(255 * np.arange(0, BM) / BM))
    col += BM
    # MRæ®µ
    colorwheel[col:col + MR, 2] = 255 - np.transpose(np.floor(255 * np.arange(0, MR) / MR))
    colorwheel[col:col + MR, 0] = 255
    return colorwheel

# è®¡ç®—å…‰æµé¢œè‰²å›¾
colorwheel = make_color_wheel()
def compute_color(u, v):
    """
    è®¡ç®—å…‰æµé¢œè‰²å›¾
    :param u: å…‰æµæ°´å¹³åˆ†é‡å›¾
    :param v: å…‰æµå‚ç›´åˆ†é‡å›¾
    :return: é¢œè‰²ç¼–ç çš„å…‰æµå›¾
    """
    [h, w] = u.shape
    img = np.zeros([h, w, 3])
    # æ‰¾å‡ºNaNå€¼çš„ç´¢å¼•
    nanIdx = np.isnan(u) | np.isnan(v)
    u[nanIdx] = 0
    v[nanIdx] = 0
    ncols = np.size(colorwheel, 0)
    # è®¡ç®—å…‰æµçš„å¹…å€¼
    rad = np.sqrt(u ** 2 + v ** 2)
    # è®¡ç®—å…‰æµçš„è§’åº¦
    a = np.arctan2(-v, -u) / np.pi
    fk = (a + 1) / 2 * (ncols - 1) + 1
    k0 = np.floor(fk).astype(int)
    k1 = k0 + 1
    k1[k1 == ncols + 1] = 1
    f = fk - k0
    for i in range(0, np.size(colorwheel, 1)):
        tmp = colorwheel[:, i]
        col0 = tmp[k0 - 1] / 255
        col1 = tmp[k1 - 1] / 255
        col = (1 - f) * col0 + f * col1
        idx = rad <= 1
        col[idx] = 1 - rad[idx] * (1 - col[idx])
        notidx = np.logical_not(idx)
        col[notidx] *= 0.75
        img[:, :, i] = np.uint8(np.floor(255 * col * (1 - nanIdx)))
    return img

# å°†å…‰æµè½¬æ¢ä¸ºMiddleburyé¢œè‰²ç¼–ç å›¾åƒ
def flow_to_image(flow, maxrad=None):
    """
    å°†å…‰æµè½¬æ¢ä¸ºMiddleburyé¢œè‰²ç¼–ç å›¾åƒ
    :param flow: å…‰æµå›¾
    :return: Middleburyé¢œè‰²ç¼–ç çš„å…‰æµå›¾åƒ
    """
    u = flow[:, :, 0]
    v = flow[:, :, 1]
    rad = np.sqrt(u ** 2 + v ** 2)
    if maxrad is None:
        maxrad = max(-1, np.max(rad))
    eps = np.finfo(float).eps
    u = np.clip(u, -maxrad + 5, maxrad - 5)
    v = np.clip(v, -maxrad + 5, maxrad - 5)
    u = u / (maxrad + eps)
    v = v / (maxrad + eps)
    img = compute_color(u, v)
    return np.uint8(img)

# å…‰æµä¼°è®¡ç±»
class NeuFlowV2:
    def __init__(self, path: str):
        # æ£€æŸ¥æ¨¡å‹æ–‡ä»¶
        check_model(path)
        # åˆå§‹åŒ–ONNXè¿è¡Œæ—¶ä¼šè¯
        self.session = onnxruntime.InferenceSession(path, providers=onnxruntime.get_available_providers())
        # è·å–è¾“å…¥ä¿¡æ¯
        self.get_input_details()
        # è·å–è¾“å‡ºä¿¡æ¯
        self.get_output_details()

    def __call__(self, img_prev: np.ndarray, img_now: np.ndarray) -> np.ndarray:
        return self.estimate_flow(img_prev, img_now)

    # ä¼°è®¡å…‰æµ
    def estimate_flow(self, img_prev: np.ndarray, img_now: np.ndarray) -> np.ndarray:
        # å‡†å¤‡è¾“å…¥å¼ é‡
        input_tensors = self.prepare_inputs(img_prev, img_now)
        # è¿›è¡Œæ¨ç†
        outputs = self.inference(input_tensors)
        return self.process_output(outputs[0])

    # å‡†å¤‡è¾“å…¥å¼ é‡
    def prepare_inputs(self, img_prev: np.ndarray, img_now: np.ndarray) -> tuple[np.ndarray, np.ndarray]:
        self.img_height, self.img_width = img_now.shape[:2]
        input_prev = self.prepare_input(img_prev)
        input_now = self.prepare_input(img_now)
        return input_prev, input_now

    # å‡†å¤‡å•å¼ è¾“å…¥å›¾åƒ
    def prepare_input(self, img: np.ndarray) -> np.ndarray:
        # è°ƒæ•´å›¾åƒå¤§å°
        input_img = cv2.resize(img, (self.input_width, self.input_height))
        # å½’ä¸€åŒ–
        input_img = input_img / 255.0
        input_img = input_img.transpose(2, 0, 1)
        input_tensor = input_img[np.newaxis, :, :, :].astype(np.float32)
        return input_tensor

    # è¿›è¡Œæ¨ç†
    def inference(self, input_tensors: tuple[np.ndarray, np.ndarray]) -> np.ndarray:
        start = time.perf_counter()
        outputs = self.session.run(self.output_names, {self.input_names[0]: input_tensors[0],
                                                       self.input_names[1]: input_tensors[1]})
        print(f"æ¨ç†æ—¶é—´: {(time.perf_counter() - start) * 1000:.2f} ms")
        return outputs

    # å¤„ç†è¾“å‡ºç»“æœ
    def process_output(self, output) -> np.ndarray:
        flow = output.squeeze().transpose(1, 2, 0)
        return cv2.resize(flow, (self.img_width, self.img_height))

    # è·å–è¾“å…¥ä¿¡æ¯
    def get_input_details(self):
        model_inputs = self.session.get_inputs()
        self.input_names = [model_inputs[i].name for i in range(len(model_inputs))]
        input_shape = model_inputs[0].shape
        self.input_height = input_shape[2]
        self.input_width = input_shape[3]

    # è·å–è¾“å‡ºä¿¡æ¯
    def get_output_details(self):
        model_outputs = self.session.get_outputs()
        self.output_names = [model_outputs[i].name for i in range(len(model_outputs))]

if __name__ == '__main__':
    import time
    # æ¨¡å‹æ–‡ä»¶è·¯å¾„
    model_path = "../../../assets/ailia-models/neuflow_v2/neuflow_sintel.onnx"
    print("æ¨¡å‹æ–‡ä»¶è·¯å¾„{}", model_path)
    # åˆå§‹åŒ–æ¨¡å‹
    estimator = NeuFlowV2(model_path)
    # åŠ è½½ç¬¬ä¸€å¼ å›¾ç‰‡
    img1 = cv2.imread("../assets/frame_0016.png")
    # åŠ è½½ç¬¬äºŒå¼ å›¾ç‰‡
    img2 = cv2.imread("../assets/frame_0025.png")
    # ä¼°è®¡å…‰æµ
    flow = estimator(img1, img2)
    # ç»˜åˆ¶å…‰æµå›¾
    flow_img = draw_flow(flow, img1)
    # åˆ›å»ºç»“æœæ–‡ä»¶å¤¹
    os.makedirs("../result", exist_ok=True)
    # ä¿å­˜ç»“æœå›¾ç‰‡
    cv2.imwrite("../result/optics_onnx.png", flow_img)
    print("å…‰æµé¢„æµ‹ç»“æœå·²ä¿å­˜åˆ° ../result/optics_onnx.png")   
</code></pre><p><strong>Rustç‰ˆæœ¬:</strong><pre class=language-rs data-lang=rs><code class=language-rs data-lang=rs>#![allow(unused)]

//! ä½¿ç”¨opticsæ¨¡å‹é¢„æµ‹å…‰æµ
//! æ¨¡å‹: ../../../assets/neuflow_v2/neoflow_things.onnx
//! è¾“å…¥:input1
//! name: input1
//! tensor: float32[1,3,432,768]
//! input2
//! name: input2
//! tensor: float32[1,3,432,768]
//! è¾“å‡º:output
//! name: output
//! tensor: float32[1,2,432,768]

// å¯¼å…¥æ ‡å‡†åº“è·¯å¾„å¤„ç†æ¨¡å—
use std::path::Path;

// ç”¨äºè®¡æ—¶
use std::time::Instant;
// æ ‡å‡†åº“
use std::f32::consts::PI;
use std::ops::Add;

// å¯¼å…¥ ORT ç›¸å…³æ¨¡å—
use ort::{inputs, session::Session};
use ort::value::Tensor;

// å›¾åƒå¤„ç†ç›¸å…³æ¨¡å—
use image::{GenericImageView, ImageBuffer, Rgb, RgbImage, DynamicImage};

// é”™è¯¯å¤„ç†æ¨¡å—
use anyhow::{anyhow, Result};

// çº¿æ€§ä»£æ•°åº“
use ndarray::{
    Array, ArrayD, ArrayViewD, 
    Dim, Ix1, Ix2, Ix3, Ix4, 
    IxDyn, stack, Axis, IxDynImpl, 
    ArrayBase, OwnedRepr, IntoDimension,
    ArrayView, 
};
use ndarray::s;
// use ndarray_linalg::error::LinalgError;

// éšæœºæ•°
use rand::rng;

// éšæœºåˆ†å¸ƒ
use rand_distr::{Normal, Distribution};

// å¯å…‹éš†çš„è¿­ä»£å™¨
use itertools::Itertools;

// å…‹éš†æ’ä»¶
use clone_dyn_types::CloneDyn;

// å¯ç”¨çš„æ¨¡å‹åˆ—è¡¨
const AVAILABLE_MODELS: [&str; 3] = ["neuflow_mixed", "neuflow_sintel", "neuflow_things"];

// æ£€æŸ¥æ¨¡å‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨åˆ™å¤„ç†ï¼ˆè¿™é‡ŒåŸPythonä»£ç æ²¡æœ‰å®é™…ä¸‹è½½é€»è¾‘ï¼Œç›´æ¥é€€å‡ºï¼‰
fn check_model(model_path: &str) -> Result<()> {
    if Path::new(model_path).exists() {
        println!("æ¨¡å‹æ–‡ä»¶å­˜åœ¨!");
        Ok(())
    } else {
        // ä»è·¯å¾„ä¸­æå–æ¨¡å‹åç§°
        let model_name = Path::new(model_path).file_stem().ok_or_else(|| anyhow!("æ— æ³•è·å–æ¨¡å‹æ–‡ä»¶å"))?.to_str().ok_or_else(|| anyhow!("æ— æ³•è½¬æ¢æ¨¡å‹æ–‡ä»¶å"))?;
        if !AVAILABLE_MODELS.contains(&model_name) {
            return Err(anyhow!("æ— æ•ˆçš„æ¨¡å‹åç§°: {}", model_name));
        }
        // åŸPythonä»£ç ä¸­ä¸‹è½½éƒ¨åˆ†è¢«æ³¨é‡Šï¼Œè¿™é‡Œç›´æ¥é€€å‡º
        std::process::exit(0);
    }
}

// ç”Ÿæˆé¢œè‰²è½®
fn make_color_wheel() -> ArrayD&LTu8> {
    let ry = 15;
    let yg = 6;
    let gc = 4;
    let cb = 11;
    let bm = 13;
    let mr = 6;
    let ncols = ry + yg + gc + cb + bm + mr;
    let mut colorwheel = Array::zeros((ncols, 3));

    let mut col = 0;
    // RYæ®µ
    colorwheel.slice_mut(s![col..col + ry, 0]).fill(255);
    for (i, val) in (0..ry).enumerate() {
        colorwheel[[col + i, 1]] = ((255.0 * val as f32 / ry as f32) as u8);
    }
    col += ry;
    // YGæ®µ
    for (i, val) in (0..yg).enumerate() {
        colorwheel[[col + i, 0]] = (255 - (255.0 * val as f32 / yg as f32) as u8);
    }
    colorwheel.slice_mut(s![col..col + yg, 1]).fill(255);
    col += yg;
    // GCæ®µ
    colorwheel.slice_mut(s![col..col + gc, 1]).fill(255);
    for (i, val) in (0..gc).enumerate() {
        colorwheel[[col + i, 2]] = ((255.0 * val as f32 / gc as f32) as u8);
    }
    col += gc;
    // CBæ®µ
    for (i, val) in (0..cb).enumerate() {
        colorwheel[[col + i, 1]] = (255 - (255.0 * val as f32 / cb as f32) as u8);
    }
    colorwheel.slice_mut(s![col..col + cb, 2]).fill(255);
    col += cb;
    // BMæ®µ
    colorwheel.slice_mut(s![col..col + bm, 2]).fill(255);
    for (i, val) in (0..bm).enumerate() {
        colorwheel[[col + i, 0]] = ((255.0 * val as f32 / bm as f32) as u8);
    }
    col += bm;
    // MRæ®µ
    for (i, val) in (0..mr).enumerate() {
        colorwheel[[col + i, 2]] = (255 - (255.0 * val as f32 / mr as f32) as u8);
    }
    colorwheel.slice_mut(s![col..col + mr, 0]).fill(255);

    colorwheel.into_dyn()
}

// è®¡ç®—å…‰æµé¢œè‰²å›¾
fn compute_color(u: &ArrayD&LTf32>, v: &ArrayD&LTf32>) -> ImageBuffer&LTRgb&LTu8>, Vec&LTu8>> {
    // è·å–è¾“å…¥æ•°ç»„çš„å½¢çŠ¶ï¼ˆé«˜åº¦å’Œå®½åº¦ï¼‰
    let (h, w) = {
        let shape = u.shape();
        (shape[0], shape[1])
    };
    // åˆ›å»ºä¸€ä¸ªä¸è¾“å…¥æ•°ç»„å¤§å°ç›¸åŒçš„å›¾åƒç¼“å†²åŒº
    let mut img = ImageBuffer::new(w as u32, h as u32);

    // åˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„ï¼Œç”¨äºæ ‡è®°å­˜åœ¨ NaN å€¼çš„ä½ç½®
    let mut nan_idx = Array::zeros((h, w));
    // éå† u æ•°ç»„ï¼Œæ ‡è®° NaN å€¼çš„ä½ç½®
    for (i, &val_u) in u.iter().enumerate() {
        let (y, x) = (i / w, i % w);
        if val_u.is_nan() {
            nan_idx[[y, x]] = 1.0;
        }
    }
    // éå† v æ•°ç»„ï¼Œæ ‡è®° NaN å€¼çš„ä½ç½®
    for (i, &val_v) in v.iter().enumerate() {
        let (y, x) = (i / w, i % w);
        if val_v.is_nan() {
            nan_idx[[y, x]] = 1.0;
        }
    }

    // æŒä¹…å˜é‡
    let color_wheel = make_color_wheel();

    // è·å–é¢œè‰²è½®çš„åˆ—æ•°
    let ncols = color_wheel.shape()[0];
    // è®¡ç®—æ¯ä¸ªåƒç´ çš„å¾„å‘å¤§å°
    let rad = Array::from_shape_fn((h, w), |(y, x)| {
        let u_val = u[[y, x]];
        let v_val = v[[y, x]];
        (u_val.powi(2) + v_val.powi(2)).sqrt()
    });
    // è®¡ç®—æ¯ä¸ªåƒç´ çš„è§’åº¦
    let a = Array::from_shape_fn((h, w), |(y, x)| {
        let u_val = u[[y, x]];
        let v_val = v[[y, x]];
        (-v_val).atan2(-u_val) / PI
    });
    // å°†è§’åº¦æ˜ å°„åˆ°é¢œè‰²è½®çš„ç´¢å¼•
    let fk = a.mapv(|a_val| (a_val + 1.0) / 2.0 * (ncols as f32 - 1.0) + 1.0);
    // è·å–é¢œè‰²è½®ç´¢å¼•çš„æ•´æ•°éƒ¨åˆ†
    let k0 = fk.mapv(|val| val.floor() as i32);
    // è·å–é¢œè‰²è½®ç´¢å¼•çš„ä¸Šç•Œæ•´æ•°éƒ¨åˆ†
    let k1 = k0.mapv(|val| (val + 1).clamp(1, ncols as i32));
    // è®¡ç®—é¢œè‰²è½®ç´¢å¼•çš„å°æ•°éƒ¨åˆ†
    let k0_float = k0.mapv(|val| val as f32);
    let f: Vec&LTf32> = fk.iter().zip(&k0_float).map(|(fk_val, k0_val)| fk_val - k0_val).collect();

    // éå†é¢œè‰²é€šé“
    for c in 0..3 {
        // æ£€æŸ¥ç´¢å¼•æ˜¯å¦è¶Šç•Œ
        if c >= color_wheel.shape()[1] {
            panic!("Color channel index {} is out of bounds for color wheel with shape {:?}", c, color_wheel.shape());
        }
        // è·å–é¢œè‰²è½®å¯¹åº”é€šé“çš„é¢œè‰²å€¼
        let colorwheel_col = color_wheel.slice(s![.., c]);
        // è·å–é¢œè‰²è½®ç´¢å¼• k0 å¯¹åº”çš„é¢œè‰²å€¼
        let col0 = k0.mapv(|val| colorwheel_col[val as usize] as f32 / 255.0);
        // è·å–é¢œè‰²è½®ç´¢å¼• k1 å¯¹åº”çš„é¢œè‰²å€¼
        let col1 = k1.mapv(|val| colorwheel_col[val.min((ncols-1).try_into().unwrap()) as usize] as f32 / 255.0);
        // æ’å€¼è®¡ç®—æœ€ç»ˆçš„é¢œè‰²å€¼, è¿”å›å¯å…‹éš†çš„å®¹å™¨
        let col = f.iter().zip(&col0).zip(&col1).map(|((f_val, col0_val), col1_val)| 
            (1.0 - f_val) * col0_val + f_val * col1_val
        ).collect_vec();  

        // æ ¹æ®å¾„å‘å¤§å°è°ƒæ•´é¢œè‰²å€¼
        let idx = rad.mapv(|rad_val| rad_val <= 1.0);
        
        let col_with_rad = col.into_iter().zip(&rad).map(|(col_val, rad_val)| {
            if *rad_val <= 1.0 {
                1.0 - rad_val * (1.0 - col_val)
            } else {
                col_val
            }
        });

        // å¯¹è¶…å‡ºå¾„å‘èŒƒå›´çš„é¢œè‰²å€¼è¿›è¡Œè¡°å‡
        let not_idx = idx.mapv(|val| !val);
        let col_final = col_with_rad.zip(&ampnot_idx).map(|(col_val, not_idx_val)| if *not_idx_val { col_val * 0.75 } else { col_val });

        // å°†è®¡ç®—å¾—åˆ°çš„é¢œè‰²å€¼èµ‹å€¼åˆ°å›¾åƒç¼“å†²åŒº
        for (i, val) in col_final.enumerate() {
            let (y, x) = (i / w, i % w);
            let pixel_val = ((255.0 * val * (1.0 - nan_idx[[y, x]])) as u8).clamp(0, 255);
            img.put_pixel(x as u32, y as u32, Rgb([pixel_val, pixel_val, pixel_val]));
        }
    }

    // è¿”å›ç”Ÿæˆçš„å›¾åƒ
    img
}

// å°†å…‰æµè½¬æ¢ä¸ºMiddleburyé¢œè‰²ç¼–ç å›¾åƒ
fn flow_to_image(flow: &ArrayD&LTf32>) -> ImageBuffer&LTRgb&LTu8>, Vec&LTu8>> {
    // ä»å…‰æµæ•°ç»„ä¸­æå–uåˆ†é‡ï¼ˆxæ–¹å‘è¿åŠ¨ï¼‰, ä½¿ç”¨èŒƒå›´è¯­æ³•ä¿æŒåŠ¨æ€ç»´åº¦
    let u = flow.slice(s![0, 0, .., ..]);
    // ä»å…‰æµæ•°ç»„ä¸­æå–våˆ†é‡ï¼ˆyæ–¹å‘è¿åŠ¨ï¼‰, ä½¿ç”¨èŒƒå›´è¯­æ³•ä¿æŒåŠ¨æ€ç»´åº¦
    let v = flow.slice(s![0, 1, .., ..]);
    
    // ä¿®æ­£ï¼šä½¿ç”¨map2æ›¿ä»£zip+mapvç»„åˆ
    let rad = u.mapv(|u_val| u_val.powi(2))
              .add(&v.mapv(|v_val| v_val.powi(2)))
              .mapv(|sum| sum.sqrt());
    
    // æ‰¾å‡ºæ‰€æœ‰åƒç´ ä¸­çš„æœ€å¤§å…‰æµå¹…åº¦
    let maxrad = rad.iter().fold(f32::MIN, |acc, &val| acc.max(val));
    let eps = std::f32::EPSILON;
    
    // å°†uåˆ†é‡è£å‰ªåˆ°[-maxrad+5, maxrad-5]èŒƒå›´å†…
    let u_clipped = u.mapv(|val| val.clamp(-maxrad + 5.0, maxrad - 5.0));
    // å°†våˆ†é‡è£å‰ªåˆ°[-maxrad+5, maxrad-5]èŒƒå›´å†…
    let v_clipped = v.mapv(|val| val.clamp(-maxrad + 5.0, maxrad - 5.0));
    
    // å°†è£å‰ªåçš„uåˆ†é‡å½’ä¸€åŒ–åˆ°[-1,1]èŒƒå›´
    let u_normalized = u_clipped.mapv(|val| val / (maxrad + eps)).into_dyn();;
    // å°†è£å‰ªåçš„våˆ†é‡å½’ä¸€åŒ–åˆ°[-1,1]èŒƒå›´
    let v_normalized = v_clipped.mapv(|val| val / (maxrad + eps)).into_dyn();;

    // è¿”å›
    compute_color(&u_normalized, &v_normalized)
}

// // å…‰æµä¼°è®¡ç±»
struct NeuFlowV2 {
    session: Session,
    input_names: Vec&LTString>,
    output_names: Vec&LTString>,
    input_height: usize,
    input_width: usize,
}

impl NeuFlowV2 {
    // æ„é€ å‡½æ•°ï¼šä»æŒ‡å®šè·¯å¾„åŠ è½½ONNXæ¨¡å‹å¹¶åˆå§‹åŒ–NeuFlowV2ç»“æ„ä½“
    fn new(path: &str) -> Result&LTSelf> {
        // æ£€æŸ¥æ¨¡å‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨åŠæœ‰æ•ˆæ€§ï¼ˆå‡è®¾check_modelæ˜¯è‡ªå®šä¹‰å‡½æ•°ï¼‰
        check_model(path)?;
        
        // ä½¿ç”¨ortåº“åˆ›å»ºæ¨ç†ä¼šè¯ï¼šé€šè¿‡SessionBuilderåŠ è½½ONNXæ¨¡å‹æ–‡ä»¶
        // ortåº“æ˜¯ONNX Runtimeçš„Rustå°è£…ï¼Œæ”¯æŒé«˜æ€§èƒ½æ¨ç†
        let session = Session::builder()?.commit_from_file(path)?;

        // ç›´æ¥æŒ‡å®šè¾“å…¥èŠ‚ç‚¹åç§°ï¼ˆæ ¹æ®æç¤ºï¼‰
        let input_names = vec![
            "input1".to_string(),
            "input2".to_string()
        ];

        // ç›´æ¥æŒ‡å®šè¾“å‡ºèŠ‚ç‚¹åç§°ï¼ˆæ ¹æ®æç¤ºï¼‰
        let output_names = vec![
            "output".to_string()
        ];

        // è·å–è¾“å…¥å½¢çŠ¶ï¼ˆæ ¹æ®æç¤ºä¸­çš„tensorå½¢çŠ¶ï¼‰, float32[1,3,432,768]
        let input_shape = [1, 3, 432, 768]; 
        // 432
        let input_height = input_shape[2] as usize; 
        // 768
        let input_width = input_shape[3] as usize;  

        // è¿”å›åˆå§‹åŒ–å®Œæˆçš„NeuFlowV2ç»“æ„ä½“
        Ok(NeuFlowV2 {
            // ONNXæ¨ç†ä¼šè¯
            session,    
            // è¾“å…¥èŠ‚ç‚¹åç§°åˆ—è¡¨      
            input_names,      
            // è¾“å‡ºèŠ‚ç‚¹åç§°åˆ—è¡¨
            output_names,     
            // æ¨¡å‹è¦æ±‚çš„è¾“å…¥å›¾åƒé«˜åº¦
            input_height,     
            // æ¨¡å‹è¦æ±‚çš„è¾“å…¥å›¾åƒå®½åº¦
            input_width,      
        })
    }

     // å…‰æµä¼°è®¡ï¼šè¾“å…¥å‰åä¸¤å¸§å›¾åƒï¼Œè¾“å‡ºå…‰æµä¼°è®¡ç»“æœ
     fn estimate_flow(&mut self, img_prev: &ImageBuffer&LTRgb&LTu8>, Vec&LTu8>>, img_now: &ImageBuffer&LTRgb&LTu8>, Vec&LTu8>>) -> Result&LTArrayD&LTf32>> {
        // é¢„å¤„ç†è¾“å…¥å›¾åƒ
        let (input_prev, input_now) = self.prepare_inputs(img_prev, img_now)?;
        // æ‰§è¡Œæ¨¡å‹æ¨ç†
        let outputs = self.inference(&input_prev, &input_now)?;
        // å¤„ç†å¹¶è¿”å›è¾“å‡ºç»“æœ
        Ok(self.process_output(&outputs[0]))
    }

    // é¢„å¤„ç†è¾“å…¥ï¼šå‡†å¤‡å‰åä¸¤å¸§å›¾åƒçš„è¾“å…¥å¼ é‡
    fn prepare_inputs(&mut self, img_prev: &ImageBuffer&LTRgb&LTu8>, Vec&LTu8>>, img_now: &ImageBuffer&LTRgb&LTu8>, Vec&LTu8>>) -> Result<(ArrayD&LTf32>, ArrayD&LTf32>)> {
        // è·å–å½“å‰å¸§å›¾åƒçš„å°ºå¯¸
        let img_height = img_now.height() as usize;
        let img_width = img_now.width() as usize;

        // åˆ†åˆ«é¢„å¤„ç†å‰åä¸¤å¸§å›¾åƒ
        let input_prev = self.prepare_input(img_prev)?;
        let input_now = self.prepare_input(img_now)?;

        // è¿”å›é¢„å¤„ç†åçš„è¾“å…¥å¼ é‡
        Ok((input_prev, input_now))
    }

    // å‡†å¤‡å•å¸§è¾“å…¥ï¼šå°†å›¾åƒè½¬æ¢ä¸ºæ¨¡å‹éœ€è¦çš„å¼ é‡æ ¼å¼
    fn prepare_input(&mut self, img: &ImageBuffer&LTRgb&LTu8>, Vec&LTu8>>) -> Result&LTArrayD&LTf32>> {
        // å°†å›¾åƒç¼©æ”¾åˆ°æ¨¡å‹è¦æ±‚çš„å°ºå¯¸ï¼ˆä½¿ç”¨æœ€è¿‘é‚»æ’å€¼ï¼‰
        let dynamic_img = DynamicImage::ImageRgb8(img.clone());
        let input_img_dyn = dynamic_img.resize_exact(
            self.input_width as u32, 
            self.input_height as u32, 
            image::imageops::FilterType::Nearest
        );
        // å°†ç¼©æ”¾åçš„ DynamicImage è½¬æ¢å› ImageBuffer&LTRgb&LTu8>, Vec&LTu8>>
        let input_img: ImageBuffer&LTRgb&LTu8>, Vec&LTu8>> = input_img_dyn.clone().into_rgb8();

        // åˆ›å»º4é€šé“çš„é›¶å¼ é‡ï¼ˆ1, é€šé“ï¼Œé«˜åº¦ï¼Œå®½åº¦ï¼‰
        let mut input_array = Array::zeros((1, 3, self.input_height, self.input_width));

        // éå†å›¾åƒåƒç´ ï¼Œå½’ä¸€åŒ–å¹¶å¡«å……åˆ°å¼ é‡ä¸­
        for (x, y, pixel) in input_img.enumerate_pixels() {
            // Ré€šé“å½’ä¸€åŒ–
            input_array[[0, 0, y as usize, x as usize]] = pixel[0] as f32 / 255.0;
            // Gé€šé“å½’ä¸€åŒ–
            input_array[[0, 1, y as usize, x as usize]] = pixel[1] as f32 / 255.0;
            // Bé€šé“å½’ä¸€åŒ–
            input_array[[0, 2, y as usize, x as usize]] = pixel[2] as f32 / 255.0;
        }

        // å°†å›ºå®šç»´åº¦çš„æ•°ç»„è½¬æ¢ä¸ºåŠ¨æ€ç»´åº¦å¼ é‡
        let input_tensor = input_array.into_dyn();
        Ok(input_tensor)
    }

    // æ‰§è¡Œæ¨ç†ï¼šè¾“å…¥å‰åä¸¤å¸§çš„å¼ é‡ï¼Œè¿”å›è¾“å‡ºç»“æœ
    fn inference(&mut self, input_prev: &ArrayD&LTf32>, input_now: &ArrayD&LTf32>) -> Result&LTVec&LTTensor&LTf32>>> {
        // è®°å½•æ¨ç†å¼€å§‹æ—¶é—´
        let start = Instant::now();
        // å°†è¾“å…¥å¼ é‡è½¬æ¢ä¸ºORTæ”¯æŒçš„Valueç±»å‹
        let input_tensor_prev = ort::value::Value::from_array(input_prev.clone().into_dyn())?;
        let input_tensor_now = ort::value::Value::from_array(input_now.clone().into_dyn())?;

        // æ‰§è¡Œæ¨¡å‹æ¨ç†ï¼ˆè¾“å…¥ä¸¤ä¸ªå¼ é‡ï¼‰
        let outputs = self.session.run(inputs![input_tensor_prev, input_tensor_now])?;

        // è®¡ç®—å¹¶æ‰“å°æ¨ç†è€—æ—¶
        let elapsed = start.elapsed();
        println!("æ¨ç†æ—¶é—´: {:.2} ms", elapsed.as_secs_f64() * 1000.0);

        // æå–æ‰€æœ‰è¾“å‡ºå¼ é‡
        use ort::value::{ Value, TensorValueType };
        let mut result: Vec&LTTensor&LTf32>> = Vec::new(); 
        for output_name in &self.output_names {
            let (shape, data) = outputs[output_name.clone()].try_extract_tensor::&LTf32>()?;
            
            // å°† ort::Shape è½¬æ¢ä¸º ndarray å…¼å®¹çš„ç»´åº¦ï¼ˆåŠ¨æ€ç»´åº¦ï¼‰
            let nd_shape: Vec&LTusize> = shape.iter().map(|&d| d as usize).collect();
            let array = Array::from_shape_vec(IxDyn(&nd_shape), data.to_vec())?;
            
            let output = Value::from_array(array)?;
            result.push(output);
        }

        // è¿”å›å€¼
        Ok(result)
    }

    // å¤„ç†è¾“å‡ºï¼šå°†è¾“å‡ºå¼ é‡è½¬æ¢ä¸ºåˆé€‚çš„æ ¼å¼
    fn process_output(&mut self, output: &Tensor&LTf32>) -> ArrayD&LTf32> {
        // è§£æ„è¾“å‡ºå¼ é‡ï¼ˆå½¢çŠ¶å’Œæ•°æ®ï¼‰
        let (shape, data) = output.try_extract_tensor::&LTf32>().unwrap();
        // æ ¹æ®å½¢çŠ¶åˆ›å»º4ç»´æ•°ç»„ï¼ˆ1, é€šé“ï¼Œé«˜åº¦ï¼Œå®½åº¦ï¼‰
        let array = Array::from_shape_vec(
            Dim::<[usize; 4]>::new([1 as usize, shape[1] as usize, shape[2] as usize, shape[3] as usize]), 
            data.to_vec()
        ).unwrap();
        // è½¬æ¢ä¸ºåŠ¨æ€ç»´åº¦å¼ é‡
        let array_dyn = array.into_dyn();
        let flow = array_dyn.to_shape(
            Dim::<[usize; 4]>::new([1 as usize, shape[1] as usize, shape[2] as usize, shape[3] as usize])
        ).unwrap();
        // æ˜ å°„æ‰€æœ‰å€¼ï¼ˆæ­¤å¤„æœªåšå®é™…è½¬æ¢ï¼Œä¿ç•™åŸå€¼ï¼‰
        let resized_flow = flow.mapv(|val| val);
        let resized_flow_dyn = resized_flow.into_dyn();
        // è¿”å›
        resized_flow_dyn
    }

}

fn main() -> Result<()> {
    // æ¨¡å‹æ–‡ä»¶è·¯å¾„
    let model_path = "../../assets/ailia-models/neuflow_v2/neuflow_sintel.onnx";
    println!("æ¨¡å‹æ–‡ä»¶è·¯å¾„{}", model_path);

    // åˆå§‹åŒ–æ¨¡å‹
    let mut estimator = NeuFlowV2::new(model_path)?;

    // åŠ è½½ç¬¬ä¸€å¼ å›¾ç‰‡
    let img1 = image::open("./assets/frame_0016.png")?.to_rgb8();
    // åŠ è½½ç¬¬äºŒå¼ å›¾ç‰‡
    let img2 = image::open("./assets/frame_0025.png")?.to_rgb8();

    // ä¼°è®¡å…‰æµ
    let flow = estimator.estimate_flow(&img1, &img2)?;

    // ç»˜åˆ¶å…‰æµå›¾
    let flow_img = flow_to_image(&flow);

    // åˆ›å»ºç»“æœæ–‡ä»¶å¤¹
    std::fs::create_dir_all(Path::new("./result"))?;

    // ä¿å­˜ç»“æœå›¾ç‰‡
    flow_img.save("./result/ort_optics.png")?;
    println!("å…‰æµé¢„æµ‹ç»“æœå·²ä¿å­˜åˆ° ./result/ort_optics.png");

    Ok(())
}
</code></pre><h3 id=-8>æ•ˆæœ</h3><table><thead><tr><th>å›¾ç‰‡1<th>å›¾ç‰‡2<tbody><tr><td><img alt decoding=async loading=lazy src=https://img2024.cnblogs.com/blog/1048201/202504/1048201-20250414051723024-1689249792.png><td><img alt decoding=async loading=lazy src=https://img2024.cnblogs.com/blog/1048201/202504/1048201-20250414051727580-1413631242.png></table><table><thead><tr><th>Pythonç»“æœ<th>Rustç»“æœ<tbody><tr><td><img alt decoding=async loading=lazy src=https://img2024.cnblogs.com/blog/1048201/202504/1048201-20250414051752432-1121316918.png><td><img alt decoding=async loading=lazy src=https://img2024.cnblogs.com/blog/1048201/202504/1048201-20250414051802012-962821896.png></table></article><div><div class=post-copyright><div class=post-copyright__author_group><a class=post-copyright__author_img href=/about> <picture class="post-copyright__author_img_back progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/avatar.d5facb578cf12fdc.webp><source media="(min-width: 1em)" srcset=/processed_images/avatar.8bb6bf05eac51207.avif><img class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this) src=/processed_images/avatar.06a48b3b45482d6b.webp><noscript><img decoding=async loading=lazy src=/processed_images/avatar.06a48b3b45482d6b.webp></noscript></picture> </a><div class=post-copyright__author_name>ByeIOÂ·å¼€å‘è€…åšå®¢</div><div class=post-copyright__author_desc>ByeIOÂ·å¼€å‘è€…åšå®¢|æŠ€æœ¯è§£å†³æ–¹æ¡ˆ|å¼€å‘æ€è€ƒ|æ€»ç»“</div></div><div class=post-tools id=post-tools><div class=post-tools-left><div class=rewardLeftButton><div class="reward-link mode"><a class=reward-link-button href=/subscribe> <i class=icon-plant-fill></i>è®¢é˜… </a></div></div><div class=shareRight><div class="copyright-link mobile"><div class=copyright-qrcode><div class=copyright-button title=ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« ><i class=icon-qrcode></i></div><div class=copyright-main><div class=copyright-main-all><div id=qrcode></div><div class=reward-dec>ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« </div></div></div></div></div><div class="copyright-link copyurl"><div class=copyright-button id=post-share-url onclick=rm.copyPageUrl() title=å¤åˆ¶é“¾æ¥><i class=icon-link></i></div></div></div></div></div><div class=post-copyright__notice><span class=post-copyright-info> æœ¬æ–‡æ˜¯åŸåˆ›æ–‡ç« ï¼Œé‡‡ç”¨ <a href=/copyright target=_blank>CC BY-NC-ND 4.0</a> åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜ <a href=/ target=_blank>æœ¬ç«™åç§°åŠåœ°å€</a> </span></div></div><div class=post-tools-right><div class=tag_share><div class=post-meta__tag-list><a class=post-meta__tags href=/tags/blog/> <span class=tags-punctuation>åšå®¢</span> <span class=tagsPageCount>31</span> </a><a class=post-meta__tags href=/tags/docs/> <span class=tags-punctuation>æ–‡æ¡£</span> <span class=tagsPageCount>25</span> </a><a class=post-meta__tags href=/tags/featured/> <span class=tags-punctuation>å¿…çœ‹</span> <span class=tagsPageCount>30</span> </a><a class=post-meta__tags href=/tags/hot/> <span class=tags-punctuation>çƒ­é—¨</span> <span class=tagsPageCount>30</span> </a></div></div></div><link href=/css/post-copyright-one.css rel=stylesheet></div><nav class="pagination-post needEndHide" id=pagination><div class="prev-post pull-left"><a href=/articles/docs/æŠ˜è…¾ç¬”è®°[23]-ä½¿ç”¨rustè¿›è¡Œå›¾åƒåˆ†å‰²/> <div class=pagination-info><div class=label>ä¸Šä¸€ç¯‡</div><div class=prev_info>æŠ˜è…¾ç¬”è®°[23]-ä½¿ç”¨rustè¿›è¡Œå›¾åƒåˆ†å‰²</div></div> </a></div><div class="next-post pull-right"><a href=/articles/docs/æŠ˜è…¾ç¬”è®°[5]-ä½¿ç”¨rustè§£çŸ©é˜µæ–¹ç¨‹/> <div class=pagination-info><div class=label>ä¸‹ä¸€ç¯‡</div><div class=next_info>æŠ˜è…¾ç¬”è®°[5]-ä½¿ç”¨rustè§£çŸ©é˜µæ–¹ç¨‹</div></div> </a></div></nav><div class=relatedPosts><div class=headline><i class=icon-cainixihuan style=font-size:1.1rem></i><span>å–œæ¬¢è¿™ç¯‡æ–‡ç« çš„äººä¹Ÿçœ‹äº†</span></div><div class=relatedPosts-list><div><a href=/articles/docs/ROSç¬”è®°[1]-æ­å»ºGazeboä»¿çœŸç¯å¢ƒ/ title=ROSç¬”è®°[1]-æ­å»ºGazeboä»¿çœŸç¯å¢ƒ> <picture class="cover progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/img00006.8f57f1d144c2cfd7.webp><source media="(min-width: 75em)" srcset="/processed_images/img00006.688adcb5ebd82ad6.avif?w=75em"><source media="(min-width: 60em)" srcset="/processed_images/img00006.8e3bcf4e0c9fd77c.avif?w=60em"><source media="(min-width: 45em)" srcset="/processed_images/img00006.08513801052a4920.avif?w=45em"><source media="(min-width: 30em)" srcset="/processed_images/img00006.0928215d8428e769.avif?w=30em"><source media="(min-width: 22em)" srcset="/processed_images/img00006.c83fffe523ead88b.avif?w=22em"><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" srcset="/processed_images/img00006.0beae348737c79a0.webp?w=22em 360w,
              /processed_images/img00006.1e5d356251b272fe.webp?w=30em 500w,
              /processed_images/img00006.c010a791dd57f875.webp?w=45em 720w,
              /processed_images/img00006.86f2248bcd34f02f.webp?w=60em 960w,
              /processed_images/img00006.799278f602588342.webp?w=75em 1200w" class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this)><noscript><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" decoding=async loading=lazy></noscript></picture> <div class="content is-center"><div class=date><i class="far fa-calendar-alt fa-fw"></i> 2025-01-01</div><div class=title>ROSç¬”è®°[1]-æ­å»ºGazeboä»¿çœŸç¯å¢ƒ</div></div> </a></div><div><a href=/articles/docs/ROSç¬”è®°[2]-è·å–OpenMVæ•°æ®å¹¶å‘å¸ƒåˆ°ROSæ¶ˆæ¯/ title=ROSç¬”è®°[2]-è·å–OpenMVæ•°æ®å¹¶å‘å¸ƒåˆ°ROSæ¶ˆæ¯> <picture class="cover progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/img00006.8f57f1d144c2cfd7.webp><source media="(min-width: 75em)" srcset="/processed_images/img00006.688adcb5ebd82ad6.avif?w=75em"><source media="(min-width: 60em)" srcset="/processed_images/img00006.8e3bcf4e0c9fd77c.avif?w=60em"><source media="(min-width: 45em)" srcset="/processed_images/img00006.08513801052a4920.avif?w=45em"><source media="(min-width: 30em)" srcset="/processed_images/img00006.0928215d8428e769.avif?w=30em"><source media="(min-width: 22em)" srcset="/processed_images/img00006.c83fffe523ead88b.avif?w=22em"><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" srcset="/processed_images/img00006.0beae348737c79a0.webp?w=22em 360w,
              /processed_images/img00006.1e5d356251b272fe.webp?w=30em 500w,
              /processed_images/img00006.c010a791dd57f875.webp?w=45em 720w,
              /processed_images/img00006.86f2248bcd34f02f.webp?w=60em 960w,
              /processed_images/img00006.799278f602588342.webp?w=75em 1200w" class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this)><noscript><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" decoding=async loading=lazy></noscript></picture> <div class="content is-center"><div class=date><i class="far fa-calendar-alt fa-fw"></i> 2025-01-01</div><div class=title>ROSç¬”è®°[2]-è·å–OpenMVæ•°æ®å¹¶å‘å¸ƒåˆ°ROSæ¶ˆæ¯</div></div> </a></div></div></div><link href=/css/related-posts-two.css rel=stylesheet><hr></div><div class=aside-content id=aside-content><div class="card-widget card-info"><div class=card-content><div class="card-info-avatar is-center"><div class=author-info__top-group><div class=author-info__sayhi id=author-info__sayhi onclick=wjx.changeSayHelloText()>å¥½ä¹…ä¸è§ï¼Œä½ ç»ˆäºæ¥äº†</div></div></div><div class=avatar-img-group><picture class="avatar-img progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/avatar.d5facb578cf12fdc.webp><source media="(min-width: 1em)" srcset=/processed_images/avatar.8bb6bf05eac51207.avif><img class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this) src=/processed_images/avatar.06a48b3b45482d6b.webp><noscript><img decoding=async loading=lazy src=/processed_images/avatar.06a48b3b45482d6b.webp></noscript></picture></div><div class=author-info__description_group>ä¸ºåˆ›é€ è€…è€Œç”Ÿçš„å¼€æº Zola ä¸»é¢˜~</div><div class=author-info__bottom-group><a class=author-info__bottom-group-left href=/about> <div class=author-info__name>qsbye</div> <div class=author-info__desc>ByeIOÂ·å¼€å‘è€…åšå®¢|æŠ€æœ¯è§£å†³æ–¹æ¡ˆ|å¼€å‘æ€è€ƒ|æ€»ç»“</div> </a><div class="card-info-social-icons is-center"><a rel="external nofollow" class=social-icon href=https://github.com/iWangJiaxiang/zola-theme-jiaxiang.wang target=_blank title=GitHub> <i class=icon-github></i> </a></div></div></div><style>.avatar-img-group:before{content:"";-o-transition:1s;background:var(--wjx-green);border:5px solid var(--wjx-background);z-index:2;border-radius:50%;width:26px;height:26px;-webkit-transition:all 1s;-moz-transition:all 1s;-ms-transition:all 1s;transition:all 1s;position:absolute;bottom:2px;right:2px}.card-info-avatar.is-center{flex-direction:column;align-items:flex-start;display:flex}#aside-content .card-info .avatar-img{opacity:1;border:5px solid var(--wjx-white);border-radius:500px;width:118px;transition:all .3s;position:absolute;top:0;right:0;overflow:hidden}.page #aside-content .card-info .avatar-img{border-color:var(--wjx-card-bg)}.author-info__top-group{width:100%;height:28px;display:flex}.avatar-img-group{transform-origin:bottom;border-radius:500px;width:118px;height:118px;transition:all .3s cubic-bezier(.69,.39,0,1.21);position:absolute;top:90px;right:calc(50% - 59px)}#aside-content .card-info:hover .avatar-img-group{opacity:0;transform:scale(0)}.author-info__bottom-group{justify-content:space-between;align-items:center;width:100%;padding:1.2rem;display:flex;position:absolute;bottom:0;left:0}a.author-info__bottom-group-left:hover{opacity:.8}#aside-content .card-info .card-info-social-icons{cursor:pointer;flex-flow:wrap;justify-content:flex-start;margin:0;display:flex}#aside-content .card-info .card-info-social-icons i:hover{cursor:pointer;background-color:#000;transform:rotate(540deg)}#aside-content .card-info .card-info-social-icons .social-icon{margin:0 0 0 8px}#aside-content .card-info .card-info-social-icons i{background:var(--wjx-white-op);color:var(--wjx-white);justify-content:center;align-items:center;width:40px;height:40px;font-size:1rem;display:flex}#aside-content .card-info .card-info-social-icons i:hover{background:var(--wjx-white);color:var(--wjx-main);box-shadow:none;transform:scale(1.1)}[data-theme=dark] .page #aside-content .card-info .card-info-social-icons i{background:var(--wjx-black-op);color:var(--wjx-card-bg)}[data-theme=dark] .page #aside-content .card-info .card-info-social-icons i:hover{background:var(--wjx-card-bg);color:var(--wjx-fontcolor)}#aside-content .card-info .banner-button{border-radius:20px;justify-content:center;width:118px;height:40px}@media screen and (width>=1300px){#aside-content .card-info .card-info-social-icons i{color:var(--wjx-white)}[data-theme=dark] .page #aside-content .card-info .card-info-social-icons i{color:var(--wjx-card-bg)}}#aside-content .card-info .card-info-data>.card-info-data-item:hover{background:var(--wjx-post-blockquote-bg);transform:scale(.97)}#aside-content>div.card-widget.card-info>div.card-content>div.card-info-data>.card-info-data-item:hover>a>div.headline,#aside-content>div.card-widget.card-info>div.card-content>div.card-info-data>.card-info-data-item:hover>a>div.length-num{color:var(--wjx-blue)}.author-info__description_group{color:var(--wjx-white);opacity:0;width:100%;padding:1.2rem;transition:all .3s;position:absolute;top:50px;left:0}.card-widget:hover .author-info__description_group{opacity:1}.author-info__description2{text-align:justify;z-index:2;color:#fffc;width:100%;margin:.3rem 0;line-height:1.38}.author-info__description2 b{color:var(--wjx-white)}[data-theme=dark] .page div#author-info__sayhi{background:var(--wjx-black-op);color:var(--wjx-black)}#aside-content .card-info .author-info__name{text-align:left;color:var(--wjx-white);margin-bottom:5px;font-size:20px;font-weight:700;line-height:1}.page #aside-content .card-info .author-info__name,.page .author-info__desc{color:var(--wjx-white)}.author-info__desc{color:var(--wjx-white);opacity:.6;font-size:12px;line-height:1}.author-info__description{text-align:justify;color:var(--wjx-white);opacity:1;margin:.3rem 0;line-height:1.38}.page .author-info__description{color:var(--wjx-card-bg)}.author-info__description b{color:var(--wjx-white);opacity:1}.page .author-info__description b{color:var(--wjx-card-bg);opacity:1}.avatar-sticker{z-index:0;background:var(--wjx-white);border-radius:50%;justify-content:center;align-items:center;width:33px;height:33px;line-height:34px;transition:all .3s ease-out .2s;display:flex;position:absolute;bottom:2px;right:2px;transform:scale(1)}.page .avatar-sticker{background:var(--wjx-card-bg)}.avatar-sticker img{width:26px;height:26px}.card-widget:hover .avatar-sticker{opacity:0;transform:scale(0)}.author-info__description b{color:var(--wjx-white)}#aside-content>.card-widget.card-info:before{background:linear-gradient(-25deg,var(--wjx-main),var(--wjx-main-op-deep),var(--wjx-main),var(--wjx-main-op-deep));content:"";background-size:400%;width:100%;height:100%;animation:15s infinite gradient;position:absolute;top:0;left:0}</style></div><div class="card-widget wjx-right-widget" onclick="javascript:window.open('/subscribe')" id=card-wechat><div id=flip-wrapper><div id=flip-content><div style="background:url(/img/wechat/qr-green.avif) 50%/100% no-repeat" class=face></div><div class="back face" style="background:url(/img/wechat/qr-white.avif) 50%/100% no-repeat"></div></div></div><style>#aside-content .card-widget#card-wechat{background:#07c160}#aside-content .card-widget#card-wechat:before{content:"";background:url(/img/wechat/gzh_cover.avif) 50%/cover no-repeat;width:100%;height:90%;transition:all .2s cubic-bezier(.45,.04,.43,1.21);position:absolute;top:0;left:0}#aside-content .card-widget#card-wechat:hover:before{opacity:0;transition:all .3s ease-out;top:100%}</style></div><div class=sticky_layout><div class=card-widget id=card-toc><div class=item-headline><i class=icon-bars></i><span>æ–‡ç« ç›®å½•</span><span class=toc-percentage></span></div><div class=toc-content></div></div><div class="card-widget card-recent-post"><div class=item-headline><i class=icon-chat--fill style=font-size:19px></i><span>æœ€æ–°è¯„è®º</span></div><div class=aside-list id=newcomm></div></div><div class="card-widget card-recent-post"><div class=item-headline><i class=icon-eicon_map-2-line1></i><span>æœ€è¿‘å‘å¸ƒ</span></div><div class=aside-list><div class=aside-list-item><a class=thumbnail href=/articles/docs/é…ç½®orangepi5proè¿è¡Œrknnç‰ˆæœ¬çš„yolov5/ title=é…ç½®orangepi5proè¿è¡Œrknnç‰ˆæœ¬çš„yolov5> <picture class="post_bg progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/img00006.8f57f1d144c2cfd7.webp><source media="(min-width: 75em)" srcset="/processed_images/img00006.688adcb5ebd82ad6.avif?w=75em"><source media="(min-width: 60em)" srcset="/processed_images/img00006.8e3bcf4e0c9fd77c.avif?w=60em"><source media="(min-width: 45em)" srcset="/processed_images/img00006.08513801052a4920.avif?w=45em"><source media="(min-width: 30em)" srcset="/processed_images/img00006.0928215d8428e769.avif?w=30em"><source media="(min-width: 22em)" srcset="/processed_images/img00006.c83fffe523ead88b.avif?w=22em"><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" srcset="/processed_images/img00006.0beae348737c79a0.webp?w=22em 360w,
              /processed_images/img00006.1e5d356251b272fe.webp?w=30em 500w,
              /processed_images/img00006.c010a791dd57f875.webp?w=45em 720w,
              /processed_images/img00006.86f2248bcd34f02f.webp?w=60em 960w,
              /processed_images/img00006.799278f602588342.webp?w=75em 1200w" class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this)><noscript><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" decoding=async loading=lazy></noscript></picture> </a><div class=content><a class=title href=/articles/docs/é…ç½®orangepi5proè¿è¡Œrknnç‰ˆæœ¬çš„yolov5/ title=é…ç½®orangepi5proè¿è¡Œrknnç‰ˆæœ¬çš„yolov5>é…ç½®orangepi5proè¿è¡Œrknnç‰ˆæœ¬çš„yolov5</a></div></div><div class=aside-list-item><a class=thumbnail href=/articles/docs/è®¡ç®—æœºæ§åˆ¶apmé£æ§è‡ªåŠ¨é£è¡Œ/ title=è®¡ç®—æœºæ§åˆ¶apmé£æ§è‡ªåŠ¨é£è¡Œ> <picture class="post_bg progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/img00006.8f57f1d144c2cfd7.webp><source media="(min-width: 75em)" srcset="/processed_images/img00006.688adcb5ebd82ad6.avif?w=75em"><source media="(min-width: 60em)" srcset="/processed_images/img00006.8e3bcf4e0c9fd77c.avif?w=60em"><source media="(min-width: 45em)" srcset="/processed_images/img00006.08513801052a4920.avif?w=45em"><source media="(min-width: 30em)" srcset="/processed_images/img00006.0928215d8428e769.avif?w=30em"><source media="(min-width: 22em)" srcset="/processed_images/img00006.c83fffe523ead88b.avif?w=22em"><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" srcset="/processed_images/img00006.0beae348737c79a0.webp?w=22em 360w,
              /processed_images/img00006.1e5d356251b272fe.webp?w=30em 500w,
              /processed_images/img00006.c010a791dd57f875.webp?w=45em 720w,
              /processed_images/img00006.86f2248bcd34f02f.webp?w=60em 960w,
              /processed_images/img00006.799278f602588342.webp?w=75em 1200w" class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this)><noscript><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" decoding=async loading=lazy></noscript></picture> </a><div class=content><a class=title href=/articles/docs/è®¡ç®—æœºæ§åˆ¶apmé£æ§è‡ªåŠ¨é£è¡Œ/ title=è®¡ç®—æœºæ§åˆ¶apmé£æ§è‡ªåŠ¨é£è¡Œ>è®¡ç®—æœºæ§åˆ¶apmé£æ§è‡ªåŠ¨é£è¡Œ</a></div></div><div class=aside-list-item><a href="/articles/docs/ç¿»è¯‘[5]-åŸºäºrustå’Œembassyå¼‚æ­¥æ¡†æ¶çš„é£æ§å›ºä»¶_ Holsatus Flight/" title="ç¿»è¯‘[5]-åŸºäºrustå’Œembassyå¼‚æ­¥æ¡†æ¶çš„é£æ§å›ºä»¶_ Holsatus Flight" class=thumbnail> <picture class="post_bg progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/img00006.8f57f1d144c2cfd7.webp><source media="(min-width: 75em)" srcset="/processed_images/img00006.688adcb5ebd82ad6.avif?w=75em"><source media="(min-width: 60em)" srcset="/processed_images/img00006.8e3bcf4e0c9fd77c.avif?w=60em"><source media="(min-width: 45em)" srcset="/processed_images/img00006.08513801052a4920.avif?w=45em"><source media="(min-width: 30em)" srcset="/processed_images/img00006.0928215d8428e769.avif?w=30em"><source media="(min-width: 22em)" srcset="/processed_images/img00006.c83fffe523ead88b.avif?w=22em"><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" srcset="/processed_images/img00006.0beae348737c79a0.webp?w=22em 360w,
              /processed_images/img00006.1e5d356251b272fe.webp?w=30em 500w,
              /processed_images/img00006.c010a791dd57f875.webp?w=45em 720w,
              /processed_images/img00006.86f2248bcd34f02f.webp?w=60em 960w,
              /processed_images/img00006.799278f602588342.webp?w=75em 1200w" class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this)><noscript><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" decoding=async loading=lazy></noscript></picture> </a><div class=content><a href="/articles/docs/ç¿»è¯‘[5]-åŸºäºrustå’Œembassyå¼‚æ­¥æ¡†æ¶çš„é£æ§å›ºä»¶_ Holsatus Flight/" title="ç¿»è¯‘[5]-åŸºäºrustå’Œembassyå¼‚æ­¥æ¡†æ¶çš„é£æ§å›ºä»¶_ Holsatus Flight" class=title>ç¿»è¯‘[5]-åŸºäºrustå’Œembassyå¼‚æ­¥æ¡†æ¶çš„é£æ§å›ºä»¶_ Holsatus Flight</a></div></div><div class=aside-list-item><a class=thumbnail href=/articles/docs/æ­å»ºArduPilotçš„SITLä»¿çœŸç¯å¢ƒ/ title=æ­å»ºArduPilotçš„SITLä»¿çœŸç¯å¢ƒ> <picture class="post_bg progressive-picture"><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/img00006.8f57f1d144c2cfd7.webp><source media="(min-width: 75em)" srcset="/processed_images/img00006.688adcb5ebd82ad6.avif?w=75em"><source media="(min-width: 60em)" srcset="/processed_images/img00006.8e3bcf4e0c9fd77c.avif?w=60em"><source media="(min-width: 45em)" srcset="/processed_images/img00006.08513801052a4920.avif?w=45em"><source media="(min-width: 30em)" srcset="/processed_images/img00006.0928215d8428e769.avif?w=30em"><source media="(min-width: 22em)" srcset="/processed_images/img00006.c83fffe523ead88b.avif?w=22em"><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" srcset="/processed_images/img00006.0beae348737c79a0.webp?w=22em 360w,
              /processed_images/img00006.1e5d356251b272fe.webp?w=30em 500w,
              /processed_images/img00006.c010a791dd57f875.webp?w=45em 720w,
              /processed_images/img00006.86f2248bcd34f02f.webp?w=60em 960w,
              /processed_images/img00006.799278f602588342.webp?w=75em 1200w" class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this)><noscript><img src="/processed_images/img00006.1e5d356251b272fe.webp?w=30em" decoding=async loading=lazy></noscript></picture> </a><div class=content><a class=title href=/articles/docs/æ­å»ºArduPilotçš„SITLä»¿çœŸç¯å¢ƒ/ title=æ­å»ºArduPilotçš„SITLä»¿çœŸç¯å¢ƒ>æ­å»ºArduPilotçš„SITLä»¿çœŸç¯å¢ƒ</a></div></div></div></div><div class="card-widget card-categories"><div class=item-headline><i class=icon-folder-open></i><span>åˆ†ç±»</span></div><div class=aside-list><ul class=card-category-list><li class=card-category-list-item><a class=card-category-list-link href=/categories/misc/ rel=tag> <span class=card-category-list-name>æ‚è°ˆ</span> <span class=card-category-list-count>6</span> </a><li class=card-category-list-item><a class=card-category-list-link href=/categories/theme/ rel=tag> <span class=card-category-list-name>ä¸»é¢˜</span> <span class=card-category-list-count>25</span> </a></ul></div></div></div></div></main><footer id=footer><div id=wjx-footer-bar><div class=footer-logo>qsbye</div><div class=footer-bar-description>ByeIOÂ·å¼€å‘è€…åšå®¢|æŠ€æœ¯è§£å†³æ–¹æ¡ˆ|å¼€å‘æ€è€ƒ|æ€»ç»“</div><a class=footer-bar-link href=/about>äº†è§£æ›´å¤š</a></div><div id=footer_deal><a rel="external nofollow noopener noreferrer" class=deal_link href=mailto:mail@example.com target=_blank title=Mail> <i class=icon-envelope></i> </a><picture class="footer_mini_logo progressive-picture" onclick="btf.scrollToDest(0, 500)" style=border-radius:500px><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/avatar.d5facb578cf12fdc.webp><source media="(min-width: 1em)" srcset=/processed_images/avatar.8bb6bf05eac51207.avif><img alt=è¿”å›é¡¶éƒ¨ class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this) src=/processed_images/avatar.06a48b3b45482d6b.webp><noscript><img alt=è¿”å›é¡¶éƒ¨ decoding=async loading=lazy src=/processed_images/avatar.06a48b3b45482d6b.webp></noscript></picture><a rel="external nofollow noopener noreferrer" class=deal_link href=https://github.com/iWangJiaxiang/zola-theme-jiaxiang.wang target=_blank title=Github> <i class=icon-github></i> </a></div><div id=wjx-footer><div class=footer-group><h3 class=footer-title>æ–‡åº“</h3><div class=footer-links><a class=footer-item data-pjax href=/archives target=_blank>å…¨éƒ¨æ–‡ç« </a><a class=footer-item data-pjax href=/categories target=_blank>åˆ†ç±»åˆ—è¡¨</a><a class=footer-item data-pjax href=/tags target=_blank>æ ‡ç­¾åˆ—è¡¨</a><a class=footer-item data-pjax href=javascript:toRandomPost() target=_blank>éšæœºæ–‡ç« </a></div></div><div class=footer-group><h3 class=footer-title>ä½œå“</h3><div class=footer-links><a class=footer-item data-pjax href=/articles/misc/lorem-ipsum target=_blank>Lorem Ipsum</a></div></div><div class=footer-group><h3 class=footer-title>åè®®</h3><div class=footer-links><a class=footer-item data-pjax href=/privacy target=_blank>éšç§åè®®</a><a class=footer-item data-pjax href=/cookies target=_blank>Cookies</a><a class=footer-item data-pjax href=/copyright target=_blank>ç‰ˆæƒåè®®</a></div></div><div class=footer-group><div class=footer-title-group><h3 class=footer-title>å‹é“¾</h3><button class=random-friends-btn id=footer-random-friends-btn onclick=javascript:wjx.addFriendLinksInFooter(); title=æ¢ä¸€æ‰¹å‹æƒ…é“¾æ¥><i class=icon-arrow-rotate-right style=font-size:16px></i></button></div><div class=footer-links id=friend-links-in-footer></div></div></div><div id=footer-bar style=padding:1rem><div class=footer-bar-links><div class=footer-bar-left><div id=footer-bar-tips><div class=copyright-group>Â© <span class=inline-word id=copyright-info>2025</span> Â ByÂ  <a class=footer-bar-link href=/ target=_blank> <picture class=progressive-picture id=copyright-logo><img class=progressive-thumbnail decoding=async loading=lazy src=/processed_images/avatar.d5facb578cf12fdc.webp><source media="(min-width: 1em)" srcset=/processed_images/avatar.8bb6bf05eac51207.avif><img class=progressive-content decoding=async loading=lazy onload=progressiveLoad(this) src=/processed_images/avatar.06a48b3b45482d6b.webp><noscript><img decoding=async loading=lazy src=/processed_images/avatar.06a48b3b45482d6b.webp></noscript></picture> ByeIOÂ·å¼€å‘è€…åšå®¢ </a><script defer>var startYear = 2025;
                            var currentYear = new Date().getFullYear();
                            var copyrightInfo = `${startYear !== currentYear ? startYear + ' - ' : ''}${currentYear}`;
                            document.getElementById('copyright-info').innerHTML = copyrightInfo;</script></div><div class=compliance-group><a rel="noopener external nofollow noreferrer" class=footer-bar-link href=https://beian.miit.gov.cn/#/Integrated/index target=_blank> ICP </a><a class=footer-bar-link href=https://github.com/iWangJiaxiang/zola-theme-jiaxiang.wang> <div class=status-light></div> <span>æœ¬ç«™åŠä¸»é¢˜åŸºäº Zola æ„å»º</span> </a></div></div></div><div class=footer-bar-right><a class=footer-bar-link href=/subscribe target=_blank>è®¢é˜…</a><a class=footer-bar-link href=https://github.com/iWangJiaxiang/zola-theme-jiaxiang.wang target=_blank>ä¸»é¢˜</a><a class=footer-bar-link href=/about>å…³äº</a><a class=footer-bar-link href=mailto:mail@example.com target=_blank>åé¦ˆ</a><a class="footer-bar-link cc" href=/copyright rel=license target=_blank title=CCç‰ˆæƒåè®®> <i class=icon-copyright-line></i> <i class=icon-creative-commons-by-line></i> <i class=icon-creative-commons-nc-line></i> <i class=icon-creative-commons-nd-line></i> </a></div></div></div><div id=quit-box onclick=RemoveRewardMask()></div><div class="comment-barrage needEndHide" style=display:none></div><style>a.footer-bar-link.cloud{align-items:center;display:flex}img.entered.loading.cloud{height:32px}</style></footer></div><div id=sidebar><div id=menu-mask></div><div id=sidebar-menus><span class=sidebar-menu-item-title>åŠŸèƒ½</span><div class=sidebar-menu-item><button class="darkmode_switchbutton menu-child" href=javascript:void(0); onclick=rm.switchDarkMode() title=æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢><i class=icon-moon style=font-size:.9rem;line-height:2></i> <span>æ˜¾ç¤ºæ¨¡å¼</span></button></div><div class=back-menu-list-groups><div class=back-menu-list-group><div class=back-menu-list-title>ä½œå“</div><div class=back-menu-list><a class="back-menu-item nav-item" href=/articles/misc/lorem-ipsum>  <i class=icon-music style=font-size:.9em></i> <span class=back-menu-item-text>Lorem Ipsum</span> </a><a class="back-menu-item nav-item" href=/articles/misc/lorem-ipsum>  <i class=icon-music style=font-size:.9em></i> <span class=back-menu-item-text>Lorem Ipsum</span> </a></div></div></div><div class=menus_items><div class=menus_item><button class=site-page><span>æ–‡åº“</span></button><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" draggable=false href=/archives> <i class="icon-book-open faa-tada" style=font-size:.9em></i> <span>å…¨éƒ¨æ–‡ç« </span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=/categories> <i class="icon-folder-open faa-tada" style=font-size:.9em></i> <span>åˆ†ç±»åˆ—è¡¨</span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=/tags> <i class="icon-tags faa-tada" style=font-size:.9em></i> <span>æ ‡ç­¾åˆ—è¡¨</span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=javascript:toRandomPost()> <i class="icon-artstation faa-tada" style=font-size:.9em></i> <span>éšæœºæ–‡ç« </span> </a></ul></div><div class=menus_item><a class=site-page href=/tags/work> <span>æ¨è</span> </a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" draggable=false href=/articles/docs/readme> <i class="icon-music faa-tada" style=font-size:.9em></i> <span>åšå®¢ä¸»é¢˜ä»‹ç»</span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=/articles/misc/lorem-ipsum> <i class="icon-music faa-tada" style=font-size:.9em></i> <span>Lorem Ipsum</span> </a></ul></div><div class=menus_item><button class=site-page><span>å‹é“¾</span></button><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" draggable=false href=/friends> <i class="icon-link faa-tada" style=font-size:.9em></i> <span>å‹é“¾åˆ—è¡¨</span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=javascript:travelling()> <i class="icon-paper-plane faa-tada" style=font-size:.9em></i> <span>éšæœºå‘ç°</span> </a></ul></div><div class=menus_item><button class=site-page><span>æˆ‘çš„</span></button><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" draggable=false href=/about> <i class="icon-rocket faa-tada" style=font-size:.9em></i> <span>å…³äºæœ¬äºº</span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=/equipment> <i class="icon-artstation faa-tada" style=font-size:.9em></i> <span>æˆ‘çš„è£…å¤‡</span> </a><li><a class="site-page child faa-parent animated-hover" draggable=false href=/tags/project> <i class="icon-lightbulb faa-tada" style=font-size:.9em></i> <span>æˆ‘çš„é¡¹ç›®</span> </a></ul></div></div><span class=sidebar-menu-item-title>æ ‡ç­¾</span><div class="card-widget card-tags card-archives card-webinfo card-allinfo"><div class=item-headline></div><div class=card-tag-cloud><a class=tag-item href=/tags/blog/ style=font-size:1em title=åšå®¢>  åšå®¢<sup>31</sup> </a><a class=tag-item href=/tags/docs/ style=font-size:1em title=æ–‡æ¡£>  æ–‡æ¡£<sup>25</sup> </a><a class=tag-item href=/tags/featured/ style=font-size:1em title=å¿…çœ‹>  å¿…çœ‹<sup>30</sup> </a><a class=tag-item href=/tags/hot/ style=font-size:1em title=çƒ­é—¨>  çƒ­é—¨<sup>30</sup> </a><a class=tag-item href=/tags/project/ style=font-size:1em title=é¡¹ç›®>  é¡¹ç›®<sup>1</sup> </a><a class=tag-item href=/tags/work/ style=font-size:1em title=work>  work<sup>1</sup> </a></div></div></div></div><div id=console><div class=close-btn href=javascript:void(0); onclick=wjx.hideConsole()><i class=icon-circle-xmark></i></div><div class=console-card-group><div class=console-card-group-left><div class=console-card id=card-newest-comments onclick=wjx.hideConsole()><div class=card-content><div class=author-content-item-tips>äº’åŠ¨</div><span class=author-content-item-title>æœ€è¿‘è¯„è®º</span></div><div class=aside-list><span>æ­£åœ¨åŠ è½½ä¸­...</span></div></div></div><div class=console-card-group-right><div class="console-card tags" onclick=wjx.hideConsole()><div class=card-content><div class=author-content-item-tips>æ ‡ç­¾</div><span class=author-content-item-title>å¯»æ‰¾æ„Ÿå…´è¶£çš„é¢†åŸŸ</span></div><div class=card-tag-cloud><a href=/tags/blog/ rel=tag style=color:#d3d3d3;font-size:1em> åšå®¢<sup>31</sup> </a><a href=/tags/docs/ rel=tag style=color:#d3d3d3;font-size:1em> æ–‡æ¡£<sup>25</sup> </a><a href=/tags/featured/ rel=tag style=color:#d3d3d3;font-size:1em> å¿…çœ‹<sup>30</sup> </a><a href=/tags/hot/ rel=tag style=color:#d3d3d3;font-size:1em> çƒ­é—¨<sup>30</sup> </a><a href=/tags/project/ rel=tag style=color:#d3d3d3;font-size:1em> é¡¹ç›®<sup>1</sup> </a><a href=/tags/work/ rel=tag style=color:#d3d3d3;font-size:1em> work<sup>1</sup> </a></div></div><div class="console-card history" onclick=wjx.hideConsole()><div class=item-headline><i class="fas fa-archive"></i><span>æ–‡ç« </span></div><ul class=card-archive-list><ul><li class=card-archive-list-item><a class=card-archive-list-link href=/archives> <span class=card-archive-list-date> 2025 1æœˆ </span> <div class=card-archive-list-count-group><span class=card-archive-list-count>25</span><span class=card-archive-list-count-unit>ç¯‡</span></div> </a></ul><ul><li class=card-archive-list-item><a class=card-archive-list-link href=/archives> <span class=card-archive-list-date> 2024 12æœˆ </span> <div class=card-archive-list-count-group><span class=card-archive-list-count>6</span><span class=card-archive-list-count-unit>ç¯‡</span></div> </a></ul></ul></div></div></div><div class=button-group><div class=console-btn-item><button rel="external nofollow" class=darkmode_switchbutton href=javascript:void(0); onclick=navFn.switchDarkMode(); title=æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢><i class=icon-moon-clear-fill style=font-size:1rem></i></button></div><div class=console-btn-item id=consoleHideAside onclick=wjx.hideAsideBtn() title=è¾¹æ æ˜¾ç¤ºæ§åˆ¶><button class=asideSwitch title=ä¾§è¾¹æ å¼€å…³><i class=icon-arrows-left-right></i></button></div><div class="console-btn-item on" id=consoleCommentBarrage onclick=wjx.switchCommentBarrage() title=çƒ­è¯„å¼€å…³><button class=commentBarrage><i class=icon-chat--fill></i></button></div></div><div class=console-mask href=javascript:void(0); onclick=wjx.hideConsole()></div></div><div id=rightside><div id=rightside-config-hide><button id=translateLink title=ç®€ç¹è½¬æ¢ type=button>ç¹</button><button id=darkmode title=æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢ type=button><i class=icon-circle-half-stroke></i></button><button id=hide-aside-btn title=å•æ å’ŒåŒæ åˆ‡æ¢ type=button><i class=icon-arrows-left-right></i></button></div><div id=rightside-config-show><button id=rightside-config title=è®¾ç½® type=button><i class=icon-gear></i></button><a href=#post-comment id=to_comment title=ç›´è¾¾è¯„è®º><i class=icon-chat--fill style=font-size:17px></i></a><button id=go-up title=å›åˆ°é¡¶éƒ¨ type=button><i class=icon-arrow-up></i></button></div></div><link onload="this.onload=null;this.rel='stylesheet'" as=style href=/css/read-mode.css rel=preload><noscript><link href=/css/read-mode.css rel=stylesheet></noscript><div class=js-pjax><div id=rightMenu><div class="rightMenu-group rightMenu-small"><div class=rightMenu-item id=menu-backward><i class=icon-arrow-left></i></div><div class=rightMenu-item id=menu-forward><i class=icon-arrow-right></i></div><div class=rightMenu-item id=menu-refresh><i class=icon-arrow-rotate-right></i></div><div class=rightMenu-item id=menu-top><i class=icon-arrow-up></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class=rightMenu-item id=menu-copytext><i class=icon-copy></i><span>å¤åˆ¶é€‰ä¸­æ–‡æœ¬</span></div><div class=rightMenu-item id=menu-pastetext><i class=icon-paste></i><span>ç²˜è´´æ–‡æœ¬</span></div><a class=rightMenu-item id=menu-commenttext> <i class=icon-comment-medical></i> <span>å¼•ç”¨åˆ°è¯„è®º</span> </a><div class=rightMenu-item id=menu-newwindow><i class=icon-window-restore></i><span>æ–°çª—å£æ‰“å¼€</span></div><div class=rightMenu-item id=menu-copylink><i class=icon-link></i><span>å¤åˆ¶é“¾æ¥åœ°å€</span></div><div class=rightMenu-item id=menu-copyimg><i class=icon-images></i><span>å¤åˆ¶æ­¤å›¾ç‰‡</span></div><div class=rightMenu-item id=menu-downloadimg><i class=icon-download></i><span>ä¸‹è½½æ­¤å›¾ç‰‡</span></div><div class=rightMenu-item id=menu-newwindowimg><i class=icon-window-restore></i><span>æ–°çª—å£æ‰“å¼€å›¾ç‰‡</span></div><div class=rightMenu-item id=menu-search><i class=icon-search--line></i><span>ç«™å†…æœç´¢</span></div><div class=rightMenu-item id=menu-searchBaidu><i class=icon-baidu></i><span>ç™¾åº¦æœç´¢</span></div><div class=rightMenu-item id=menu-music-toggle><i class=icon-play></i><span>æ’­æ”¾éŸ³ä¹</span></div><div class=rightMenu-item id=menu-music-back><i class=icon-backward></i><span>åˆ‡æ¢åˆ°ä¸Šä¸€é¦–</span></div><div class=rightMenu-item id=menu-music-forward><i class=icon-forward></i><span>åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–</span></div><div onclick="javascript:window.open('https://y.qq.com/n/ryqq/playlist/xxxxx')" class=rightMenu-item id=menu-music-playlist><i class=icon-radio></i><span>æŸ¥çœ‹æ‰€æœ‰æ­Œæ›²</span></div><div class=rightMenu-item id=menu-music-copyMusicName><i class=icon-copy></i><span>å¤åˆ¶æ­Œå</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id=menu-randomPost onclick=toRandomPost()> <i class=icon-shuffle></i> <span>éšä¾¿é€›é€›</span> </a><a class="rightMenu-item menu-link" href=../categories> <i class=icon-cube></i> <span>åšå®¢åˆ†ç±»</span> </a><a class="rightMenu-item menu-link" href=../tags> <i class=icon-tags></i> <span>æ–‡ç« æ ‡ç­¾</span> </a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><div class=rightMenu-item id=menu-copy><i class=icon-copy></i><span>å¤åˆ¶åœ°å€</span></div><div class=rightMenu-item draggable=false id=menu-commentBarrage style=display:flex><i class=icon-chat--fill style=font-size:19px></i><span class=menu-commentBarrage-text>æ˜¾ç¤ºçƒ­è¯„</span></div><div class=rightMenu-item id=menu-darkmode><i class=icon-moon-clear-fill style=font-size:19px></i><span class=menu-darkmode-text>æ·±è‰²æ¨¡å¼</span></div><div class=rightMenu-item id=menu-translate><i class=icon-fanti style=font-size:19px></i><span>è½‰ç‚ºç¹é«”</span></div></div></div><div id=rightmenu-mask></div></div><script defer onload src=/libs/qrcode/qrcode.min.js></script><script defer src=/libs/view-image/view-image.min.js></script><script defer src=/libs/tocbot/4.18.2/tocbot.min.js></script><link onload="this.onload=null;this.rel='stylesheet'" as=style href=/libs/tocbot/4.18.2/tocbot.css rel=preload><noscript><link href=/libs/tocbot/4.18.2/tocbot.css rel=stylesheet></noscript><script async src=/libs/snackbar/snackbar.min.js></script><script>var meting_api = "https:&#x2F;&#x2F;api.i-meto.com&#x2F;meting&#x2F;api?server=:server&amp;type=:type&amp;id=:id&amp;r=:r";</script><canvas height=880 id=universe width=1312></canvas><script defer src=/libs/canvas/dark.js></script><script src=/libs/waterfall/waterfall.min.js></script><script src=/libs/fast-average-color/index.browser.min.js></script><script>let pjaxSelectors = ['title', '#body-wrap', '#rightside-config-hide', '#rightside-config-show', '.js-pjax', '#site-config']
          
    pjaxSelectors.unshift('meta[property="og:type"]', 'meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]', 'meta[property="og:description"]'
            , 'meta[name="twitter:title"]', 'meta[name="twitter:url"]', 'meta[name="twitter:description"]', 'meta[name="twitter:image"]', 'meta[name="description"]')
    
    var pjax = new Pjax({
        elements: 'a:not([target="_blank"])',
        selectors: pjaxSelectors,
        cacheBust: false,
        //debug: true,        
        analytics: false,
        scrollRestoration: false
    })</script><script defer src=/js/rightmenu.js></script><script data-pjax defer src=/production/js/abstract/local.js></script><script data-pjax defer src=/production/js/bundle.js></script><script defer src=/js/tw_cn.js></script><script defer src=/libs/instantpage/instantpage.min.js type=module></script><link onload="this.rel='stylesheet'" as=style href=/libs/prism/prism.min.css rel=preload><noscript><link href=/libs/prism/prism.min.css rel=stylesheet></noscript><link onload="this.rel='stylesheet'" as=style href=/libs/prism/code.css rel=preload><noscript><link href=/libs/prism/code.css rel=stylesheet></noscript><link onload="this.rel='stylesheet'" as=style data-code-theme=light href=/libs/prism/themes/prism-one-dark.css rel=preload><noscript><link href=/libs/prism/themes/prism-one-dark.css rel=stylesheet></noscript><link onload="this.rel='stylesheet'" as=style data-code-theme=dark href=/libs/prism/themes/prism-one-dark.css rel=preload><noscript><link href=/libs/prism/themes/prism-one-dark.css rel=stylesheet></noscript><script defer src=/libs/prism/prism.min.js></script><style>#article-container .code-toolbar pre.close{height:300px;overflow:hidden}</style>